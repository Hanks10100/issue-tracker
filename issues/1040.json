{
  "url": "https://api.github.com/repos/alibaba/weex/issues/1040",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/1040/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/1040/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/1040/events",
  "html_url": "https://github.com/alibaba/weex/issues/1040",
  "id": 172374258,
  "number": 1040,
  "title": "JNI DETECTED ERROR IN APPLICATION: input is not valid Modified UTF-8: illegal continuation byte 0",
  "user": {
    "login": "blessyezi",
    "id": 16790300,
    "avatar_url": "https://avatars0.githubusercontent.com/u/16790300?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/blessyezi",
    "html_url": "https://github.com/blessyezi",
    "followers_url": "https://api.github.com/users/blessyezi/followers",
    "following_url": "https://api.github.com/users/blessyezi/following{/other_user}",
    "gists_url": "https://api.github.com/users/blessyezi/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/blessyezi/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/blessyezi/subscriptions",
    "organizations_url": "https://api.github.com/users/blessyezi/orgs",
    "repos_url": "https://api.github.com/users/blessyezi/repos",
    "events_url": "https://api.github.com/users/blessyezi/events{/privacy}",
    "received_events_url": "https://api.github.com/users/blessyezi/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 359381236,
      "url": "https://api.github.com/repos/alibaba/weex/labels/android",
      "name": "android",
      "color": "f9d0c4",
      "default": false
    },
    {
      "id": 339914709,
      "url": "https://api.github.com/repos/alibaba/weex/labels/help%20wanted",
      "name": "help wanted",
      "color": "159818",
      "default": true
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "zshshr",
    "id": 5382962,
    "avatar_url": "https://avatars2.githubusercontent.com/u/5382962?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zshshr",
    "html_url": "https://github.com/zshshr",
    "followers_url": "https://api.github.com/users/zshshr/followers",
    "following_url": "https://api.github.com/users/zshshr/following{/other_user}",
    "gists_url": "https://api.github.com/users/zshshr/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zshshr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zshshr/subscriptions",
    "organizations_url": "https://api.github.com/users/zshshr/orgs",
    "repos_url": "https://api.github.com/users/zshshr/repos",
    "events_url": "https://api.github.com/users/zshshr/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zshshr/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "zshshr",
      "id": 5382962,
      "avatar_url": "https://avatars2.githubusercontent.com/u/5382962?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zshshr",
      "html_url": "https://github.com/zshshr",
      "followers_url": "https://api.github.com/users/zshshr/followers",
      "following_url": "https://api.github.com/users/zshshr/following{/other_user}",
      "gists_url": "https://api.github.com/users/zshshr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zshshr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zshshr/subscriptions",
      "organizations_url": "https://api.github.com/users/zshshr/orgs",
      "repos_url": "https://api.github.com/users/zshshr/repos",
      "events_url": "https://api.github.com/users/zshshr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zshshr/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": [
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/261837024",
      "html_url": "https://github.com/alibaba/weex/issues/1040#issuecomment-261837024",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1040",
      "id": 261837024,
      "user": {
        "login": "zshshr",
        "id": 5382962,
        "avatar_url": "https://avatars2.githubusercontent.com/u/5382962?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/zshshr",
        "html_url": "https://github.com/zshshr",
        "followers_url": "https://api.github.com/users/zshshr/followers",
        "following_url": "https://api.github.com/users/zshshr/following{/other_user}",
        "gists_url": "https://api.github.com/users/zshshr/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/zshshr/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/zshshr/subscriptions",
        "organizations_url": "https://api.github.com/users/zshshr/orgs",
        "repos_url": "https://api.github.com/users/zshshr/repos",
        "events_url": "https://api.github.com/users/zshshr/events{/privacy}",
        "received_events_url": "https://api.github.com/users/zshshr/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-21T03:58:27Z",
      "updated_at": "2016-11-21T03:58:27Z",
      "body": "@blessyezi 你用的weex sdk 什么版本？"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/262429643",
      "html_url": "https://github.com/alibaba/weex/issues/1040#issuecomment-262429643",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1040",
      "id": 262429643,
      "user": {
        "login": "zshshr",
        "id": 5382962,
        "avatar_url": "https://avatars2.githubusercontent.com/u/5382962?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/zshshr",
        "html_url": "https://github.com/zshshr",
        "followers_url": "https://api.github.com/users/zshshr/followers",
        "following_url": "https://api.github.com/users/zshshr/following{/other_user}",
        "gists_url": "https://api.github.com/users/zshshr/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/zshshr/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/zshshr/subscriptions",
        "organizations_url": "https://api.github.com/users/zshshr/orgs",
        "repos_url": "https://api.github.com/users/zshshr/repos",
        "events_url": "https://api.github.com/users/zshshr/events{/privacy}",
        "received_events_url": "https://api.github.com/users/zshshr/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-23T03:50:04Z",
      "updated_at": "2016-11-23T03:50:04Z",
      "body": "0.8.0+ 新版本应该解决了这个问题 "
    }
  ],
  "created_at": "2016-08-22T05:52:12Z",
  "updated_at": "2016-11-23T03:50:04Z",
  "closed_at": "2016-11-23T03:50:04Z",
  "body": "扩展百度地图搜索module的时候jscallback返回前台时程序飞掉，错误日志如下：\n\n```\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65] JNI DETECTED ERROR IN APPLICATION: input is not valid Modified UTF-8: illegal continuation byte 0\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]     string: '{\"result\":\"[{\\\"address\\\":\\\"秦淮区永乐路31号\\\",\\\"distance\\\":3935.0544479648124,\\\"name\\\":\\\"乐乐休闲网络\\\"},{\\\"address\\\":\\\"奥体大街169号环宇融侨广场2楼(手扶电梯上2楼右手即是)\\\",\\\"distance\\\":4917.053329133048,\\\"name\\\":\\\"青春飞扬网咖\\\"},{\\\"address\\\":\\\"秦淮区马道街12号(近秦淮国税局)\\\",\\\"distance\\\":4173.691275325252,\\\"name\\\":\\\"中录时空洪英达网络会所\\\"},{\\\"address\\\":\\\"江宁区胜太西路168号(近河海大学)\\\",\\\"distance\\\":4522.0729308379905,\\\"name\\\":\\\"踏浪网咖(胜太西路店)\\\"},{\\\"address\\\":\\\"建邺区泰山路购好超市旁\\\",\\\"distance\\\":3863.3229367097547,\\\"name\\\":\\\"一网情深网吧\\\"},{\\\"address\\\":\\\"秦淮区江宁路24-1号(公交车站)\\\",\\\"distance\\\":4307.82353228293,\\\"name\\\":\\\"极度空间网络\\\"},{\\\"address\\\":\\\"长虹路439号\\\",\\\"distance\\\":2903.056849745199,\\\"name\\\":\\\"欣网e家网吧\\\"},{\\\"address\\\":\\\"秦淮区大石坝街93-1号2楼(公交车站)\\\",\\\"distance\\\":4749.391175387147,\\\"na\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]     in call to NewStringUTF\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]     from int com.taobao.weex.bridge.WXBridge.execJS(java.lang.String, java.lang.String, java.lang.String, com.taobao.weex.bridge.WXJSObject[])\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65] \"WeexJSBridgeThread\" prio=5 tid=17 Runnable\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]   | group=\"main\" sCount=0 dsCount=0 obj=0x12dafa50 self=0xab149550\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]   | sysTid=29762 nice=0 cgrp=default sched=0/0 handle=0xab149928\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]   | state=R schedstat=( 412242472 297124528 961 ) utm=32 stm=9 core=3 HZ=100\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]   | stack=0xe48ba000-0xe48bc000 stackSize=1036KB\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]   | held mutexes= \"mutator lock\"(shared held)\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]   native: #00 pc 000047e0  /system/lib/libbacktrace_libc++.so (_ZN13UnwindCurrent6UnwindEjP8ucontext+23)\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]   native: #01 pc 00002ff9  /system/lib/libbacktrace_libc++.so (_ZN9Backtrace6UnwindEjP8ucontext+8)\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]   native: #02 pc 00242fb1  /system/lib/libart.so (_ZN3art15DumpNativeStackERNSt3__113basic_ostreamIcNS0_11char_traitsIcEEEEiPKcPNS_6mirror9ArtMethodE+68)\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]   native: #03 pc 00227359  /system/lib/libart.so (_ZNK3art6Thread4DumpERNSt3__113basic_ostreamIcNS1_11char_traitsIcEEEE+144)\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]   native: #04 pc 000aff6b  /system/lib/libart.so (_ZN3artL8JniAbortEPKcS1_+582)\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]   native: #05 pc 000b06b1  /system/lib/libart.so (_ZN3art9JniAbortFEPKcS1_z+60)\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]   native: #06 pc 000b2b3b  /system/lib/libart.so (_ZN3art11ScopedCheck5CheckEbPKcz.constprop.129+882)\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]   native: #07 pc 000bb5b9  /system/lib/libart.so (_ZN3art8CheckJNI12NewStringUTFEP7_JNIEnvPKc+36)\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]   native: #08 pc 00021cbd  /data/app/com.alibaba.weex-1/lib/arm/libweexv8.so (???)\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]   native: #09 pc 00039990  /data/app/com.alibaba.weex-1/lib/arm/libweexv8.so (???)\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]   native: #10 pc 00000424   (???)\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]   at com.taobao.weex.bridge.WXBridge.execJS(Native method)\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]   at com.taobao.weex.bridge.WXBridgeManager.invokeExecJS(WXBridgeManager.java:858)\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]   at com.taobao.weex.bridge.WXBridgeManager.invokeCallJSBatch(WXBridgeManager.java:951)\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]   at com.taobao.weex.bridge.WXBridgeManager.handleMessage(WXBridgeManager.java:825)\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]   at android.os.Handler.dispatchMessage(Handler.java:98)\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]   at android.os.Looper.loop(Looper.java:135)\n08-22 13:47:24.274 29697-29762/com.alibaba.weex A/art: art/runtime/check_jni.cc:65]   at android.os.HandlerThread.run(HandlerThread.java:61)\n```\n\n又改了一下代码，好像不报了。代码大概是这样的\n\n```\npublic class BaiduSearchModule extends WXModule implements BDLocationListener,OnGetPoiSearchResultListener {\n\n    JSCallback jsCallback;\n\n    boolean firstOp = true;\n\n    @WXModuleAnno\n    public void searchByText(BaiduSearchOption searchOption, JSCallback jsCallback) {\n        ...\n        this.jsCallback = jsCallback;\n        if (firstOp == true) {\n            ...\n        }\n        ...\n    }\n\n\n    @Override\n    public void onGetPoiResult(PoiResult poiResult) {\n        ...\n        jsCallback.invoke(resultMap);\n\n    }\n}\n```\n\n改成这样\n\n```\npublic class BaiduSearchModule extends WXModule implements BDLocationListener,OnGetPoiSearchResultListener {\n\n    JSCallback jsCallback;\n\n    boolean firstOp = true;\n\n    @WXModuleAnno\n    public void searchByText(BaiduSearchOption searchOption, JSCallback jsCallback) {\n        ...\n        if (firstOp == true) {\n            ...\n            this.jsCallback = jsCallback;\n        }\n        ...\n    }\n\n\n    @Override\n    public void onGetPoiResult(PoiResult poiResult) {\n        ...\n        jsCallback.invoke(resultMap);\n\n    }\n}\n\n```\n\n成员变量中有一个jsCallback，为了在回调方法中能够使用jsCallback。如果每次调用searchByText方法时，都给这个成员变量赋值，this.jsCallback = jsCallback，在多调用几次之后，就会出现我贴的出错。如果只在第一次调用module方法时候赋值，貌似就不再报错了，这是啥原因啊？\n",
  "closed_by": {
    "login": "zshshr",
    "id": 5382962,
    "avatar_url": "https://avatars2.githubusercontent.com/u/5382962?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zshshr",
    "html_url": "https://github.com/zshshr",
    "followers_url": "https://api.github.com/users/zshshr/followers",
    "following_url": "https://api.github.com/users/zshshr/following{/other_user}",
    "gists_url": "https://api.github.com/users/zshshr/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zshshr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zshshr/subscriptions",
    "organizations_url": "https://api.github.com/users/zshshr/orgs",
    "repos_url": "https://api.github.com/users/zshshr/repos",
    "events_url": "https://api.github.com/users/zshshr/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zshshr/received_events",
    "type": "User",
    "site_admin": false
  }
}
