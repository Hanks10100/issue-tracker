{
  "url": "https://api.github.com/repos/alibaba/weex/issues/1300",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/1300/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/1300/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/1300/events",
  "html_url": "https://github.com/alibaba/weex/issues/1300",
  "id": 178819160,
  "number": 1300,
  "title": "iOS 将js文件的zip包下载到本地沙盒，js文件依赖文件的路径出错。",
  "user": {
    "login": "HJ-StevenSun",
    "id": 20534672,
    "avatar_url": "https://avatars1.githubusercontent.com/u/20534672?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/HJ-StevenSun",
    "html_url": "https://github.com/HJ-StevenSun",
    "followers_url": "https://api.github.com/users/HJ-StevenSun/followers",
    "following_url": "https://api.github.com/users/HJ-StevenSun/following{/other_user}",
    "gists_url": "https://api.github.com/users/HJ-StevenSun/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/HJ-StevenSun/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/HJ-StevenSun/subscriptions",
    "organizations_url": "https://api.github.com/users/HJ-StevenSun/orgs",
    "repos_url": "https://api.github.com/users/HJ-StevenSun/repos",
    "events_url": "https://api.github.com/users/HJ-StevenSun/events{/privacy}",
    "received_events_url": "https://api.github.com/users/HJ-StevenSun/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": [
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/249240904",
      "html_url": "https://github.com/alibaba/weex/issues/1300#issuecomment-249240904",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1300",
      "id": 249240904,
      "user": {
        "login": "acton393",
        "id": 11631084,
        "avatar_url": "https://avatars1.githubusercontent.com/u/11631084?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/acton393",
        "html_url": "https://github.com/acton393",
        "followers_url": "https://api.github.com/users/acton393/followers",
        "following_url": "https://api.github.com/users/acton393/following{/other_user}",
        "gists_url": "https://api.github.com/users/acton393/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/acton393/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/acton393/subscriptions",
        "organizations_url": "https://api.github.com/users/acton393/orgs",
        "repos_url": "https://api.github.com/users/acton393/repos",
        "events_url": "https://api.github.com/users/acton393/events{/privacy}",
        "received_events_url": "https://api.github.com/users/acton393/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-09-23T16:36:27Z",
      "updated_at": "2016-09-23T16:36:27Z",
      "body": "你下载和解压的路径分别是哪里，可以提供一下看看\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/249801801",
      "html_url": "https://github.com/alibaba/weex/issues/1300#issuecomment-249801801",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1300",
      "id": 249801801,
      "user": {
        "login": "HJ-StevenSun",
        "id": 20534672,
        "avatar_url": "https://avatars1.githubusercontent.com/u/20534672?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/HJ-StevenSun",
        "html_url": "https://github.com/HJ-StevenSun",
        "followers_url": "https://api.github.com/users/HJ-StevenSun/followers",
        "following_url": "https://api.github.com/users/HJ-StevenSun/following{/other_user}",
        "gists_url": "https://api.github.com/users/HJ-StevenSun/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/HJ-StevenSun/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/HJ-StevenSun/subscriptions",
        "organizations_url": "https://api.github.com/users/HJ-StevenSun/orgs",
        "repos_url": "https://api.github.com/users/HJ-StevenSun/repos",
        "events_url": "https://api.github.com/users/HJ-StevenSun/events{/privacy}",
        "received_events_url": "https://api.github.com/users/HJ-StevenSun/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-09-27T08:36:03Z",
      "updated_at": "2016-09-27T08:36:03Z",
      "body": "@acton393  不好意思 今天才上线看到，  NSString *lib = [NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES)firstObject];\n    NSString \\* filepath=[lib stringByAppendingPathComponent:@\"yipt.zip\"];\n    [self.fileData writeToFile:filepath atomically:YES];\n    NSLog(@\"下载完毕------%@\",filepath);\n    [SSZipArchive unzipFileAtPath:filepath toDestination:lib];\n以上这是我下载解压的路径，以下是我传一个url\n NSString *lib = [NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES)firstObject];\nNewurl = [NSString stringWithFormat:@\"file://%@/yjpt/weex_jzd/index.js\",lib];\nself.url = [NSURL URLWithString:Newurl];\n这里再渲染\n[self render]\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/249802923",
      "html_url": "https://github.com/alibaba/weex/issues/1300#issuecomment-249802923",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1300",
      "id": 249802923,
      "user": {
        "login": "HJ-StevenSun",
        "id": 20534672,
        "avatar_url": "https://avatars1.githubusercontent.com/u/20534672?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/HJ-StevenSun",
        "html_url": "https://github.com/HJ-StevenSun",
        "followers_url": "https://api.github.com/users/HJ-StevenSun/followers",
        "following_url": "https://api.github.com/users/HJ-StevenSun/following{/other_user}",
        "gists_url": "https://api.github.com/users/HJ-StevenSun/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/HJ-StevenSun/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/HJ-StevenSun/subscriptions",
        "organizations_url": "https://api.github.com/users/HJ-StevenSun/orgs",
        "repos_url": "https://api.github.com/users/HJ-StevenSun/repos",
        "events_url": "https://api.github.com/users/HJ-StevenSun/events{/privacy}",
        "received_events_url": "https://api.github.com/users/HJ-StevenSun/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-09-27T08:41:00Z",
      "updated_at": "2016-09-27T08:41:00Z",
      "body": "@acton393  我如果把目录换成 NSString *path1 = [NSBundle mainBundle].bundlePath; 这个工程目录 就出现了 下面那张图 能够显示的情况，但是 当我将zip包解压到工程目录下  这里 是个临时文件不能我永久操作保存文件的\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/249809448",
      "html_url": "https://github.com/alibaba/weex/issues/1300#issuecomment-249809448",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1300",
      "id": 249809448,
      "user": {
        "login": "acton393",
        "id": 11631084,
        "avatar_url": "https://avatars1.githubusercontent.com/u/11631084?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/acton393",
        "html_url": "https://github.com/acton393",
        "followers_url": "https://api.github.com/users/acton393/followers",
        "following_url": "https://api.github.com/users/acton393/following{/other_user}",
        "gists_url": "https://api.github.com/users/acton393/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/acton393/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/acton393/subscriptions",
        "organizations_url": "https://api.github.com/users/acton393/orgs",
        "repos_url": "https://api.github.com/users/acton393/repos",
        "events_url": "https://api.github.com/users/acton393/events{/privacy}",
        "received_events_url": "https://api.github.com/users/acton393/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-09-27T09:09:26Z",
      "updated_at": "2016-09-27T09:09:26Z",
      "body": "hi @HJ-StevenSun  感觉是路径的问题， \n\n```\nNewurl = [NSString stringWithFormat:@\"file://%@/yjpt/weex_jzd/index.js\",lib];\nself.url = [NSURL URLWithString:Newurl];\n```\n\n这个地方建议你打印check 一下你构建出来的url， 看下你的url能不能准确映射到你的解压的下载文件上，有可能是你拼的路径跟你的解压目录没对上~\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/250051075",
      "html_url": "https://github.com/alibaba/weex/issues/1300#issuecomment-250051075",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1300",
      "id": 250051075,
      "user": {
        "login": "HJ-StevenSun",
        "id": 20534672,
        "avatar_url": "https://avatars1.githubusercontent.com/u/20534672?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/HJ-StevenSun",
        "html_url": "https://github.com/HJ-StevenSun",
        "followers_url": "https://api.github.com/users/HJ-StevenSun/followers",
        "following_url": "https://api.github.com/users/HJ-StevenSun/following{/other_user}",
        "gists_url": "https://api.github.com/users/HJ-StevenSun/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/HJ-StevenSun/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/HJ-StevenSun/subscriptions",
        "organizations_url": "https://api.github.com/users/HJ-StevenSun/orgs",
        "repos_url": "https://api.github.com/users/HJ-StevenSun/repos",
        "events_url": "https://api.github.com/users/HJ-StevenSun/events{/privacy}",
        "received_events_url": "https://api.github.com/users/HJ-StevenSun/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-09-28T01:52:48Z",
      "updated_at": "2016-09-28T02:15:07Z",
      "body": "@acton393 你好， 我已经放弃了将解压文件放入工程目录的方式，因为那是一个工程目录在更新Xcode8以后文件不能放进去了，并且还是临时文件。\n下面 我按照你的方式进行了check 打印的结果如下\n`2016-09-28 09:36:45.538 WeexDemo[1395:769382] 下载完毕------/var/mobile/Containers/Data/Application/86C40194-AA5A-4742-95A6-CAE966D71A54/Library/yipt.zip\n2016-09-28 09:36:48.008 WeexDemo[1395:769382] \u001b[fg100,149,237; <Weex>[info]WXSDKInstance.m:73, Render URL: file:///var/mobile/Containers/Data/Application/86C40194-AA5A-4742-95A6-CAE966D71A54/Library/yjpt/weex_jzd/index.js?random=1869516886 \u001b[;\n2016-09-28 09:36:48.048 WeexDemo[1395:769429] \u001b[fg255,165,0; <Weex>[warn]WXJSCoreBridge.m:68, jsLog: [JS Framework] \"exports.methods.ready\" is deprecated, please use \"exports.created\" instead  \u001b[;\n2016-09-28 09:36:48.065 WeexDemo[1395:769382] \u001b[fg100,149,237; <Weex>[info]WXSDKInstance.m:73, Render URL: http://var/yjpt/weex_jzd/main.js?random=362385842 \u001b[;`\n\n其中 `2016-09-28 09:36:48.008 WeexDemo[1395:769382] \u001b[fg100,149,237; <Weex>[info]WXSDKInstance.m:73, Render URL: file:///var/mobile/Containers/Data/Application/86C40194-AA5A-4742-95A6-CAE966D71A54/Library/yjpt/weex_jzd/index.js?random=1869516886 \u001b[;`这里是我获取js 文件的路径 也是我传给instance 的路径。\n\n在下方打印的 `2016-09-28 09:36:48.065 WeexDemo[1395:769382] \u001b[fg100,149,237; <Weex>[info]WXSDKInstance.m:73, Render URL: http://var/yjpt/weex_jzd/main.js?random=362385842 \u001b[;`\n我相信这是映射进去的路径，可以和我讲一下 bundleurl 获取路径的方式吗， 我传入的是一个绝对路径，但是在这里， _instance 的路径好像 变成了 相对路径  把我中间的那一节全给截掉了。\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/250064357",
      "html_url": "https://github.com/alibaba/weex/issues/1300#issuecomment-250064357",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1300",
      "id": 250064357,
      "user": {
        "login": "HJ-StevenSun",
        "id": 20534672,
        "avatar_url": "https://avatars1.githubusercontent.com/u/20534672?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/HJ-StevenSun",
        "html_url": "https://github.com/HJ-StevenSun",
        "followers_url": "https://api.github.com/users/HJ-StevenSun/followers",
        "following_url": "https://api.github.com/users/HJ-StevenSun/following{/other_user}",
        "gists_url": "https://api.github.com/users/HJ-StevenSun/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/HJ-StevenSun/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/HJ-StevenSun/subscriptions",
        "organizations_url": "https://api.github.com/users/HJ-StevenSun/orgs",
        "repos_url": "https://api.github.com/users/HJ-StevenSun/repos",
        "events_url": "https://api.github.com/users/HJ-StevenSun/events{/privacy}",
        "received_events_url": "https://api.github.com/users/HJ-StevenSun/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-09-28T03:44:01Z",
      "updated_at": "2016-09-28T03:44:01Z",
      "body": "@acton393  现在 最主要的问题是 不知道这个路径是如何映射的 js 那边是从config 方法 获取的一个bundleurl, 这个 bundleurl 是如何 传递到js 那边的？\n"
    }
  ],
  "created_at": "2016-09-23T08:47:40Z",
  "updated_at": "2016-09-29T06:39:54Z",
  "closed_at": "2016-09-29T06:39:54Z",
  "body": "我在iOS 端将js的zip包下载到沙盒中 然后解压到沙盒中， 我将js的文件路径传给 url \n`Newurl = [NSString stringWithFormat:@\"file://%@/yjpt/weex_jzd/index.js\",path1];   \nself.url = [NSURL URLWithString:Newurl];`\n\n文件显示 无网络访问 一下是截图\n![image_name](http://upload-images.jianshu.io/upload_images/1767435-e5933cd17504c577.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\n我将文件解压到 [NSBundle MainBundle].resourse 目录下的时候界面能够显示出来\n![image_name](http://upload-images.jianshu.io/upload_images/1767435-b15f53bd98bc65c6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n可是 问题是 我将文件解压到 工程目录下的时候是无法 持久保存的，下次登录的时候文件以及被清理掉了\n\n这样子我 该如何解决，难道目前就只有我一个人在做这种模式吗？\n"
}
