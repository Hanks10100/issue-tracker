{
  "url": "https://api.github.com/repos/alibaba/weex/issues/1181",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/1181/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/1181/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/1181/events",
  "html_url": "https://github.com/alibaba/weex/issues/1181",
  "id": 175910839,
  "number": 1181,
  "title": "list控件bug",
  "user": {
    "login": "xyduane",
    "id": 3953237,
    "avatar_url": "https://avatars0.githubusercontent.com/u/3953237?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/xyduane",
    "html_url": "https://github.com/xyduane",
    "followers_url": "https://api.github.com/users/xyduane/followers",
    "following_url": "https://api.github.com/users/xyduane/following{/other_user}",
    "gists_url": "https://api.github.com/users/xyduane/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/xyduane/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/xyduane/subscriptions",
    "organizations_url": "https://api.github.com/users/xyduane/orgs",
    "repos_url": "https://api.github.com/users/xyduane/repos",
    "events_url": "https://api.github.com/users/xyduane/events{/privacy}",
    "received_events_url": "https://api.github.com/users/xyduane/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "alext1981",
    "id": 8254442,
    "avatar_url": "https://avatars0.githubusercontent.com/u/8254442?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alext1981",
    "html_url": "https://github.com/alext1981",
    "followers_url": "https://api.github.com/users/alext1981/followers",
    "following_url": "https://api.github.com/users/alext1981/following{/other_user}",
    "gists_url": "https://api.github.com/users/alext1981/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alext1981/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alext1981/subscriptions",
    "organizations_url": "https://api.github.com/users/alext1981/orgs",
    "repos_url": "https://api.github.com/users/alext1981/repos",
    "events_url": "https://api.github.com/users/alext1981/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alext1981/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "alext1981",
      "id": 8254442,
      "avatar_url": "https://avatars0.githubusercontent.com/u/8254442?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alext1981",
      "html_url": "https://github.com/alext1981",
      "followers_url": "https://api.github.com/users/alext1981/followers",
      "following_url": "https://api.github.com/users/alext1981/following{/other_user}",
      "gists_url": "https://api.github.com/users/alext1981/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alext1981/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alext1981/subscriptions",
      "organizations_url": "https://api.github.com/users/alext1981/orgs",
      "repos_url": "https://api.github.com/users/alext1981/repos",
      "events_url": "https://api.github.com/users/alext1981/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alext1981/received_events",
      "type": "User",
      "site_admin": false
    },
    {
      "login": "kfeagle",
      "id": 11485145,
      "avatar_url": "https://avatars0.githubusercontent.com/u/11485145?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kfeagle",
      "html_url": "https://github.com/kfeagle",
      "followers_url": "https://api.github.com/users/kfeagle/followers",
      "following_url": "https://api.github.com/users/kfeagle/following{/other_user}",
      "gists_url": "https://api.github.com/users/kfeagle/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kfeagle/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kfeagle/subscriptions",
      "organizations_url": "https://api.github.com/users/kfeagle/orgs",
      "repos_url": "https://api.github.com/users/kfeagle/repos",
      "events_url": "https://api.github.com/users/kfeagle/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kfeagle/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": [
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/245802429",
      "html_url": "https://github.com/alibaba/weex/issues/1181#issuecomment-245802429",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1181",
      "id": 245802429,
      "user": {
        "login": "luics",
        "id": 1018815,
        "avatar_url": "https://avatars0.githubusercontent.com/u/1018815?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luics",
        "html_url": "https://github.com/luics",
        "followers_url": "https://api.github.com/users/luics/followers",
        "following_url": "https://api.github.com/users/luics/following{/other_user}",
        "gists_url": "https://api.github.com/users/luics/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/luics/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/luics/subscriptions",
        "organizations_url": "https://api.github.com/users/luics/orgs",
        "repos_url": "https://api.github.com/users/luics/repos",
        "events_url": "https://api.github.com/users/luics/events{/privacy}",
        "received_events_url": "https://api.github.com/users/luics/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-09-09T02:37:59Z",
      "updated_at": "2016-09-09T02:37:59Z",
      "body": "提供一个复现问题的最小 demo\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/245814032",
      "html_url": "https://github.com/alibaba/weex/issues/1181#issuecomment-245814032",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1181",
      "id": 245814032,
      "user": {
        "login": "xyduane",
        "id": 3953237,
        "avatar_url": "https://avatars0.githubusercontent.com/u/3953237?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xyduane",
        "html_url": "https://github.com/xyduane",
        "followers_url": "https://api.github.com/users/xyduane/followers",
        "following_url": "https://api.github.com/users/xyduane/following{/other_user}",
        "gists_url": "https://api.github.com/users/xyduane/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/xyduane/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/xyduane/subscriptions",
        "organizations_url": "https://api.github.com/users/xyduane/orgs",
        "repos_url": "https://api.github.com/users/xyduane/repos",
        "events_url": "https://api.github.com/users/xyduane/events{/privacy}",
        "received_events_url": "https://api.github.com/users/xyduane/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-09-09T04:06:25Z",
      "updated_at": "2016-09-09T04:06:25Z",
      "body": "代码贴上来乱了，看下截图\n![image](https://cloud.githubusercontent.com/assets/3953237/18375101/8563bf78-7685-11e6-86a1-ef84d556ab5c.png)\n\nWXDemoViewController.m 改了2个地方，以免重复显示navigationBar\n![image](https://cloud.githubusercontent.com/assets/3953237/18375118/bba1daac-7685-11e6-84ec-afe296ab97a7.png)\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/246084005",
      "html_url": "https://github.com/alibaba/weex/issues/1181#issuecomment-246084005",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1181",
      "id": 246084005,
      "user": {
        "login": "cxfeng1",
        "id": 1625893,
        "avatar_url": "https://avatars2.githubusercontent.com/u/1625893?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/cxfeng1",
        "html_url": "https://github.com/cxfeng1",
        "followers_url": "https://api.github.com/users/cxfeng1/followers",
        "following_url": "https://api.github.com/users/cxfeng1/following{/other_user}",
        "gists_url": "https://api.github.com/users/cxfeng1/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/cxfeng1/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/cxfeng1/subscriptions",
        "organizations_url": "https://api.github.com/users/cxfeng1/orgs",
        "repos_url": "https://api.github.com/users/cxfeng1/repos",
        "events_url": "https://api.github.com/users/cxfeng1/events{/privacy}",
        "received_events_url": "https://api.github.com/users/cxfeng1/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-09-10T02:51:16Z",
      "updated_at": "2016-09-10T02:51:16Z",
      "body": "@xyduane 麻烦提供一下代码， 可以删减一些内部逻辑再传上来\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/247820635",
      "html_url": "https://github.com/alibaba/weex/issues/1181#issuecomment-247820635",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1181",
      "id": 247820635,
      "user": {
        "login": "kfeagle",
        "id": 11485145,
        "avatar_url": "https://avatars0.githubusercontent.com/u/11485145?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kfeagle",
        "html_url": "https://github.com/kfeagle",
        "followers_url": "https://api.github.com/users/kfeagle/followers",
        "following_url": "https://api.github.com/users/kfeagle/following{/other_user}",
        "gists_url": "https://api.github.com/users/kfeagle/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/kfeagle/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/kfeagle/subscriptions",
        "organizations_url": "https://api.github.com/users/kfeagle/orgs",
        "repos_url": "https://api.github.com/users/kfeagle/repos",
        "events_url": "https://api.github.com/users/kfeagle/events{/privacy}",
        "received_events_url": "https://api.github.com/users/kfeagle/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-09-18T02:34:26Z",
      "updated_at": "2016-09-18T03:00:26Z",
      "body": "## 解决方案\n\n@xyduane 我这边创建了一个类似的例子，复现了你的遇到的现象，类似的现象会在首页出现，基本上每个系统版本都会有\n这个现象出现的原因是：设置navigationBarHidden=YES和_weexHeight = self.view.frame.size.height - 0 等设置;表明这个viewcontroller不再采用系统自动布局，而系统布局属性 automaticallyAdjustsScrollViewInsets 默认值是YES\n\n你需要在\n- (void)viewDidLoad这个函数添加一句\n\n``` javascript\nself.automaticallyAdjustsScrollViewInsets = NO;\n```\n\n你的代码我修改如下所示(native)，你可以试试效果，看看是否解决你遇到的情况：\n\n``` javascript\n- (void)viewDidLoad\n{\n    [super viewDidLoad];\n\n\n    [self setupNaviBar];\n    [self setupRightBarItem];\n    self.view.backgroundColor = [UIColor whiteColor];\n    self.automaticallyAdjustsScrollViewInsets = NO;  //kfeagle添加的代码\n    _weexHeight = self.view.frame.size.height - 0; //从65改为0\n\n    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(notificationRefreshInstance:) name:@\"RefreshInstance\" object:nil];\n\n    [self render];\n}\n```\n\n## demo\n\n我的demo代码(数据可以忽略)：\n\n``` javascript\n\n<template>\n    <wxc-navpage data-role = \"none\" height={{navBarHeight}} title={{title}} background-color=\"#7777EA\" title-color=\"white\" left-item-title=\"\" left-item-color=\"white\" right-item-src=\"\">\n    <list class=\"list\" loadmoreoffset=2000>\n        <header class=\"header\">\n            <div class=\"col col-first\"><text class=\"header-text\">基金名称</text></div>\n            <div class=\"col\"><text class=\"header-text\">单位净值</text></div>\n            <div class=\"col\"><text class=\"header-text\">日涨跌幅</text></div>\n            <div class=\"col\"><text class=\"header-text\">操作</text></div>\n        </header>\n        <cell class=\"cell\" repeat=\"{{fndlist}}\" append=\"tree\">\n            <div class=\"col col-first\"><text class=\"cell-text cell-first\">测试{{year}}</text><text class=\"cell-date\"></text><text class=\"cell-date\">{{navdate}}</text></div>\n            <div class=\"col\"><text class=\"cell-text\">{{rating.average}}</text></div>\n            <div class=\"col\"><text class=\"cell-text\">{{rating.stars}}%</text></div>\n            <div class=\"col\" if=\"true\">\n                <wxc-button type=\"default\" size=\"small\" value=\"申购\" style=\"width: 120px;border-color: #26a4f4;font-color: #26a4f4;border-width: 2px\"></wxc-button>\n\n            </div>\n            <div class=\"col\" if=\"false\">\n                <text class=\"button-grey\" style=\"\">--</text>\n            </div>\n\n        </cell>\n    </list>\n    </wxc-navpage>>\n</template>\n\n\n<style>\n    .header {\n        flex-direction:row;\n        height: 180px;\n        width: 750px;\n        color:#45b5f0;\n        background-color:#7AF0AF;\n    }\n    .cell {\n        width: 750px;\n        height: 180px;\n        flex-direction:row;\n        border-bottom-width: 2px;\n        border-bottom-color: #c0c0c0;\n    }\n    .col-first\n    {\n        justify-content: center;\n        /*border-bottom-width: 2px;*/\n        /*border-bottom-color: #c0c0c0;*/\n        flex-direction:row;\n        height: 180px;\n        width:200px;\n        padding:20px;\n    }\n    .col {\n        justify-content: center;\n        /*border-bottom-width: 2px;*/\n        /*border-bottom-color: #c0c0c0;*/\n        flex-direction:row;\n        width:180px;\n        height: 180px;\n        padding:20px;\n    }\n</style>\n<script>\n    require('weex-components');\n    module.exports = {\n        ready: function () {\n            this.getMovieList();\n        },\n        methods: {\n\n            getMovieList: function(e) {\n                var self = this\n                var stream = require('@weex-module/stream')\n                var modal = require('@weex-module/modal')\n//        var GET_URL = 'http://httpbin.org/get'\n                var GET_URL = 'https://api.douban.com/v2/movie/in_theaters'\n                stream.fetch({\n                    method: 'GET',\n                    url: GET_URL,\n//          headers:{\"Access-Control-Allow-Origin\":\"*\"},\n                    type: 'jsonp'\n                }, function (ret) {\n                    if (typeof ret == 'string') {\n                        ret = JSON.parse(ret)\n                    }\n                    if (!ret.ok) {\n                        modal.alert({\n                            message: '网络通信失败，请确认网络状况',\n                            okTitle: '好'\n                        })\n                    } else {\n                        if (typeof ret.data == 'string') {\n                            ret.data = JSON.parse(ret.data)\n                        }\n                        self.fndlist = ret.data.subjects;\n                    }\n                }, function (response) {\n                    console.log('get in progress:'+response.length);\n                    self.txtOutput = \"bytes received:\"+response.length;\n                })\n            }\n        },\n\n        data: {\n            navBarHeight:115,\n            title:'基金列表',\n            fndlist:[\n            ]\n        }\n    }\n\n</script>\n\n```\n\ndemo截图\n\n![demo](https://raw.githubusercontent.com/kfeagle/firstdemo/master/issue1181.jpg)\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/252806082",
      "html_url": "https://github.com/alibaba/weex/issues/1181#issuecomment-252806082",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1181",
      "id": 252806082,
      "user": {
        "login": "alext1981",
        "id": 8254442,
        "avatar_url": "https://avatars0.githubusercontent.com/u/8254442?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alext1981",
        "html_url": "https://github.com/alext1981",
        "followers_url": "https://api.github.com/users/alext1981/followers",
        "following_url": "https://api.github.com/users/alext1981/following{/other_user}",
        "gists_url": "https://api.github.com/users/alext1981/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/alext1981/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/alext1981/subscriptions",
        "organizations_url": "https://api.github.com/users/alext1981/orgs",
        "repos_url": "https://api.github.com/users/alext1981/repos",
        "events_url": "https://api.github.com/users/alext1981/events{/privacy}",
        "received_events_url": "https://api.github.com/users/alext1981/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-10-11T04:03:27Z",
      "updated_at": "2016-10-11T04:03:27Z",
      "body": "This issue is resolved. If this solution could not solve your problem, you could add more information and reopen this issue again, @xyduane , thanks!\n"
    }
  ],
  "created_at": "2016-09-09T02:16:26Z",
  "updated_at": "2016-10-11T04:03:27Z",
  "closed_at": "2016-10-11T04:03:27Z",
  "body": "如截图所示，list标签，在ISO 9.3系统下，返回桌面然后进入APP，会出现空白条\n开始页面：\n![image](https://cloud.githubusercontent.com/assets/3953237/18373411/682c3f0c-7676-11e6-9bf6-29494c826d07.png)\n返回桌面再次进入APP：\n![image](https://cloud.githubusercontent.com/assets/3953237/18373404/5b063fda-7676-11e6-841d-775fbf3e5b81.png)\n",
  "closed_by": {
    "login": "alext1981",
    "id": 8254442,
    "avatar_url": "https://avatars0.githubusercontent.com/u/8254442?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/alext1981",
    "html_url": "https://github.com/alext1981",
    "followers_url": "https://api.github.com/users/alext1981/followers",
    "following_url": "https://api.github.com/users/alext1981/following{/other_user}",
    "gists_url": "https://api.github.com/users/alext1981/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/alext1981/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/alext1981/subscriptions",
    "organizations_url": "https://api.github.com/users/alext1981/orgs",
    "repos_url": "https://api.github.com/users/alext1981/repos",
    "events_url": "https://api.github.com/users/alext1981/events{/privacy}",
    "received_events_url": "https://api.github.com/users/alext1981/received_events",
    "type": "User",
    "site_admin": false
  }
}
