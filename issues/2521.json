{
  "url": "https://api.github.com/repos/alibaba/weex/issues/2521",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/2521/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/2521/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/2521/events",
  "html_url": "https://github.com/alibaba/weex/issues/2521",
  "id": 206985881,
  "number": 2521,
  "title": "[Android]崩溃性bug：WXRecyclerView造成app强制关闭。",
  "user": {
    "login": "HomHomLin",
    "id": 8758713,
    "avatar_url": "https://avatars1.githubusercontent.com/u/8758713?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/HomHomLin",
    "html_url": "https://github.com/HomHomLin",
    "followers_url": "https://api.github.com/users/HomHomLin/followers",
    "following_url": "https://api.github.com/users/HomHomLin/following{/other_user}",
    "gists_url": "https://api.github.com/users/HomHomLin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/HomHomLin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/HomHomLin/subscriptions",
    "organizations_url": "https://api.github.com/users/HomHomLin/orgs",
    "repos_url": "https://api.github.com/users/HomHomLin/repos",
    "events_url": "https://api.github.com/users/HomHomLin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/HomHomLin/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": [],
  "created_at": "2017-02-11T15:14:59Z",
  "updated_at": "2017-02-12T06:12:13Z",
  "closed_at": "2017-02-12T06:12:13Z",
  "body": "我们将weex加入项目后，WXRecyclerView组件有一定几率崩溃，造成app直接FC。\r\n\r\n开始以为是接入后问题，但是demo内的list（basic）也会产生相同的crash。\r\n\r\n* WEEX代码分支：\r\n\r\nbranch（dev）\r\n\r\n* 几率：\r\n\r\n20%，非必现，但是有概率，10次会出现2-3次。\r\n\r\n* 复现方式：\r\n\r\n在list（basic）不停的来回下拉刷新和上拉加载更多，频繁的重复该操作。\r\n\r\n* Log：\r\n\r\nLog为接入我们项目的log，weex官方demo也会有此crash，log内的weex-recyclerview TAG是我加的，我只粘贴主要的crash log，代码方面因为我加入了很多LOG调试，所以行数可能并不准确，但不影响具体方法的定位。\r\n\r\n主要应该是position=32那个地方的holder id 导致的错误。\r\n\r\n```java\r\n02-11 22:51:25.730 9207-9207/com.androidcomponentmain D/weex-recyclerview: viewtype:472,position:31\r\n02-11 22:51:25.730 9207-9207/com.androidcomponentmain E/BasicListComponent: Cannot find request viewType: 472\r\n02-11 22:51:25.731 9207-9207/com.androidcomponentmain D/weex-recyclerview: viewtype:462,position:32\r\n02-11 22:51:25.731 9207-9207/com.androidcomponentmain D/BasicListComponent: Bind WXRefresh & WXLoading ViewHolder{1d700d03 position=32 id=-1, oldPos=-1, pLpos:-1 no parent}\r\n02-11 22:51:25.732 9207-9207/com.androidcomponentmain D/AndroidRuntime: Shutting down VM\r\n02-11 22:51:25.746 9207-9276/com.androidcomponentmain D/updateDomObj: time:0\r\n02-11 22:51:25.767 9207-9275/com.androidcomponentmain D/weex: callJS >>>> instanceId:function:setTimeoutCallback tasks:[{\"data\":\"46\",\"type\":2}]\r\n02-11 22:51:25.768 9207-9207/com.androidcomponentmain E/AndroidRuntime: FATAL EXCEPTION: main\r\n                                                                                Process: com.androidcomponentmain, PID: 9207\r\n                                                                                java.lang.IllegalStateException: Added View has RecyclerView as parent but view is not a real child. Unfiltered index:0\r\n                                                                                    at android.support.v7.widget.RecyclerView$LayoutManager.addViewInt(RecyclerView.java:7109)\r\n                                                                                    at android.support.v7.widget.RecyclerView$LayoutManager.addView(RecyclerView.java:7073)\r\n                                                                                    at android.support.v7.widget.RecyclerView$LayoutManager.addView(RecyclerView.java:7061)\r\n                                                                                    at android.support.v7.widget.LinearLayoutManager.layoutChunk(LinearLayoutManager.java:1428)\r\n                                                                                    at android.support.v7.widget.LinearLayoutManager.fill(LinearLayoutManager.java:1377)\r\n                                                                                    at android.support.v7.widget.LinearLayoutManager.onLayoutChildren(LinearLayoutManager.java:578)\r\n                                                                                    at com.taobao.weex.ui.view.listview.WXRecyclerView$1.onLayoutChildren(WXRecyclerView.java:298)\r\n                                                                                    at android.support.v7.widget.RecyclerView.dispatchLayoutStep2(RecyclerView.java:3315)\r\n                                                                                    at android.support.v7.widget.RecyclerView.dispatchLayout(RecyclerView.java:3124)\r\n                                                                                    at android.support.v7.widget.RecyclerView.onLayout(RecyclerView.java:3568)\r\n                                                                                    at android.view.View.layout(View.java:15724)\r\n                                                                                    at android.view.ViewGroup.layout(ViewGroup.java:5048)\r\n                                                                                    at android.widget.FrameLayout.layoutChildren(FrameLayout.java:579)\r\n                                                                                    at android.widget.FrameLayout.onLayout(FrameLayout.java:514)\r\n                                                                                    at android.view.View.layout(View.java:15724)\r\n                                                                                    at android.view.ViewGroup.layout(ViewGroup.java:5048)\r\n                                                                                    at android.widget.FrameLayout.layoutChildren(FrameLayout.java:579)\r\n                                                                                    at android.widget.FrameLayout.onLayout(FrameLayout.java:514)\r\n                                                                                    at android.view.View.layout(View.java:15724)\r\n                                                                                    at android.view.ViewGroup.layout(ViewGroup.java:5048)\r\n                                                                                    at android.widget.FrameLayout.layoutChildren(FrameLayout.java:579)\r\n                                                                                    at android.widget.FrameLayout.onLayout(FrameLayout.java:514)\r\n                                                                                    at android.view.View.layout(View.java:15724)\r\n                                                                                    at android.view.ViewGroup.layout(ViewGroup.java:5048)\r\n                                                                                    at android.widget.FrameLayout.layoutChildren(FrameLayout.java:579)\r\n                                                                                    at android.widget.FrameLayout.onLayout(FrameLayout.java:514)\r\n                                                                                    at android.view.View.layout(View.java:15724)\r\n                                                                                    at android.view.ViewGroup.layout(ViewGroup.java:5048)\r\n                                                                                    at android.widget.FrameLayout.layoutChildren(FrameLayout.java:579)\r\n                                                                                    at android.widget.FrameLayout.onLayout(FrameLayout.java:514)\r\n                                                                                    at android.view.View.layout(View.java:15724)\r\n                                                                                    at android.view.ViewGroup.layout(ViewGroup.java:5048)\r\n                                                                                    at android.widget.FrameLayout.layoutChildren(FrameLayout.java:579)\r\n                                                                                    at android.widget.FrameLayout.onLayout(FrameLayout.java:514)\r\n                                                                                    at android.view.View.layout(View.java:15724)\r\n                                                                                    at android.view.ViewGroup.layout(ViewGroup.java:5048)\r\n                                                                                    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1703)\r\n                                                                                    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1557)\r\n                                                                                    at android.widget.LinearLayout.onLayout(LinearLayout.java:1466)\r\n                                                                                    at android.view.View.layout(View.java:15724)\r\n                                                                                    at android.view.ViewGroup.layout(ViewGroup.java:5048)\r\n                                                                                    at me.imid.swipebacklayout.lib.SwipeBackLayout.onLayout(SwipeBackLayout.java:396)\r\n                                                                                    at android.view.View.layout(View.java:15724)\r\n                                                                                    at android.view.ViewGroup.layout(ViewGroup.java:5048)\r\n                                                                                    at android.widget.FrameLayout.layoutChildren(FrameLayout.java:579)\r\n                                                                                    at android.widget.FrameLayout.onLayout(FrameLayout.java:514)\r\n                                                                                    at android.view.View.layout(View.java:15724)\r\n                                                                                    at android.view.ViewGroup.layout(ViewGroup.java:5048)\r\n                                                                                    at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:2168)\r\n                                                                                    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1925)\r\n                                                                                    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1084)\r\n                                                                                    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:6015)\r\n                                                                                    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:774)\r\n                                                                                    at android.view.Choreographer.doCallbacks(Choreographer.java:587)\r\n                                                                                    at android.view.Choreographer.doFrame(Choreographer.java:553)\r\n                                                                                    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:760)\r\n                                                                                    at android.os.Handler.handleCallback(Handler.java:739)\r\n                                                                                    at android.os.Handler.dispatchMessage(Handler.java:95)\r\n                                                                                    at android.os.Looper.loop(Looper.java:147)\r\n                                                                                    at android.app.ActivityThread.main(Activ\r\n```",
  "closed_by": {
    "login": "HomHomLin",
    "id": 8758713,
    "avatar_url": "https://avatars1.githubusercontent.com/u/8758713?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/HomHomLin",
    "html_url": "https://github.com/HomHomLin",
    "followers_url": "https://api.github.com/users/HomHomLin/followers",
    "following_url": "https://api.github.com/users/HomHomLin/following{/other_user}",
    "gists_url": "https://api.github.com/users/HomHomLin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/HomHomLin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/HomHomLin/subscriptions",
    "organizations_url": "https://api.github.com/users/HomHomLin/orgs",
    "repos_url": "https://api.github.com/users/HomHomLin/repos",
    "events_url": "https://api.github.com/users/HomHomLin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/HomHomLin/received_events",
    "type": "User",
    "site_admin": false
  }
}
