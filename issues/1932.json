{
  "url": "https://api.github.com/repos/alibaba/weex/issues/1932",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/1932/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/1932/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/1932/events",
  "html_url": "https://github.com/alibaba/weex/issues/1932",
  "id": 196264209,
  "number": 1932,
  "title": "swift集成问题",
  "user": {
    "login": "lycaste",
    "id": 4165754,
    "avatar_url": "https://avatars3.githubusercontent.com/u/4165754?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lycaste",
    "html_url": "https://github.com/lycaste",
    "followers_url": "https://api.github.com/users/lycaste/followers",
    "following_url": "https://api.github.com/users/lycaste/following{/other_user}",
    "gists_url": "https://api.github.com/users/lycaste/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lycaste/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lycaste/subscriptions",
    "organizations_url": "https://api.github.com/users/lycaste/orgs",
    "repos_url": "https://api.github.com/users/lycaste/repos",
    "events_url": "https://api.github.com/users/lycaste/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lycaste/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 339914709,
      "url": "https://api.github.com/repos/alibaba/weex/labels/help%20wanted",
      "name": "help wanted",
      "color": "159818",
      "default": true
    },
    {
      "id": 359381244,
      "url": "https://api.github.com/repos/alibaba/weex/labels/ios",
      "name": "ios",
      "color": "f9d0c4",
      "default": false
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": [
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/267880222",
      "html_url": "https://github.com/alibaba/weex/issues/1932#issuecomment-267880222",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1932",
      "id": 267880222,
      "user": {
        "login": "acton393",
        "id": 11631084,
        "avatar_url": "https://avatars1.githubusercontent.com/u/11631084?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/acton393",
        "html_url": "https://github.com/acton393",
        "followers_url": "https://api.github.com/users/acton393/followers",
        "following_url": "https://api.github.com/users/acton393/following{/other_user}",
        "gists_url": "https://api.github.com/users/acton393/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/acton393/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/acton393/subscriptions",
        "organizations_url": "https://api.github.com/users/acton393/orgs",
        "repos_url": "https://api.github.com/users/acton393/repos",
        "events_url": "https://api.github.com/users/acton393/events{/privacy}",
        "received_events_url": "https://api.github.com/users/acton393/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-12-19T04:35:22Z",
      "updated_at": "2016-12-19T04:35:22Z",
      "body": "hi @lycaste  我这边直接使用你的case到 [demo](https://github.com/acton393/WeexSwiftSample) 可以正常使用， 麻烦可以试下\r\n\r\n![image](https://cloud.githubusercontent.com/assets/11631084/21301309/695bead8-c5e7-11e6-8738-564b49d6d830.png)\r\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/267914913",
      "html_url": "https://github.com/alibaba/weex/issues/1932#issuecomment-267914913",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1932",
      "id": 267914913,
      "user": {
        "login": "lycaste",
        "id": 4165754,
        "avatar_url": "https://avatars3.githubusercontent.com/u/4165754?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lycaste",
        "html_url": "https://github.com/lycaste",
        "followers_url": "https://api.github.com/users/lycaste/followers",
        "following_url": "https://api.github.com/users/lycaste/following{/other_user}",
        "gists_url": "https://api.github.com/users/lycaste/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/lycaste/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/lycaste/subscriptions",
        "organizations_url": "https://api.github.com/users/lycaste/orgs",
        "repos_url": "https://api.github.com/users/lycaste/repos",
        "events_url": "https://api.github.com/users/lycaste/events{/privacy}",
        "received_events_url": "https://api.github.com/users/lycaste/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-12-19T09:06:56Z",
      "updated_at": "2016-12-19T09:06:56Z",
      "body": "@acton393 \r\n.swift文件内容都是一致的吗？\r\n如果是，那不应该啊，我是用cocoapds集成的，基本走的weex文档那一套。应该没什么问题啊，这种报错一般是哪里出问题了，一点头绪都没"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/267922647",
      "html_url": "https://github.com/alibaba/weex/issues/1932#issuecomment-267922647",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1932",
      "id": 267922647,
      "user": {
        "login": "lycaste",
        "id": 4165754,
        "avatar_url": "https://avatars3.githubusercontent.com/u/4165754?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lycaste",
        "html_url": "https://github.com/lycaste",
        "followers_url": "https://api.github.com/users/lycaste/followers",
        "following_url": "https://api.github.com/users/lycaste/following{/other_user}",
        "gists_url": "https://api.github.com/users/lycaste/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/lycaste/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/lycaste/subscriptions",
        "organizations_url": "https://api.github.com/users/lycaste/orgs",
        "repos_url": "https://api.github.com/users/lycaste/repos",
        "events_url": "https://api.github.com/users/lycaste/events{/privacy}",
        "received_events_url": "https://api.github.com/users/lycaste/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-12-19T09:46:51Z",
      "updated_at": "2016-12-19T09:46:51Z",
      "body": "用您的demo真机上成功了，但是在页面跳转的时候 有些奇怪的表现，就是会残留前面页面的东西，请问下这种奇怪的现象是什么导致的。"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/267956214",
      "html_url": "https://github.com/alibaba/weex/issues/1932#issuecomment-267956214",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1932",
      "id": 267956214,
      "user": {
        "login": "acton393",
        "id": 11631084,
        "avatar_url": "https://avatars1.githubusercontent.com/u/11631084?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/acton393",
        "html_url": "https://github.com/acton393",
        "followers_url": "https://api.github.com/users/acton393/followers",
        "following_url": "https://api.github.com/users/acton393/following{/other_user}",
        "gists_url": "https://api.github.com/users/acton393/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/acton393/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/acton393/subscriptions",
        "organizations_url": "https://api.github.com/users/acton393/orgs",
        "repos_url": "https://api.github.com/users/acton393/repos",
        "events_url": "https://api.github.com/users/acton393/events{/privacy}",
        "received_events_url": "https://api.github.com/users/acton393/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-12-19T12:46:38Z",
      "updated_at": "2016-12-19T12:46:38Z",
      "body": "@lycaste  可以给一下你的cocoaPods 集成的github 的地址，我看一下\r\n\r\n你说的残留的问题， 有可能是动画push 的动画导致的"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/268498279",
      "html_url": "https://github.com/alibaba/weex/issues/1932#issuecomment-268498279",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1932",
      "id": 268498279,
      "user": {
        "login": "lycaste",
        "id": 4165754,
        "avatar_url": "https://avatars3.githubusercontent.com/u/4165754?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lycaste",
        "html_url": "https://github.com/lycaste",
        "followers_url": "https://api.github.com/users/lycaste/followers",
        "following_url": "https://api.github.com/users/lycaste/following{/other_user}",
        "gists_url": "https://api.github.com/users/lycaste/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/lycaste/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/lycaste/subscriptions",
        "organizations_url": "https://api.github.com/users/lycaste/orgs",
        "repos_url": "https://api.github.com/users/lycaste/repos",
        "events_url": "https://api.github.com/users/lycaste/events{/privacy}",
        "received_events_url": "https://api.github.com/users/lycaste/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-12-21T11:17:06Z",
      "updated_at": "2016-12-21T11:17:06Z",
      "body": "@acton393 昨天有点忙，刚又试了下，把我的weex.js文件拷过去，依然会报错，难道是这个weex.js的写法有问题吗"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/268532132",
      "html_url": "https://github.com/alibaba/weex/issues/1932#issuecomment-268532132",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1932",
      "id": 268532132,
      "user": {
        "login": "lycaste",
        "id": 4165754,
        "avatar_url": "https://avatars3.githubusercontent.com/u/4165754?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lycaste",
        "html_url": "https://github.com/lycaste",
        "followers_url": "https://api.github.com/users/lycaste/followers",
        "following_url": "https://api.github.com/users/lycaste/following{/other_user}",
        "gists_url": "https://api.github.com/users/lycaste/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/lycaste/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/lycaste/subscriptions",
        "organizations_url": "https://api.github.com/users/lycaste/orgs",
        "repos_url": "https://api.github.com/users/lycaste/repos",
        "events_url": "https://api.github.com/users/lycaste/events{/privacy}",
        "received_events_url": "https://api.github.com/users/lycaste/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-12-21T14:13:14Z",
      "updated_at": "2016-12-21T14:13:14Z",
      "body": "http://alibaba.github.io/weex/cn/doc/how-to/transform-code-into-js-bundle.html  相关文档这里"
    }
  ],
  "created_at": "2016-12-18T08:16:22Z",
  "updated_at": "2016-12-21T14:13:14Z",
  "closed_at": "2016-12-21T14:13:14Z",
  "body": "\u001b[fg0,128,0; <Weex>[debug]WXJSCoreBridge.m:85, jsLog: [JS Framework] create an Weex@undefined instance from undefined  \u001b[;\r\n2016-12-18 15:49:59.247 codeTool[2082:18395] \u001b[fg0,128,0; <Weex>[debug]WXJSCoreBridge.m:85, jsLog: [JS Framework] Intialize an instance with:\r\n undefined  \u001b[;\r\n2016-12-18 15:49:59.307 codeTool[2082:18395] \u001b[fg255,0,0; <Weex>[error]WXMonitor.m:190, [main.js:2:1794] SyntaxError: Unexpected token '<'\r\nFunction@[native code]\r\nmain.js:3:1794\r\ninit@main.js:3:2252\r\ncreateInstance@main.js:2:27667\r\nmain.js:1:1781 \u001b[;\r\n\r\n终端报错如上：\r\nxcode版本：8.1\r\n模拟器：10.1\r\ncocodpods：1.1.1\r\n\r\n\r\njs文件：\r\n```\r\n<template>\r\n  <div class=\"ct\" style=\"height: {{ctHeight}}\">\r\n    <text style=\"font-size: 42;\">Hello Weex!</text>\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n  .ct {\r\n    width: 750;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .img {\r\n    margin-bottom: 20px;\r\n  }\r\n</style>\r\n\r\n<script>\r\n  module.exports = {\r\n    data: {\r\n      ctHeight: 800,\r\n      img: '//gw.alicdn.com/tps/i2/TB1DpsmMpXXXXabaXXX20ySQVXX-512-512.png_400x400.jpg'\r\n    },\r\n    ready: function () {\r\n      this.ctHeight = this.$getConfig().env.deviceHeight\r\n    }\r\n  }\r\n</script>\r\n```\r\nvc代码：\r\n```\r\n//\r\n//  weex.swift\r\n//  codeTool\r\n//\r\n//  Created by yh on 2016/12/18.\r\n//  Copyright © 2016年 yh. All rights reserved.\r\n//\r\n\r\nimport UIKit\r\nimport WeexSDK\r\n\r\nclass weex: UIViewController {\r\n\r\n    var instance:WXSDKInstance?;\r\n    var weexView = UIView()\r\n    var weexHeight:CGFloat?;\r\n    var top:CGFloat?;\r\n    var url:NSURL?;\r\n    \r\n    \r\n    override func viewDidLoad() {\r\n        super.viewDidLoad()\r\n        \r\n    \r\n        top = UIApplication.shared.statusBarFrame.maxY\r\n    \r\n        weexHeight = self.view.frame.size.height - top!;\r\n        render()\r\n        // Do any additional setup after loading the view.\r\n    }\r\n\r\n    override func didReceiveMemoryWarning() {\r\n        super.didReceiveMemoryWarning()\r\n        // Dispose of any resources that can be recreated.\r\n    }\r\n    \r\n    \r\n    deinit {\r\n        if instance != nil {\r\n            instance!.destroy()\r\n        }\r\n    }\r\n    \r\n    func render(){\r\n        if instance != nil {\r\n            instance!.destroy()\r\n        }\r\n        instance = WXSDKInstance();\r\n        instance!.viewController = self\r\n        let width = self.view.frame.size.width\r\n        instance!.frame = CGRect(x: self.view.frame.size.width-width, y: top!, width: width, height: weexHeight!)\r\n      \r\n        instance!.onCreate = {  [weak self] (view:UIView?)-> Void in\r\n            withExtendedLifetime(self) {\r\n                self!.weexView.removeFromSuperview()\r\n                self!.weexView = view!;\r\n                self!.view.addSubview(self!.weexView)\r\n                UIAccessibilityPostNotification(UIAccessibilityScreenChangedNotification, self!.weexView)\r\n            }\r\n        }\r\n        \r\n        instance!.onFailed = { (error: Error?)-> Void in\r\n            \r\n            print(\"faild at error: %@\", error!)\r\n        }\r\n        \r\n        instance!.renderFinish = { (view:UIView?)-> Void in\r\n            print(\"render finish\")\r\n        }\r\n        \r\n        instance!.updateFinish = { (view:UIView?)-> Void in\r\n            print(\"update finish\")\r\n        }\r\n        \r\n        let u = URL(string: String.init(format: \"file://%@/weex.js\", Bundle.main.bundlePath))\r\n        instance?.render(with: u)\r\n       \r\n    }\r\n\r\n}\r\n```\r\nappdeleagte代码\r\n```\r\n       WXAppConfiguration.setAppGroup(\"codeTool\")\r\n        WXAppConfiguration.setAppName(\"codeTool\")\r\n        WXAppConfiguration.setAppVersion(\"1.0.0\")\r\n        WXLog.setLogLevel(.all)\r\n        //init WeexSDK\r\n        WXSDKEngine.initSDKEnviroment()\r\n```"
}
