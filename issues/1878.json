{
  "url": "https://api.github.com/repos/alibaba/weex/issues/1878",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/1878/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/1878/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/1878/events",
  "html_url": "https://github.com/alibaba/weex/issues/1878",
  "id": 194953486,
  "number": 1878,
  "title": "Weex 组件高度计算的 BUG",
  "user": {
    "login": "jerrybendy",
    "id": 7897384,
    "avatar_url": "https://avatars1.githubusercontent.com/u/7897384?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jerrybendy",
    "html_url": "https://github.com/jerrybendy",
    "followers_url": "https://api.github.com/users/jerrybendy/followers",
    "following_url": "https://api.github.com/users/jerrybendy/following{/other_user}",
    "gists_url": "https://api.github.com/users/jerrybendy/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jerrybendy/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jerrybendy/subscriptions",
    "organizations_url": "https://api.github.com/users/jerrybendy/orgs",
    "repos_url": "https://api.github.com/users/jerrybendy/repos",
    "events_url": "https://api.github.com/users/jerrybendy/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jerrybendy/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": [
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/266439583",
      "html_url": "https://github.com/alibaba/weex/issues/1878#issuecomment-266439583",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1878",
      "id": 266439583,
      "user": {
        "login": "cxfeng1",
        "id": 1625893,
        "avatar_url": "https://avatars2.githubusercontent.com/u/1625893?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/cxfeng1",
        "html_url": "https://github.com/cxfeng1",
        "followers_url": "https://api.github.com/users/cxfeng1/followers",
        "following_url": "https://api.github.com/users/cxfeng1/following{/other_user}",
        "gists_url": "https://api.github.com/users/cxfeng1/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/cxfeng1/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/cxfeng1/subscriptions",
        "organizations_url": "https://api.github.com/users/cxfeng1/orgs",
        "repos_url": "https://api.github.com/users/cxfeng1/repos",
        "events_url": "https://api.github.com/users/cxfeng1/events{/privacy}",
        "received_events_url": "https://api.github.com/users/cxfeng1/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-12-12T14:09:01Z",
      "updated_at": "2016-12-12T14:09:01Z",
      "body": "@jerrybendy  这个是已知问题， 750px适配后像素四舍五入带来的精度丢失。 目前没有太好的办法， 一般是在背景色上做处理。\r\n\r\n后面会加入viewport的概念， 允许自定义用于适配的宽度，而非固定750， 如可以设置\"device-width\"，这样适配后的像素小数会相应减少， 这个问题会有所好转。"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/266604730",
      "html_url": "https://github.com/alibaba/weex/issues/1878#issuecomment-266604730",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1878",
      "id": 266604730,
      "user": {
        "login": "jerrybendy",
        "id": 7897384,
        "avatar_url": "https://avatars1.githubusercontent.com/u/7897384?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jerrybendy",
        "html_url": "https://github.com/jerrybendy",
        "followers_url": "https://api.github.com/users/jerrybendy/followers",
        "following_url": "https://api.github.com/users/jerrybendy/following{/other_user}",
        "gists_url": "https://api.github.com/users/jerrybendy/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jerrybendy/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jerrybendy/subscriptions",
        "organizations_url": "https://api.github.com/users/jerrybendy/orgs",
        "repos_url": "https://api.github.com/users/jerrybendy/repos",
        "events_url": "https://api.github.com/users/jerrybendy/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jerrybendy/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-12-13T01:09:05Z",
      "updated_at": "2016-12-13T01:09:05Z",
      "body": "是否可以把四舍五入的计算统一为向下取整或向上取整，不知这样能否避免一些计算上的误差"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/266634878",
      "html_url": "https://github.com/alibaba/weex/issues/1878#issuecomment-266634878",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1878",
      "id": 266634878,
      "user": {
        "login": "cxfeng1",
        "id": 1625893,
        "avatar_url": "https://avatars2.githubusercontent.com/u/1625893?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/cxfeng1",
        "html_url": "https://github.com/cxfeng1",
        "followers_url": "https://api.github.com/users/cxfeng1/followers",
        "following_url": "https://api.github.com/users/cxfeng1/following{/other_user}",
        "gists_url": "https://api.github.com/users/cxfeng1/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/cxfeng1/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/cxfeng1/subscriptions",
        "organizations_url": "https://api.github.com/users/cxfeng1/orgs",
        "repos_url": "https://api.github.com/users/cxfeng1/repos",
        "events_url": "https://api.github.com/users/cxfeng1/events{/privacy}",
        "received_events_url": "https://api.github.com/users/cxfeng1/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-12-13T04:01:48Z",
      "updated_at": "2016-12-13T04:01:48Z",
      "body": "@jerrybendy  都会有类似的问题， 举个例子:\r\n\r\n一个div容器的高度是4px， 里面有三个元素 `flex:1` 均分这个高度， 即都为 1.33333px。\r\n 如果向下取整， 容器会空1px出来， 如果向上取整， 容器会超出2px。"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/266640162",
      "html_url": "https://github.com/alibaba/weex/issues/1878#issuecomment-266640162",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1878",
      "id": 266640162,
      "user": {
        "login": "jerrybendy",
        "id": 7897384,
        "avatar_url": "https://avatars1.githubusercontent.com/u/7897384?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jerrybendy",
        "html_url": "https://github.com/jerrybendy",
        "followers_url": "https://api.github.com/users/jerrybendy/followers",
        "following_url": "https://api.github.com/users/jerrybendy/following{/other_user}",
        "gists_url": "https://api.github.com/users/jerrybendy/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jerrybendy/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jerrybendy/subscriptions",
        "organizations_url": "https://api.github.com/users/jerrybendy/orgs",
        "repos_url": "https://api.github.com/users/jerrybendy/repos",
        "events_url": "https://api.github.com/users/jerrybendy/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jerrybendy/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-12-13T04:51:56Z",
      "updated_at": "2016-12-13T04:51:56Z",
      "body": "嗯，是的，抱歉没有考虑到这种固定容器高度的情况。这样说来也确实没有什么太好的解决办法呀。\r\n\r\n我现在的处理方式是在背景区域额外再加一个白色的底，这样就可以隐藏掉多出来的线条，但仅在页面底色是白色是有效。如果页面底色并非白色的话仍然会看到白色的线条（好在背景非白色的情况在我们的应用中并不多见）"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/266657234",
      "html_url": "https://github.com/alibaba/weex/issues/1878#issuecomment-266657234",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1878",
      "id": 266657234,
      "user": {
        "login": "cxfeng1",
        "id": 1625893,
        "avatar_url": "https://avatars2.githubusercontent.com/u/1625893?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/cxfeng1",
        "html_url": "https://github.com/cxfeng1",
        "followers_url": "https://api.github.com/users/cxfeng1/followers",
        "following_url": "https://api.github.com/users/cxfeng1/following{/other_user}",
        "gists_url": "https://api.github.com/users/cxfeng1/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/cxfeng1/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/cxfeng1/subscriptions",
        "organizations_url": "https://api.github.com/users/cxfeng1/orgs",
        "repos_url": "https://api.github.com/users/cxfeng1/repos",
        "events_url": "https://api.github.com/users/cxfeng1/events{/privacy}",
        "received_events_url": "https://api.github.com/users/cxfeng1/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-12-13T06:23:14Z",
      "updated_at": "2016-12-13T06:23:14Z",
      "body": "@jerrybendy  暂时先这样处理吧， 后面我们也在考虑更深层次的解决方案。"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/266665021",
      "html_url": "https://github.com/alibaba/weex/issues/1878#issuecomment-266665021",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1878",
      "id": 266665021,
      "user": {
        "login": "jerrybendy",
        "id": 7897384,
        "avatar_url": "https://avatars1.githubusercontent.com/u/7897384?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jerrybendy",
        "html_url": "https://github.com/jerrybendy",
        "followers_url": "https://api.github.com/users/jerrybendy/followers",
        "following_url": "https://api.github.com/users/jerrybendy/following{/other_user}",
        "gists_url": "https://api.github.com/users/jerrybendy/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jerrybendy/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jerrybendy/subscriptions",
        "organizations_url": "https://api.github.com/users/jerrybendy/orgs",
        "repos_url": "https://api.github.com/users/jerrybendy/repos",
        "events_url": "https://api.github.com/users/jerrybendy/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jerrybendy/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-12-13T07:18:58Z",
      "updated_at": "2016-12-13T07:18:58Z",
      "body": "嗯，好的，感谢你们的付出 😊"
    }
  ],
  "created_at": "2016-12-12T11:40:01Z",
  "updated_at": "2016-12-13T07:18:58Z",
  "closed_at": "2016-12-13T07:18:58Z",
  "body": "你好，\r\n\r\n最近发现一个 weex 在组件高度计算上的 BUG，具体如下：\r\n\r\nWeex 要求将元素的所有尺寸使用 750px 来计算，例如高度 375px 实际渲染的结果将是实际设备宽度的 50%。这样就有可能会在宽度不等于 750px 的设备上计算出现小数。\r\n\r\n例如：\r\n\r\n```html\r\n<div style=\"width: 750; height: 100;\"></div>\r\n```\r\n\r\n在宽度为 750 的设备上（如 iPhone 6）实际计算的高度是 100px，但在 iPhone 5S 上实际计算的高度为 85.33px，即非整数。如果页面上有多个这样的被计算为高度非整数的元素相加，最终将会在某个不确切的位置出现 0.5px 到 1px 的缝隙。这条缝隙在背景色为深色时显得尤为明显。\r\n\r\n不过这个 BUG 目前只在 iOS 设备上遇到，在 iPhone 5S 及 iPhone 6/7 Plus 上更为频繁。\r\n\r\n附上一段问题重现的代码，代码中设置 `scroller` 的背景色为蓝色，每行一个高 100 的白色色块。在 iOS 设备上每隔几行就会看到一条明显的蓝色线条。\r\n\r\n```html\r\n<template>\r\n    <scroller style=\"background-color: blue;\">\r\n        <div class=\"row\"></div>\r\n        <div class=\"row\"></div>\r\n        <div class=\"row\"></div>\r\n        <div class=\"row\"></div>\r\n        <div class=\"row\"></div>\r\n        <div class=\"row\"></div>\r\n        <div class=\"row\"></div>\r\n        <div class=\"row\"></div>\r\n        <div class=\"row\"></div>\r\n        <div class=\"row\"></div>\r\n    </scroller>\r\n</template>\r\n\r\n<style>\r\n    .row {\r\n        background-color: #FFFFFF;\r\n        width: 750;\r\n        height: 100;\r\n    }\r\n</style>\r\n```"
}
