{
  "url": "https://api.github.com/repos/alibaba/weex/issues/2136",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/2136/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/2136/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/2136/events",
  "html_url": "https://github.com/alibaba/weex/issues/2136",
  "id": 198669486,
  "number": 2136,
  "title": "用dev编译的framework集成到工程里面，5c，Xcode联机调试时，mapview？释放后主线卡死",
  "user": {
    "login": "iamqk",
    "id": 281031,
    "avatar_url": "https://avatars1.githubusercontent.com/u/281031?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/iamqk",
    "html_url": "https://github.com/iamqk",
    "followers_url": "https://api.github.com/users/iamqk/followers",
    "following_url": "https://api.github.com/users/iamqk/following{/other_user}",
    "gists_url": "https://api.github.com/users/iamqk/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/iamqk/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/iamqk/subscriptions",
    "organizations_url": "https://api.github.com/users/iamqk/orgs",
    "repos_url": "https://api.github.com/users/iamqk/repos",
    "events_url": "https://api.github.com/users/iamqk/events{/privacy}",
    "received_events_url": "https://api.github.com/users/iamqk/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 359381244,
      "url": "https://api.github.com/repos/alibaba/weex/labels/ios",
      "name": "ios",
      "color": "f9d0c4",
      "default": false
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": [
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/270360159",
      "html_url": "https://github.com/alibaba/weex/issues/2136#issuecomment-270360159",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/2136",
      "id": 270360159,
      "user": {
        "login": "acton393",
        "id": 11631084,
        "avatar_url": "https://avatars1.githubusercontent.com/u/11631084?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/acton393",
        "html_url": "https://github.com/acton393",
        "followers_url": "https://api.github.com/users/acton393/followers",
        "following_url": "https://api.github.com/users/acton393/following{/other_user}",
        "gists_url": "https://api.github.com/users/acton393/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/acton393/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/acton393/subscriptions",
        "organizations_url": "https://api.github.com/users/acton393/orgs",
        "repos_url": "https://api.github.com/users/acton393/repos",
        "events_url": "https://api.github.com/users/acton393/events{/privacy}",
        "received_events_url": "https://api.github.com/users/acton393/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2017-01-04T12:29:17Z",
      "updated_at": "2017-01-04T12:29:17Z",
      "body": "有复现的路径吗？"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/270531496",
      "html_url": "https://github.com/alibaba/weex/issues/2136#issuecomment-270531496",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/2136",
      "id": 270531496,
      "user": {
        "login": "iamqk",
        "id": 281031,
        "avatar_url": "https://avatars1.githubusercontent.com/u/281031?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/iamqk",
        "html_url": "https://github.com/iamqk",
        "followers_url": "https://api.github.com/users/iamqk/followers",
        "following_url": "https://api.github.com/users/iamqk/following{/other_user}",
        "gists_url": "https://api.github.com/users/iamqk/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/iamqk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/iamqk/subscriptions",
        "organizations_url": "https://api.github.com/users/iamqk/orgs",
        "repos_url": "https://api.github.com/users/iamqk/repos",
        "events_url": "https://api.github.com/users/iamqk/events{/privacy}",
        "received_events_url": "https://api.github.com/users/iamqk/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2017-01-05T00:53:07Z",
      "updated_at": "2017-01-05T01:10:39Z",
      "body": "补充一下：xcode版本是 8.2 8.2.1都一样\r\n6s设备没有此类问题，模拟器也没有此类问题\r\n5c在非连接xcode调试状态时，也没有此问题"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/270532244",
      "html_url": "https://github.com/alibaba/weex/issues/2136#issuecomment-270532244",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/2136",
      "id": 270532244,
      "user": {
        "login": "iamqk",
        "id": 281031,
        "avatar_url": "https://avatars1.githubusercontent.com/u/281031?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/iamqk",
        "html_url": "https://github.com/iamqk",
        "followers_url": "https://api.github.com/users/iamqk/followers",
        "following_url": "https://api.github.com/users/iamqk/following{/other_user}",
        "gists_url": "https://api.github.com/users/iamqk/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/iamqk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/iamqk/subscriptions",
        "organizations_url": "https://api.github.com/users/iamqk/orgs",
        "repos_url": "https://api.github.com/users/iamqk/repos",
        "events_url": "https://api.github.com/users/iamqk/events{/privacy}",
        "received_events_url": "https://api.github.com/users/iamqk/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2017-01-05T00:57:13Z",
      "updated_at": "2017-01-05T00:57:13Z",
      "body": "连接xcode debug调试的时候，含有地图的页面在退出的时候，主线程卡死，界面无响应\r\n复现路径：\r\nxcode连接5c进行debug调试，在切换没有内嵌mapview地图的页面时没没有问题\r\n切换进入含有mapview地图的页面时也没有问题\r\n但是从含有mapview的页面退出，页面释放后就会产生此类问题\r\n主线程卡死，但是不会超时退出，用户交互无响应（不能点击）\r\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/271198982",
      "html_url": "https://github.com/alibaba/weex/issues/2136#issuecomment-271198982",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/2136",
      "id": 271198982,
      "user": {
        "login": "xispower",
        "id": 3114511,
        "avatar_url": "https://avatars0.githubusercontent.com/u/3114511?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/xispower",
        "html_url": "https://github.com/xispower",
        "followers_url": "https://api.github.com/users/xispower/followers",
        "following_url": "https://api.github.com/users/xispower/following{/other_user}",
        "gists_url": "https://api.github.com/users/xispower/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/xispower/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/xispower/subscriptions",
        "organizations_url": "https://api.github.com/users/xispower/orgs",
        "repos_url": "https://api.github.com/users/xispower/repos",
        "events_url": "https://api.github.com/users/xispower/events{/privacy}",
        "received_events_url": "https://api.github.com/users/xispower/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2017-01-09T01:53:35Z",
      "updated_at": "2017-01-09T02:00:05Z",
      "body": "你这个问题跟我们当初遇到uiwebview情况一致，在5c上，开启debug，会卡死，不开启就没事。其它机型没事，一直没有找到这个原因，也就没有解决这个问题，不影响正常使用。可能原因是：1，因为我们项目很大，clean之后build项目一般在2分钟左右，不知道那个地方牵连到。2， 可能是因为5c使用armv7编译库的原因，5s及其之后都是使用的是arm64。3,卡死没有报错有可能是因为死锁，或者线程一直在同步执行没有结束。 如果有解决方法提出来，兄弟们记得@我一下，多谢。"
    }
  ],
  "created_at": "2017-01-04T09:58:42Z",
  "updated_at": "2017-01-09T02:00:05Z",
  "closed_at": null,
  "body": "\r\n设备：5C OS:10.11.6 weex本：b5b600d\r\n连接xcode debug调试的时候，含有地图的页面在退出的时候，主线程卡死，界面无响应\r\n移除framework程序恢复正常\r\n\r\n点击暂停，主界面的bt如下：\r\n(lldb) bt\r\n* thread #1: tid = 0x15d4a, 0x1dd2b89c libsystem_kernel.dylib`semaphore_wait_trap + 8, queue = 'com.apple.main-thread', stop reason = signal SIGSTOP\r\n  * frame #0: 0x1dd2b89c libsystem_kernel.dylib`semaphore_wait_trap + 8\r\n    frame #1: 0x0213a34a libdispatch.dylib`_dispatch_semaphore_wait_slow + 168\r\n    frame #2: 0x0201cc84 libglInterpose.dylib`ContextInfo::~ContextInfo() + 116\r\n    frame #3: 0x01fd3eda libglInterpose.dylib`EAGLContext_dealloc(EAGLContext*, objc_selector*) + 266\r\n    frame #4: 0x1d815194 libobjc.A.dylib`objc_object::sidetable_release(bool) + 238\r\n    frame #5: 0x2901b9b8 VectorKit`ggl::OESContext::~OESContext() + 164\r\n    frame #6: 0x2901182e VectorKit`-[GGLOpenGLESLayer .cxx_destruct] + 54\r\n    frame #7: 0x1d7fa046 libobjc.A.dylib`object_cxxDestructFromClass(objc_object*, objc_class*) + 116\r\n    frame #8: 0x1d804ec4 libobjc.A.dylib`objc_destructInstance + 34\r\n    frame #9: 0x1d804ee4 libobjc.A.dylib`object_dispose + 14\r\n    frame #10: 0x21448b26 QuartzCore`-[CALayer dealloc] + 114\r\n    frame #11: 0x213fb3fa QuartzCore`-[CAEAGLLayer dealloc] + 114\r\n    frame #12: 0x01fd64b6 libglInterpose.dylib`CAEAGLLayer_dealloc(CAEAGLLayer*, objc_selector*) + 450\r\n    frame #13: 0x2901130e VectorKit`-[GGLOpenGLESLayer dealloc] + 110\r\n    frame #14: 0x28f2c30c VectorKit`-[MDDisplayLayer dealloc] + 260\r\n    frame #15: 0x1d815194 libobjc.A.dylib`objc_object::sidetable_release(bool) + 238\r\n    frame #16: 0x28cb4e5e VectorKit`-[VKMapView dealloc] + 864\r\n    frame #17: 0x21447730 QuartzCore`CA::Layer::free_transaction(CA::Transaction*) + 136\r\n    frame #18: 0x213f8c32 QuartzCore`CA::Transaction::commit() + 690\r\n    frame #19: 0x213f9652 QuartzCore`CA::Transaction::observer_callback(__CFRunLoopObserver*, unsigned long, void*) + 162\r\n    frame #20: 0x1e553f14 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 20\r\n    frame #21: 0x1e552190 CoreFoundation`__CFRunLoopDoObservers + 282\r\n    frame #22: 0x1e5525a6 CoreFoundation`__CFRunLoopRun + 934\r\n    frame #23: 0x1e4a1532 CoreFoundation`CFRunLoopRunSpecific + 486\r\n    frame #24: 0x1e4a1340 CoreFoundation`CFRunLoopRunInMode + 104\r\n    frame #25: 0x1fc78bfc GraphicsServices`GSEventRunModal + 156\r\n    frame #26: 0x236afe26 UIKit`-[UIApplication _run] + 574\r\n    frame #27: 0x236aa550 UIKit`UIApplicationMain + 150\r\n    frame #28: 0x003d34ac DEV`main(argc=1, argv=0x01da89e4) + 100 at main.m:16\r\n    frame #29: 0x1dc6b50a libdyld.dylib`start + 2\r\n(lldb) ",
  "closed_by": null
}
