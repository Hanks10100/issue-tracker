{
  "url": "https://api.github.com/repos/alibaba/weex/issues/1557",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/1557/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/1557/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/1557/events",
  "html_url": "https://github.com/alibaba/weex/issues/1557",
  "id": 186688333,
  "number": 1557,
  "title": "[bug]自定义component组件，重写了IWXActivityStateListener的相关生命周期方法却没有被调用",
  "user": {
    "login": "squirrelx",
    "id": 21114837,
    "avatar_url": "https://avatars2.githubusercontent.com/u/21114837?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/squirrelx",
    "html_url": "https://github.com/squirrelx",
    "followers_url": "https://api.github.com/users/squirrelx/followers",
    "following_url": "https://api.github.com/users/squirrelx/following{/other_user}",
    "gists_url": "https://api.github.com/users/squirrelx/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/squirrelx/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/squirrelx/subscriptions",
    "organizations_url": "https://api.github.com/users/squirrelx/orgs",
    "repos_url": "https://api.github.com/users/squirrelx/repos",
    "events_url": "https://api.github.com/users/squirrelx/events{/privacy}",
    "received_events_url": "https://api.github.com/users/squirrelx/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 359381236,
      "url": "https://api.github.com/repos/alibaba/weex/labels/android",
      "name": "android",
      "color": "f9d0c4",
      "default": false
    },
    {
      "id": 339914709,
      "url": "https://api.github.com/repos/alibaba/weex/labels/help%20wanted",
      "name": "help wanted",
      "color": "159818",
      "default": true
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": [
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/257746267",
      "html_url": "https://github.com/alibaba/weex/issues/1557#issuecomment-257746267",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1557",
      "id": 257746267,
      "user": {
        "login": "misakuo",
        "id": 6958743,
        "avatar_url": "https://avatars3.githubusercontent.com/u/6958743?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/misakuo",
        "html_url": "https://github.com/misakuo",
        "followers_url": "https://api.github.com/users/misakuo/followers",
        "following_url": "https://api.github.com/users/misakuo/following{/other_user}",
        "gists_url": "https://api.github.com/users/misakuo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/misakuo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/misakuo/subscriptions",
        "organizations_url": "https://api.github.com/users/misakuo/orgs",
        "repos_url": "https://api.github.com/users/misakuo/repos",
        "events_url": "https://api.github.com/users/misakuo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/misakuo/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-02T01:18:13Z",
      "updated_at": "2016-11-02T01:18:13Z",
      "body": "你需要手动调用组件的`registerActivityStateListener()`方法\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/257747027",
      "html_url": "https://github.com/alibaba/weex/issues/1557#issuecomment-257747027",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1557",
      "id": 257747027,
      "user": {
        "login": "squirrelx",
        "id": 21114837,
        "avatar_url": "https://avatars2.githubusercontent.com/u/21114837?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/squirrelx",
        "html_url": "https://github.com/squirrelx",
        "followers_url": "https://api.github.com/users/squirrelx/followers",
        "following_url": "https://api.github.com/users/squirrelx/following{/other_user}",
        "gists_url": "https://api.github.com/users/squirrelx/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/squirrelx/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/squirrelx/subscriptions",
        "organizations_url": "https://api.github.com/users/squirrelx/orgs",
        "repos_url": "https://api.github.com/users/squirrelx/repos",
        "events_url": "https://api.github.com/users/squirrelx/events{/privacy}",
        "received_events_url": "https://api.github.com/users/squirrelx/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-02T01:24:10Z",
      "updated_at": "2016-11-02T01:24:10Z",
      "body": "@misakuo 你的意思是在我的自定义组件里边重写registerActivityStateListener()方法吗？\n我看WXComponent已经写了啊    我要怎么复写呢：\n\n```\n  public void registerActivityStateListener() {\n    if (mInstance != null) {\n      mInstance.registerActivityStateListener(this);\n    }\n  }\n```\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/257747140",
      "html_url": "https://github.com/alibaba/weex/issues/1557#issuecomment-257747140",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1557",
      "id": 257747140,
      "user": {
        "login": "squirrelx",
        "id": 21114837,
        "avatar_url": "https://avatars2.githubusercontent.com/u/21114837?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/squirrelx",
        "html_url": "https://github.com/squirrelx",
        "followers_url": "https://api.github.com/users/squirrelx/followers",
        "following_url": "https://api.github.com/users/squirrelx/following{/other_user}",
        "gists_url": "https://api.github.com/users/squirrelx/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/squirrelx/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/squirrelx/subscriptions",
        "organizations_url": "https://api.github.com/users/squirrelx/orgs",
        "repos_url": "https://api.github.com/users/squirrelx/repos",
        "events_url": "https://api.github.com/users/squirrelx/events{/privacy}",
        "received_events_url": "https://api.github.com/users/squirrelx/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-02T01:25:04Z",
      "updated_at": "2016-11-02T01:25:04Z",
      "body": "@misakuo   你的意思是在init方法里调用这个方法 是吧？\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/257748630",
      "html_url": "https://github.com/alibaba/weex/issues/1557#issuecomment-257748630",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1557",
      "id": 257748630,
      "user": {
        "login": "squirrelx",
        "id": 21114837,
        "avatar_url": "https://avatars2.githubusercontent.com/u/21114837?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/squirrelx",
        "html_url": "https://github.com/squirrelx",
        "followers_url": "https://api.github.com/users/squirrelx/followers",
        "following_url": "https://api.github.com/users/squirrelx/following{/other_user}",
        "gists_url": "https://api.github.com/users/squirrelx/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/squirrelx/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/squirrelx/subscriptions",
        "organizations_url": "https://api.github.com/users/squirrelx/orgs",
        "repos_url": "https://api.github.com/users/squirrelx/repos",
        "events_url": "https://api.github.com/users/squirrelx/events{/privacy}",
        "received_events_url": "https://api.github.com/users/squirrelx/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-02T01:35:45Z",
      "updated_at": "2016-11-02T01:35:45Z",
      "body": "@misakuo 你好  我在initCompnentHostView里边手动调用了this.registerActivityStateListener()   复写的onActivityStart等生命周期方法，还是都没有调用。。。  请指教。。\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/257752211",
      "html_url": "https://github.com/alibaba/weex/issues/1557#issuecomment-257752211",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1557",
      "id": 257752211,
      "user": {
        "login": "squirrelx",
        "id": 21114837,
        "avatar_url": "https://avatars2.githubusercontent.com/u/21114837?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/squirrelx",
        "html_url": "https://github.com/squirrelx",
        "followers_url": "https://api.github.com/users/squirrelx/followers",
        "following_url": "https://api.github.com/users/squirrelx/following{/other_user}",
        "gists_url": "https://api.github.com/users/squirrelx/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/squirrelx/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/squirrelx/subscriptions",
        "organizations_url": "https://api.github.com/users/squirrelx/orgs",
        "repos_url": "https://api.github.com/users/squirrelx/repos",
        "events_url": "https://api.github.com/users/squirrelx/events{/privacy}",
        "received_events_url": "https://api.github.com/users/squirrelx/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-02T02:02:37Z",
      "updated_at": "2016-11-02T02:02:37Z",
      "body": "@misakuo  通过手动调用的方式，重写了onActivityStart onActivityCreate onActivityResume onActivityStop onActivityPause onActivityDestroy，发现在页面启动的时候只会调用initCompnentHostView方法，start和resume没调用，切换到别的activity的时候会调用destroy方法，如果不切换只是按home键然后再打开app的时候会调用resume方法。   这些调用怎么和原生activity的不一致啊，比如启动的时候 start,resume create等都没有调用呢\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/257762131",
      "html_url": "https://github.com/alibaba/weex/issues/1557#issuecomment-257762131",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1557",
      "id": 257762131,
      "user": {
        "login": "misakuo",
        "id": 6958743,
        "avatar_url": "https://avatars3.githubusercontent.com/u/6958743?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/misakuo",
        "html_url": "https://github.com/misakuo",
        "followers_url": "https://api.github.com/users/misakuo/followers",
        "following_url": "https://api.github.com/users/misakuo/following{/other_user}",
        "gists_url": "https://api.github.com/users/misakuo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/misakuo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/misakuo/subscriptions",
        "organizations_url": "https://api.github.com/users/misakuo/orgs",
        "repos_url": "https://api.github.com/users/misakuo/repos",
        "events_url": "https://api.github.com/users/misakuo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/misakuo/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-02T03:24:00Z",
      "updated_at": "2016-11-02T03:24:00Z",
      "body": "在你component的构造函数或其他初始化的位置，简单调用`registerActivityStateListener()`即可，不需要做额外操作。on开头的回调函数由sdk调用，不需要你手动触发。\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/257772556",
      "html_url": "https://github.com/alibaba/weex/issues/1557#issuecomment-257772556",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1557",
      "id": 257772556,
      "user": {
        "login": "squirrelx",
        "id": 21114837,
        "avatar_url": "https://avatars2.githubusercontent.com/u/21114837?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/squirrelx",
        "html_url": "https://github.com/squirrelx",
        "followers_url": "https://api.github.com/users/squirrelx/followers",
        "following_url": "https://api.github.com/users/squirrelx/following{/other_user}",
        "gists_url": "https://api.github.com/users/squirrelx/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/squirrelx/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/squirrelx/subscriptions",
        "organizations_url": "https://api.github.com/users/squirrelx/orgs",
        "repos_url": "https://api.github.com/users/squirrelx/repos",
        "events_url": "https://api.github.com/users/squirrelx/events{/privacy}",
        "received_events_url": "https://api.github.com/users/squirrelx/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-02T04:55:41Z",
      "updated_at": "2016-11-02T04:55:41Z",
      "body": "@misakuo  关键用来承载we（或者说js）的activity是必须要实现IWXRenderListener接口的，实现此接口需要复写onViewCreated，同时要registerRenderListener；我怎么来保证本activity在oncreate或者onstart等执行的时候我自定义的组件registerActivityStateListener先执行了呢，否则activity启动的时候  还没有注册好activitystatelistener呢。。    \n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/257772903",
      "html_url": "https://github.com/alibaba/weex/issues/1557#issuecomment-257772903",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1557",
      "id": 257772903,
      "user": {
        "login": "squirrelx",
        "id": 21114837,
        "avatar_url": "https://avatars2.githubusercontent.com/u/21114837?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/squirrelx",
        "html_url": "https://github.com/squirrelx",
        "followers_url": "https://api.github.com/users/squirrelx/followers",
        "following_url": "https://api.github.com/users/squirrelx/following{/other_user}",
        "gists_url": "https://api.github.com/users/squirrelx/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/squirrelx/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/squirrelx/subscriptions",
        "organizations_url": "https://api.github.com/users/squirrelx/orgs",
        "repos_url": "https://api.github.com/users/squirrelx/repos",
        "events_url": "https://api.github.com/users/squirrelx/events{/privacy}",
        "received_events_url": "https://api.github.com/users/squirrelx/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-02T04:59:27Z",
      "updated_at": "2016-11-02T04:59:27Z",
      "body": "我是参照playground代码来写的，activity启动的时候（onstart onresume等），onViewCreated还没被全部回调呢，也就是说我在自定义component的构造函数里边的registerActivityStateListener还没有被执行呢，所以activity在启动的时候调不到我在component里边复写的生命周期方法。。。\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/257776308",
      "html_url": "https://github.com/alibaba/weex/issues/1557#issuecomment-257776308",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1557",
      "id": 257776308,
      "user": {
        "login": "misakuo",
        "id": 6958743,
        "avatar_url": "https://avatars3.githubusercontent.com/u/6958743?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/misakuo",
        "html_url": "https://github.com/misakuo",
        "followers_url": "https://api.github.com/users/misakuo/followers",
        "following_url": "https://api.github.com/users/misakuo/following{/other_user}",
        "gists_url": "https://api.github.com/users/misakuo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/misakuo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/misakuo/subscriptions",
        "organizations_url": "https://api.github.com/users/misakuo/orgs",
        "repos_url": "https://api.github.com/users/misakuo/repos",
        "events_url": "https://api.github.com/users/misakuo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/misakuo/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-02T05:30:03Z",
      "updated_at": "2016-11-02T05:30:03Z",
      "body": "参考WXPageActivity，在Activity生命周期的各个回调里会调用WXSDKInStance里相应的回调函数，如果在调用的时候component还没有registerActivityStateListener或者是还没有初始化的话，是接受不到相应状态的回调的\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/257779506",
      "html_url": "https://github.com/alibaba/weex/issues/1557#issuecomment-257779506",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1557",
      "id": 257779506,
      "user": {
        "login": "squirrelx",
        "id": 21114837,
        "avatar_url": "https://avatars2.githubusercontent.com/u/21114837?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/squirrelx",
        "html_url": "https://github.com/squirrelx",
        "followers_url": "https://api.github.com/users/squirrelx/followers",
        "following_url": "https://api.github.com/users/squirrelx/following{/other_user}",
        "gists_url": "https://api.github.com/users/squirrelx/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/squirrelx/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/squirrelx/subscriptions",
        "organizations_url": "https://api.github.com/users/squirrelx/orgs",
        "repos_url": "https://api.github.com/users/squirrelx/repos",
        "events_url": "https://api.github.com/users/squirrelx/events{/privacy}",
        "received_events_url": "https://api.github.com/users/squirrelx/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-02T05:57:05Z",
      "updated_at": "2016-11-02T05:57:05Z",
      "body": "我是参照的WXPageActivity的做法啊，我无法控制activity启动的时候就能使component注册上啊，weex 的playground当前肯定也做不到，我就参照搞的。想问下你们的建议是什么，怎么才能控制时序\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/265633521",
      "html_url": "https://github.com/alibaba/weex/issues/1557#issuecomment-265633521",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1557",
      "id": 265633521,
      "user": {
        "login": "misakuo",
        "id": 6958743,
        "avatar_url": "https://avatars3.githubusercontent.com/u/6958743?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/misakuo",
        "html_url": "https://github.com/misakuo",
        "followers_url": "https://api.github.com/users/misakuo/followers",
        "following_url": "https://api.github.com/users/misakuo/following{/other_user}",
        "gists_url": "https://api.github.com/users/misakuo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/misakuo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/misakuo/subscriptions",
        "organizations_url": "https://api.github.com/users/misakuo/orgs",
        "repos_url": "https://api.github.com/users/misakuo/repos",
        "events_url": "https://api.github.com/users/misakuo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/misakuo/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-12-08T02:12:43Z",
      "updated_at": "2016-12-08T02:12:43Z",
      "body": "由于weex页面是在onCreate之后才开始异步渲染的，所以监听页面可见生命周期`onCreate`/`onStart`/`onResume`确实是不可靠的做法。你的时序控制是否可以转移到View的`onAttachToWindow`和`onDetachToWindow`来控制？"
    }
  ],
  "created_at": "2016-11-02T01:07:11Z",
  "updated_at": "2016-12-08T02:12:43Z",
  "closed_at": null,
  "body": "由于自定义的component的组件需要涉及到activity的生命周期的几个方法，重写了此接口的方法，但是在实际执行的时候并没有进入到我的方法\r\nandroid    0.7.0版本",
  "closed_by": null
}
