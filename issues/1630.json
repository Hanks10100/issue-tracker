{
  "url": "https://api.github.com/repos/alibaba/weex/issues/1630",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/1630/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/1630/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/1630/events",
  "html_url": "https://github.com/alibaba/weex/issues/1630",
  "id": 188889410,
  "number": 1630,
  "title": "list的bug",
  "user": {
    "login": "zhangdefu3",
    "id": 20473759,
    "avatar_url": "https://avatars0.githubusercontent.com/u/20473759?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zhangdefu3",
    "html_url": "https://github.com/zhangdefu3",
    "followers_url": "https://api.github.com/users/zhangdefu3/followers",
    "following_url": "https://api.github.com/users/zhangdefu3/following{/other_user}",
    "gists_url": "https://api.github.com/users/zhangdefu3/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zhangdefu3/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zhangdefu3/subscriptions",
    "organizations_url": "https://api.github.com/users/zhangdefu3/orgs",
    "repos_url": "https://api.github.com/users/zhangdefu3/repos",
    "events_url": "https://api.github.com/users/zhangdefu3/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zhangdefu3/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": [
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/260314019",
      "html_url": "https://github.com/alibaba/weex/issues/1630#issuecomment-260314019",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1630",
      "id": 260314019,
      "user": {
        "login": "Hanks10100",
        "id": 8401776,
        "avatar_url": "https://avatars3.githubusercontent.com/u/8401776?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hanks10100",
        "html_url": "https://github.com/Hanks10100",
        "followers_url": "https://api.github.com/users/Hanks10100/followers",
        "following_url": "https://api.github.com/users/Hanks10100/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hanks10100/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hanks10100/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hanks10100/subscriptions",
        "organizations_url": "https://api.github.com/users/Hanks10100/orgs",
        "repos_url": "https://api.github.com/users/Hanks10100/repos",
        "events_url": "https://api.github.com/users/Hanks10100/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hanks10100/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-14T11:38:44Z",
      "updated_at": "2016-11-14T11:38:44Z",
      "body": "在含 `repeat` 的标签里边绑定的事件，如果想取下标值，可以用 `this.$index` 不要用 `e.target.attr.index`。\n\n``` js\nonappear: function (e) {\n    var appearId = this.rows[this.$index].id;\n}\n```\n\n因为在 HTML 标准中，attribute 和 property 是不一样的，参考 [Properties and Attributes in HTML](http://stackoverflow.com/questions/6003819/properties-and-attributes-in-html)。attribute 就是 DOM 上的初始值，更新 DOM 才能更新 attribute，更新数据时 attribute 不变。`attr` 属性中的值不一定是最新的。\n\n> 另外提示一点： `repeat=\"rows\"` 这种写法我们已经废弃了，建议使用 `repeat=\"row in rows\"` 这种方式。\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/260592853",
      "html_url": "https://github.com/alibaba/weex/issues/1630#issuecomment-260592853",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1630",
      "id": 260592853,
      "user": {
        "login": "yuanzx",
        "id": 1204035,
        "avatar_url": "https://avatars1.githubusercontent.com/u/1204035?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yuanzx",
        "html_url": "https://github.com/yuanzx",
        "followers_url": "https://api.github.com/users/yuanzx/followers",
        "following_url": "https://api.github.com/users/yuanzx/following{/other_user}",
        "gists_url": "https://api.github.com/users/yuanzx/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/yuanzx/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/yuanzx/subscriptions",
        "organizations_url": "https://api.github.com/users/yuanzx/orgs",
        "repos_url": "https://api.github.com/users/yuanzx/repos",
        "events_url": "https://api.github.com/users/yuanzx/events{/privacy}",
        "received_events_url": "https://api.github.com/users/yuanzx/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-15T09:37:43Z",
      "updated_at": "2016-11-15T09:37:43Z",
      "body": "@Hanks10100 另外提示一点： repeat=\"rows\" 这种写法我们已经废弃了，建议使用 repeat=\"row in rows\" 这种方式。\n\n为何要废弃这种写法，两种写法都支持不更好么？\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/260601261",
      "html_url": "https://github.com/alibaba/weex/issues/1630#issuecomment-260601261",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1630",
      "id": 260601261,
      "user": {
        "login": "Hanks10100",
        "id": 8401776,
        "avatar_url": "https://avatars3.githubusercontent.com/u/8401776?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hanks10100",
        "html_url": "https://github.com/Hanks10100",
        "followers_url": "https://api.github.com/users/Hanks10100/followers",
        "following_url": "https://api.github.com/users/Hanks10100/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hanks10100/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hanks10100/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hanks10100/subscriptions",
        "organizations_url": "https://api.github.com/users/Hanks10100/orgs",
        "repos_url": "https://api.github.com/users/Hanks10100/repos",
        "events_url": "https://api.github.com/users/Hanks10100/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hanks10100/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-15T10:12:08Z",
      "updated_at": "2016-11-15T10:12:17Z",
      "body": "@yuanzx 这种写法在性能优化和数据更新完备性上存在比较大的局限性，而且作用域也容易存在歧义。\n\n考虑如下情况：\n\n``` html\n<template>\n  <div>\n    <text>{{title}}</text>\n    <div>\n      <text repeat=\"lists\" onclick=\"handleClick\">{{title}}</text>\n    </div>\n  </div>\n</template>\n\n<script>\n  module.exports = {\n    data: {\n      title: 'Banner',\n      lists: [\n        { title: 'A' },\n        { title: 'B' },\n        { title: 'C' }\n      ]\n    },\n    methods: {\n      handleClick: function () {\n        this.title = 'X'\n      }\n    }\n  }\n</script>\n```\n\n其中 `this.title` 修改的值是数组里的还是数组外的？\n\n此外，使用 `repeat=\"row in rows\"` 这种写法便于以后切换成 Vue 2.0 的 `v-for`，Vue 2.0 里也没有了 `v-repeat` 这种指令了。\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/260602366",
      "html_url": "https://github.com/alibaba/weex/issues/1630#issuecomment-260602366",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1630",
      "id": 260602366,
      "user": {
        "login": "WangXiZhu",
        "id": 8960318,
        "avatar_url": "https://avatars0.githubusercontent.com/u/8960318?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/WangXiZhu",
        "html_url": "https://github.com/WangXiZhu",
        "followers_url": "https://api.github.com/users/WangXiZhu/followers",
        "following_url": "https://api.github.com/users/WangXiZhu/following{/other_user}",
        "gists_url": "https://api.github.com/users/WangXiZhu/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/WangXiZhu/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/WangXiZhu/subscriptions",
        "organizations_url": "https://api.github.com/users/WangXiZhu/orgs",
        "repos_url": "https://api.github.com/users/WangXiZhu/repos",
        "events_url": "https://api.github.com/users/WangXiZhu/events{/privacy}",
        "received_events_url": "https://api.github.com/users/WangXiZhu/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-15T10:17:03Z",
      "updated_at": "2016-11-15T10:18:22Z",
      "body": "为什么我获取 $index为 undefined\n\n```\n\n<div class=\"tabbar\"  onclick=\"switchPage($index)\" repeat=\"{{item in tabItems}}\">\n</div>\n\ndata: {\n  tabItems: [{},{},{}]\n},\nmethods: {\n  switchPage: function(index){     \n      console.info(index);  //undefined\n    }\n}\n```\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/260612236",
      "html_url": "https://github.com/alibaba/weex/issues/1630#issuecomment-260612236",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1630",
      "id": 260612236,
      "user": {
        "login": "Hanks10100",
        "id": 8401776,
        "avatar_url": "https://avatars3.githubusercontent.com/u/8401776?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hanks10100",
        "html_url": "https://github.com/Hanks10100",
        "followers_url": "https://api.github.com/users/Hanks10100/followers",
        "following_url": "https://api.github.com/users/Hanks10100/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hanks10100/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hanks10100/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hanks10100/subscriptions",
        "organizations_url": "https://api.github.com/users/Hanks10100/orgs",
        "repos_url": "https://api.github.com/users/Hanks10100/repos",
        "events_url": "https://api.github.com/users/Hanks10100/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hanks10100/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-15T11:02:17Z",
      "updated_at": "2016-11-15T11:02:17Z",
      "body": "@WangXiZhu 我测了是有的，帮你把代码补全：\n\n``` html\n<template>\n  <div>\n    <div class=\"tabbar\"  onclick=\"switchPage($index)\" repeat=\"{{item in tabItems}}\">\n      <text>{{$index}}</text>\n    </div>\n  </div>\n</template>\n<script>\n  module.exports = {\n    data: {\n      tabItems: [{},{},{}]\n    },\n    methods: {\n      switchPage: function(index){     \n        console.info(index);\n      }\n    }\n  }\n</script>\n```\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/260641778",
      "html_url": "https://github.com/alibaba/weex/issues/1630#issuecomment-260641778",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1630",
      "id": 260641778,
      "user": {
        "login": "WangXiZhu",
        "id": 8960318,
        "avatar_url": "https://avatars0.githubusercontent.com/u/8960318?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/WangXiZhu",
        "html_url": "https://github.com/WangXiZhu",
        "followers_url": "https://api.github.com/users/WangXiZhu/followers",
        "following_url": "https://api.github.com/users/WangXiZhu/following{/other_user}",
        "gists_url": "https://api.github.com/users/WangXiZhu/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/WangXiZhu/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/WangXiZhu/subscriptions",
        "organizations_url": "https://api.github.com/users/WangXiZhu/orgs",
        "repos_url": "https://api.github.com/users/WangXiZhu/repos",
        "events_url": "https://api.github.com/users/WangXiZhu/events{/privacy}",
        "received_events_url": "https://api.github.com/users/WangXiZhu/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-15T13:32:23Z",
      "updated_at": "2016-11-16T03:40:39Z",
      "body": "谢谢你的回答。\n我的代码也是这么写的。然后很奇怪，我把你的代码复制到我本地打印的结果也是undefined，\n我不知道什么原因，不知道和我的环境有没有关系，也是最近才开始用weex,\n\n![weex-bug](https://cloud.githubusercontent.com/assets/8960318/20307511/c17bccc4-ab7a-11e6-9a5c-e2c538c33ca4.png)\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/260845750",
      "html_url": "https://github.com/alibaba/weex/issues/1630#issuecomment-260845750",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1630",
      "id": 260845750,
      "user": {
        "login": "WangXiZhu",
        "id": 8960318,
        "avatar_url": "https://avatars0.githubusercontent.com/u/8960318?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/WangXiZhu",
        "html_url": "https://github.com/WangXiZhu",
        "followers_url": "https://api.github.com/users/WangXiZhu/followers",
        "following_url": "https://api.github.com/users/WangXiZhu/following{/other_user}",
        "gists_url": "https://api.github.com/users/WangXiZhu/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/WangXiZhu/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/WangXiZhu/subscriptions",
        "organizations_url": "https://api.github.com/users/WangXiZhu/orgs",
        "repos_url": "https://api.github.com/users/WangXiZhu/repos",
        "events_url": "https://api.github.com/users/WangXiZhu/events{/privacy}",
        "received_events_url": "https://api.github.com/users/WangXiZhu/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-16T03:43:33Z",
      "updated_at": "2016-11-16T03:43:33Z",
      "body": "sorry,就是weex-toolit版本的问题，之前版本是0.6.2，现在回退到 0.5.8就可以了。\n这个确实有点烦，还有小伙伴谈到，node_module有时候没有成功安装，导致解析出问题。\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/260849058",
      "html_url": "https://github.com/alibaba/weex/issues/1630#issuecomment-260849058",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1630",
      "id": 260849058,
      "user": {
        "login": "Hanks10100",
        "id": 8401776,
        "avatar_url": "https://avatars3.githubusercontent.com/u/8401776?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hanks10100",
        "html_url": "https://github.com/Hanks10100",
        "followers_url": "https://api.github.com/users/Hanks10100/followers",
        "following_url": "https://api.github.com/users/Hanks10100/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hanks10100/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hanks10100/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hanks10100/subscriptions",
        "organizations_url": "https://api.github.com/users/Hanks10100/orgs",
        "repos_url": "https://api.github.com/users/Hanks10100/repos",
        "events_url": "https://api.github.com/users/Hanks10100/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hanks10100/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-16T04:10:12Z",
      "updated_at": "2016-11-16T04:10:12Z",
      "body": "@WangXiZhu 👌 工具我们也会不断完善，如果发现问题了可以在 [weex-toolkit](https://github.com/weexteam/weex-toolkit) 这里提 issue。\n"
    }
  ],
  "created_at": "2016-11-12T03:25:41Z",
  "updated_at": "2016-11-16T04:10:16Z",
  "closed_at": "2016-11-16T04:10:16Z",
  "body": "**bug: list的bug.** \r\n描述：我把list放在上面(flex:6)，把提示文本放在下面(flex:1)。页面刚加载时，onappear的cell数，比展示出来的多。\r\n\r\n源代码如下：\r\n\r\n><template>\r\n    <div style=\"flex:1;\">\r\n        <list class=\"main\">\r\n            <cell repeat=\"{{rows}}\" index=\"{{$index}}\" onappear=\"onappear\" ondisappear=\"ondisappear\">\r\n                <div class=\"cell-in\">\r\n                    <text class=\"cell-text\">row - {{id}}</text>\r\n                </div>\r\n            </cell>\r\n        </list>\r\n        <div class=\"footer\">\r\n            <text class=\"count\">{{minAppearId}} ---- {{maxAppearId}}</text>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n><style>\r\n    .main{\r\n        flex:7;\r\n    }\r\n    .footer{\r\n        flex:1;\r\n        background-color: yellow;\r\n    }\r\n    .count{\r\n        font-size:24px;\r\n        margin:20px;\r\n        text-align: center;\r\n    }\r\n    .cell-in{\r\n        border-bottom-width:2px;\r\n        border-bottom-color: silver;\r\n    }\r\n    .cell-text{\r\n        font-size:40px;\r\n        padding:16px;\r\n    }\r\n</style>\r\n\r\n><script>\r\n    var debugMode = true;\r\n    module.exports = {\r\n        data:{\r\n            appearIds:[],\r\n            minAppearId:1,\r\n            maxAppearId:1,\r\n            rows:[\r\n                {id:1},\r\n                {id:2},\r\n                {id:3},\r\n                {id:4},\r\n                {id:5},\r\n                {id:6},\r\n                {id:7},\r\n                {id:8},\r\n                {id:9},\r\n                {id:10},\r\n                {id:11},\r\n                {id:12},\r\n                {id:13},\r\n                {id:14},\r\n                {id:15},\r\n                {id:16},\r\n                {id:17},\r\n                {id:18},\r\n                {id:19},\r\n                {id:20}\r\n            ]\r\n        },\r\n        computed:{\r\n\r\n        },\r\n        methods:{\r\n            refreshAppearData:function(){\r\n                this.appearIds.sort(function(a, b){\r\n                    return a - b;\r\n                });\r\n                this.minAppearId = this.appearIds[0];\r\n                this.maxAppearId = this.appearIds[this.appearIds.length - 1];\r\n            },\r\n            onappear:function(e){\r\n                var appearId = this.rows[e.target.attr.index].id;\r\n                if(debugMode){\r\n                    console.log(\"+++++++++++++项目：\" + appearId);\r\n                }\r\n                var index1 = this.appearIds.indexOf(appearId);\r\n                if(index1 < 0){\r\n                    this.appearIds.push(appearId);\r\n                    this.refreshAppearData();\r\n                }\r\n            },\r\n            ondisappear:function(e){\r\n                var disappearId = this.rows[e.target.attr.index].id;\r\n                if(debugMode){\r\n                    console.log(\"------------项目：\" + disappearId);\r\n                }\r\n                var index1 = this.appearIds.indexOf(disappearId);\r\n                if(index1 > -1){\r\n                    this.appearIds.splice(index1, 1);\r\n                    this.refreshAppearData();\r\n                }\r\n            }\r\n\r\n        },\r\n        created:function(){\r\n\r\n        }\r\n    }\r\n</script>\r\n\r\n",
  "closed_by": {
    "login": "Hanks10100",
    "id": 8401776,
    "avatar_url": "https://avatars3.githubusercontent.com/u/8401776?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Hanks10100",
    "html_url": "https://github.com/Hanks10100",
    "followers_url": "https://api.github.com/users/Hanks10100/followers",
    "following_url": "https://api.github.com/users/Hanks10100/following{/other_user}",
    "gists_url": "https://api.github.com/users/Hanks10100/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Hanks10100/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Hanks10100/subscriptions",
    "organizations_url": "https://api.github.com/users/Hanks10100/orgs",
    "repos_url": "https://api.github.com/users/Hanks10100/repos",
    "events_url": "https://api.github.com/users/Hanks10100/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Hanks10100/received_events",
    "type": "User",
    "site_admin": false
  }
}
