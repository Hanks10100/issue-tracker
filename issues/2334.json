{
  "url": "https://api.github.com/repos/alibaba/weex/issues/2334",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/2334/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/2334/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/2334/events",
  "html_url": "https://github.com/alibaba/weex/issues/2334",
  "id": 201785628,
  "number": 2334,
  "title": "[ios] vue模式下，无法修改类的 toString 方法",
  "user": {
    "login": "Neeeo",
    "id": 3702412,
    "avatar_url": "https://avatars3.githubusercontent.com/u/3702412?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Neeeo",
    "html_url": "https://github.com/Neeeo",
    "followers_url": "https://api.github.com/users/Neeeo/followers",
    "following_url": "https://api.github.com/users/Neeeo/following{/other_user}",
    "gists_url": "https://api.github.com/users/Neeeo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Neeeo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Neeeo/subscriptions",
    "organizations_url": "https://api.github.com/users/Neeeo/orgs",
    "repos_url": "https://api.github.com/users/Neeeo/repos",
    "events_url": "https://api.github.com/users/Neeeo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Neeeo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": [
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/273727757",
      "html_url": "https://github.com/alibaba/weex/issues/2334#issuecomment-273727757",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/2334",
      "id": 273727757,
      "user": {
        "login": "Hanks10100",
        "id": 8401776,
        "avatar_url": "https://avatars3.githubusercontent.com/u/8401776?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hanks10100",
        "html_url": "https://github.com/Hanks10100",
        "followers_url": "https://api.github.com/users/Hanks10100/followers",
        "following_url": "https://api.github.com/users/Hanks10100/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hanks10100/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hanks10100/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hanks10100/subscriptions",
        "organizations_url": "https://api.github.com/users/Hanks10100/orgs",
        "repos_url": "https://api.github.com/users/Hanks10100/repos",
        "events_url": "https://api.github.com/users/Hanks10100/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hanks10100/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2017-01-19T09:49:36Z",
      "updated_at": "2017-01-19T09:51:28Z",
      "body": "与 Vue 无关，因为我们将 `Object.prototype` freeze 了，所以无法覆盖原型中的 `toString` 方法（如果实在想覆盖，可以用 `Object.defineProperty`）。参考 #1529 "
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/273728973",
      "html_url": "https://github.com/alibaba/weex/issues/2334#issuecomment-273728973",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/2334",
      "id": 273728973,
      "user": {
        "login": "Neeeo",
        "id": 3702412,
        "avatar_url": "https://avatars3.githubusercontent.com/u/3702412?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Neeeo",
        "html_url": "https://github.com/Neeeo",
        "followers_url": "https://api.github.com/users/Neeeo/followers",
        "following_url": "https://api.github.com/users/Neeeo/following{/other_user}",
        "gists_url": "https://api.github.com/users/Neeeo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Neeeo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Neeeo/subscriptions",
        "organizations_url": "https://api.github.com/users/Neeeo/orgs",
        "repos_url": "https://api.github.com/users/Neeeo/repos",
        "events_url": "https://api.github.com/users/Neeeo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Neeeo/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2017-01-19T09:54:52Z",
      "updated_at": "2017-01-19T09:54:52Z",
      "body": "有个问题是，我用到的一个第三方库 [url-parse](https://www.npmjs.com/package/url-parse) 里重写了自己的 `toString`，导致现在用到它的地方都崩溃。\r\n另外，为什么在 web 环境下没问题？"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/273730329",
      "html_url": "https://github.com/alibaba/weex/issues/2334#issuecomment-273730329",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/2334",
      "id": 273730329,
      "user": {
        "login": "Hanks10100",
        "id": 8401776,
        "avatar_url": "https://avatars3.githubusercontent.com/u/8401776?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hanks10100",
        "html_url": "https://github.com/Hanks10100",
        "followers_url": "https://api.github.com/users/Hanks10100/followers",
        "following_url": "https://api.github.com/users/Hanks10100/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hanks10100/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hanks10100/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hanks10100/subscriptions",
        "organizations_url": "https://api.github.com/users/Hanks10100/orgs",
        "repos_url": "https://api.github.com/users/Hanks10100/repos",
        "events_url": "https://api.github.com/users/Hanks10100/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hanks10100/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2017-01-19T10:00:23Z",
      "updated_at": "2017-01-19T10:00:23Z",
      "body": "（如果你写的是 Vue 项目的话）在 Web 环境上是直接用 Vue.js 渲染的，不依赖于 Weex ，不含 Weex runtime 的代码，也就没 freeze 原型链。"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/273730584",
      "html_url": "https://github.com/alibaba/weex/issues/2334#issuecomment-273730584",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/2334",
      "id": 273730584,
      "user": {
        "login": "Hanks10100",
        "id": 8401776,
        "avatar_url": "https://avatars3.githubusercontent.com/u/8401776?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hanks10100",
        "html_url": "https://github.com/Hanks10100",
        "followers_url": "https://api.github.com/users/Hanks10100/followers",
        "following_url": "https://api.github.com/users/Hanks10100/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hanks10100/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hanks10100/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hanks10100/subscriptions",
        "organizations_url": "https://api.github.com/users/Hanks10100/orgs",
        "repos_url": "https://api.github.com/users/Hanks10100/repos",
        "events_url": "https://api.github.com/users/Hanks10100/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hanks10100/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2017-01-19T10:01:35Z",
      "updated_at": "2017-01-19T10:01:35Z",
      "body": "将来很可能也会在 `weex-vue-render` 里把原生对象的原型 freeze 起来的。"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/273733045",
      "html_url": "https://github.com/alibaba/weex/issues/2334#issuecomment-273733045",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/2334",
      "id": 273733045,
      "user": {
        "login": "Neeeo",
        "id": 3702412,
        "avatar_url": "https://avatars3.githubusercontent.com/u/3702412?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Neeeo",
        "html_url": "https://github.com/Neeeo",
        "followers_url": "https://api.github.com/users/Neeeo/followers",
        "following_url": "https://api.github.com/users/Neeeo/following{/other_user}",
        "gists_url": "https://api.github.com/users/Neeeo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Neeeo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Neeeo/subscriptions",
        "organizations_url": "https://api.github.com/users/Neeeo/orgs",
        "repos_url": "https://api.github.com/users/Neeeo/repos",
        "events_url": "https://api.github.com/users/Neeeo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Neeeo/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2017-01-19T10:12:07Z",
      "updated_at": "2017-01-19T10:12:07Z",
      "body": "顺便问一下，开 debugger 的时候，weex 对象找不到这个问题有解决办法吗？\r\nhttps://github.com/alibaba/weex/issues/2314"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/273737519",
      "html_url": "https://github.com/alibaba/weex/issues/2334#issuecomment-273737519",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/2334",
      "id": 273737519,
      "user": {
        "login": "Hanks10100",
        "id": 8401776,
        "avatar_url": "https://avatars3.githubusercontent.com/u/8401776?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hanks10100",
        "html_url": "https://github.com/Hanks10100",
        "followers_url": "https://api.github.com/users/Hanks10100/followers",
        "following_url": "https://api.github.com/users/Hanks10100/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hanks10100/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hanks10100/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hanks10100/subscriptions",
        "organizations_url": "https://api.github.com/users/Hanks10100/orgs",
        "repos_url": "https://api.github.com/users/Hanks10100/repos",
        "events_url": "https://api.github.com/users/Hanks10100/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hanks10100/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2017-01-19T10:29:35Z",
      "updated_at": "2017-01-19T10:29:35Z",
      "body": "@Neeeo 是 weex-toolkit 工具的问题，工具执行的时候会包上一层函数，没有把 weex 变量传进去，现在应该已经修掉了。"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/279983764",
      "html_url": "https://github.com/alibaba/weex/issues/2334#issuecomment-279983764",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/2334",
      "id": 279983764,
      "user": {
        "login": "dickeylth",
        "id": 2196373,
        "avatar_url": "https://avatars2.githubusercontent.com/u/2196373?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dickeylth",
        "html_url": "https://github.com/dickeylth",
        "followers_url": "https://api.github.com/users/dickeylth/followers",
        "following_url": "https://api.github.com/users/dickeylth/following{/other_user}",
        "gists_url": "https://api.github.com/users/dickeylth/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/dickeylth/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/dickeylth/subscriptions",
        "organizations_url": "https://api.github.com/users/dickeylth/orgs",
        "repos_url": "https://api.github.com/users/dickeylth/repos",
        "events_url": "https://api.github.com/users/dickeylth/events{/privacy}",
        "received_events_url": "https://api.github.com/users/dickeylth/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2017-02-15T11:13:39Z",
      "updated_at": "2017-02-15T11:13:39Z",
      "body": "@Neeeo url-parse 可以跟踪这个 pr: https://github.com/unshiftio/url-parse/pull/54"
    }
  ],
  "created_at": "2017-01-19T07:41:17Z",
  "updated_at": "2017-02-15T11:13:40Z",
  "closed_at": "2017-01-19T10:29:35Z",
  "body": "在iOS 设备上，修改类的 toString 方法会提示：\r\n\r\n> Cannot assign to read only property 'toString' of object\r\n\r\n在游览器里没这个问题。用的sdk是从 `dev` 分支下自己编译的最新版。\r\n\r\n复现代码:\r\n```vue\r\n<template>\r\n  <div class=\"wrapper\" @click=\"update\">\r\n    <image :src=\"logoUrl\" class=\"logo\"></image>\r\n    <text class=\"title\" v-if=\"!show\">Good!! {{target}}</text>\r\n    <text class=\"title\" v-else-if=\"show\">Bad!! {{target}}</text>\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n  .wrapper { align-items: center; margin-top: 120px; }\r\n  .title { font-size: 48px; }\r\n  .logo { width: 360px; height: 82px; }\r\n</style>\r\n\r\n<script>\r\n  export default {\r\n    data: {\r\n      logoUrl: 'https://alibaba.github.io/weex/img/weex_logo_blue@3x.png',\r\n      target: 'World',\r\n      show: true,\r\n    },\r\n    mounted: function() {\r\n      debugger;\r\n      var a = function() {\r\n\r\n      };\r\n      a.prototype.toString = function(){return 'hhhhhh';};\r\n    },\r\n    methods: {\r\n      update: function (e) {\r\n        this.target = 'Weex'\r\n        console.log('target:', this.target)\r\n      }\r\n    }\r\n  }\r\n</script>\r\n```"
}
