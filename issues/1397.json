{
  "url": "https://api.github.com/repos/alibaba/weex/issues/1397",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/1397/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/1397/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/1397/events",
  "html_url": "https://github.com/alibaba/weex/issues/1397",
  "id": 183200413,
  "number": 1397,
  "title": "请问除了数据绑定刷新某个组件外，还有什么办法刷新组件视图呢",
  "user": {
    "login": "cooliean",
    "id": 4754617,
    "avatar_url": "https://avatars1.githubusercontent.com/u/4754617?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cooliean",
    "html_url": "https://github.com/cooliean",
    "followers_url": "https://api.github.com/users/cooliean/followers",
    "following_url": "https://api.github.com/users/cooliean/following{/other_user}",
    "gists_url": "https://api.github.com/users/cooliean/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cooliean/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cooliean/subscriptions",
    "organizations_url": "https://api.github.com/users/cooliean/orgs",
    "repos_url": "https://api.github.com/users/cooliean/repos",
    "events_url": "https://api.github.com/users/cooliean/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cooliean/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": [
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/253982007",
      "html_url": "https://github.com/alibaba/weex/issues/1397#issuecomment-253982007",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1397",
      "id": 253982007,
      "user": {
        "login": "Hanks10100",
        "id": 8401776,
        "avatar_url": "https://avatars3.githubusercontent.com/u/8401776?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hanks10100",
        "html_url": "https://github.com/Hanks10100",
        "followers_url": "https://api.github.com/users/Hanks10100/followers",
        "following_url": "https://api.github.com/users/Hanks10100/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hanks10100/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hanks10100/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hanks10100/subscriptions",
        "organizations_url": "https://api.github.com/users/Hanks10100/orgs",
        "repos_url": "https://api.github.com/users/Hanks10100/repos",
        "events_url": "https://api.github.com/users/Hanks10100/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hanks10100/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-10-15T12:41:48Z",
      "updated_at": "2016-10-15T12:41:48Z",
      "body": "能否再介绍一些这种需求的应用场景？如果数据没有更新，为什么还要更新视图呢？\n\n如果是想更改组件的样式和属性，可以在样式和属性中添加数据绑定：\n\n``` html\n<template>\n  <div class=\"{{rootClass}}\">\n    <image src=\"{{imageSource}}\"></image>\n  </div>\n</template>\n\n<style>\n  .rootA {\n    background-color: #F0F0F0;\n  }\n  .rootB {\n    background-color: #666;\n  }\n</style>\n\n<script>\n  module.exports = {\n    data: {\n      rootClass: 'rootA',\n      imageSource: 'image.png'\n    }\n  }\n</script>\n```\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/254145303",
      "html_url": "https://github.com/alibaba/weex/issues/1397#issuecomment-254145303",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1397",
      "id": 254145303,
      "user": {
        "login": "cooliean",
        "id": 4754617,
        "avatar_url": "https://avatars1.githubusercontent.com/u/4754617?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/cooliean",
        "html_url": "https://github.com/cooliean",
        "followers_url": "https://api.github.com/users/cooliean/followers",
        "following_url": "https://api.github.com/users/cooliean/following{/other_user}",
        "gists_url": "https://api.github.com/users/cooliean/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/cooliean/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/cooliean/subscriptions",
        "organizations_url": "https://api.github.com/users/cooliean/orgs",
        "repos_url": "https://api.github.com/users/cooliean/repos",
        "events_url": "https://api.github.com/users/cooliean/events{/privacy}",
        "received_events_url": "https://api.github.com/users/cooliean/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-10-17T08:31:41Z",
      "updated_at": "2016-10-17T12:16:03Z",
      "body": "@Hanks10100\n我想做一个可以解析HTML的IOS 组件。\n我html数据中有图片，所以加载有延迟，加载完后，要高度自适应。\n是这样的，我自己写了一个html显示的组件，我想这个组件可以根据我html的内容来动态的高度，现在已经已经实现了，但是高度算出来了以后，高度是在OC里面获取的。然后我在oc也已经更新了frame了。we中高度更新了,这样我一个视图是没有问题的。如果连续两个我的自定义组件，竖向排列，下面的那个就会覆盖在上面那个上面，他们的坐标是我最开始的原始高度的坐标。我如果通过finishload中的this.htmlHeight = e.height; 修改一下高度，视图刷新了，界面就OK了，但是我现在就是不想要手动再区设置或者调用this.htmlHeight = e.height;我想这个组件更加的智能，我想直接在OC那边就实现了更新，这样就不用在回调里面再设置了，方便点使用，我想这个刷新能不能用其它方式来弄，还是我哪里没有做好。谢谢了，不知道我描述的清楚不\n\n``` javascript\n<template>\n  <div class=\"{{rootClass}}\">\n    <htmlview style=\"height:{{htmlHeight}}\" onpagefinish=\"finishload\"></htmlview>\n  </div>\n</template>\nmodule.exports = {\n        data: {\n          htmlHeight: 32,\n          color: '#ff0000'\n        },\n        methods: {\n            finishload: function(e) {//在e中我返回了OC中计算的高度。\n                this.htmlHeight = e.height;\n            }\n        }\n    }\n```\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/254414141",
      "html_url": "https://github.com/alibaba/weex/issues/1397#issuecomment-254414141",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1397",
      "id": 254414141,
      "user": {
        "login": "cooliean",
        "id": 4754617,
        "avatar_url": "https://avatars1.githubusercontent.com/u/4754617?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/cooliean",
        "html_url": "https://github.com/cooliean",
        "followers_url": "https://api.github.com/users/cooliean/followers",
        "following_url": "https://api.github.com/users/cooliean/following{/other_user}",
        "gists_url": "https://api.github.com/users/cooliean/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/cooliean/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/cooliean/subscriptions",
        "organizations_url": "https://api.github.com/users/cooliean/orgs",
        "repos_url": "https://api.github.com/users/cooliean/repos",
        "events_url": "https://api.github.com/users/cooliean/events{/privacy}",
        "received_events_url": "https://api.github.com/users/cooliean/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-10-18T05:57:01Z",
      "updated_at": "2016-10-18T05:58:03Z",
      "body": "看了一下源码，照到一个更新属性的方法：\n\n``` objc\n        [self performBlockOnComponentMananger:^(WXComponentManager *manager) {\n            [manager updateStyles:@{@\"height\" : @(heightV)} forComponent:weakSelf.ref];\n        }];\n\n```\n\n这样就可以手动的促发视图的样式变化，就可以动态高度了。\n\n这样我就不用在finishload 中，让使用者再设置一下高度了。\n"
    }
  ],
  "created_at": "2016-10-15T09:49:33Z",
  "updated_at": "2016-10-23T02:31:16Z",
  "closed_at": "2016-10-23T02:31:16Z",
  "body": "IOS 端\n`\n[self fireEvent:@\"pagefinish\" params:data domChanges:@{\n                                                               @\"attrs\": @{@\"src\":@\"cooliean\"},\n                                                               @\"style\" : @{@\"height\":@(heightV)}\n                                                               }];\n`\n比如这样的方法，通过回调修改了组件的样式，或者属性，怎么自动刷新呢。\n谢谢了\n"
}
