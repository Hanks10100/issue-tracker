{
  "url": "https://api.github.com/repos/alibaba/weex/issues/1197",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/1197/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/1197/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/1197/events",
  "html_url": "https://github.com/alibaba/weex/issues/1197",
  "id": 176165279,
  "number": 1197,
  "title": "在tabbar-demo.we中，关于item中src路径的问题",
  "user": {
    "login": "emptywalker",
    "id": 12522809,
    "avatar_url": "https://avatars0.githubusercontent.com/u/12522809?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/emptywalker",
    "html_url": "https://github.com/emptywalker",
    "followers_url": "https://api.github.com/users/emptywalker/followers",
    "following_url": "https://api.github.com/users/emptywalker/following{/other_user}",
    "gists_url": "https://api.github.com/users/emptywalker/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/emptywalker/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/emptywalker/subscriptions",
    "organizations_url": "https://api.github.com/users/emptywalker/orgs",
    "repos_url": "https://api.github.com/users/emptywalker/repos",
    "events_url": "https://api.github.com/users/emptywalker/events{/privacy}",
    "received_events_url": "https://api.github.com/users/emptywalker/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": [
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/246097197",
      "html_url": "https://github.com/alibaba/weex/issues/1197#issuecomment-246097197",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1197",
      "id": 246097197,
      "user": {
        "login": "luics",
        "id": 1018815,
        "avatar_url": "https://avatars0.githubusercontent.com/u/1018815?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luics",
        "html_url": "https://github.com/luics",
        "followers_url": "https://api.github.com/users/luics/followers",
        "following_url": "https://api.github.com/users/luics/following{/other_user}",
        "gists_url": "https://api.github.com/users/luics/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/luics/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/luics/subscriptions",
        "organizations_url": "https://api.github.com/users/luics/orgs",
        "repos_url": "https://api.github.com/users/luics/repos",
        "events_url": "https://api.github.com/users/luics/events{/privacy}",
        "received_events_url": "https://api.github.com/users/luics/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-09-10T07:31:26Z",
      "updated_at": "2016-09-10T07:31:26Z",
      "body": "这个 issue 在推进 path #497 \n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/246097445",
      "html_url": "https://github.com/alibaba/weex/issues/1197#issuecomment-246097445",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1197",
      "id": 246097445,
      "user": {
        "login": "emptywalker",
        "id": 12522809,
        "avatar_url": "https://avatars0.githubusercontent.com/u/12522809?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/emptywalker",
        "html_url": "https://github.com/emptywalker",
        "followers_url": "https://api.github.com/users/emptywalker/followers",
        "following_url": "https://api.github.com/users/emptywalker/following{/other_user}",
        "gists_url": "https://api.github.com/users/emptywalker/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/emptywalker/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/emptywalker/subscriptions",
        "organizations_url": "https://api.github.com/users/emptywalker/orgs",
        "repos_url": "https://api.github.com/users/emptywalker/repos",
        "events_url": "https://api.github.com/users/emptywalker/events{/privacy}",
        "received_events_url": "https://api.github.com/users/emptywalker/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-09-10T07:37:47Z",
      "updated_at": "2016-09-10T07:37:47Z",
      "body": "@luics    这个算是他本身存在的问题吗？ 表示真的是找的好辛苦哈，希望可以得到比较好改善\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/246099304",
      "html_url": "https://github.com/alibaba/weex/issues/1197#issuecomment-246099304",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1197",
      "id": 246099304,
      "user": {
        "login": "emptywalker",
        "id": 12522809,
        "avatar_url": "https://avatars0.githubusercontent.com/u/12522809?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/emptywalker",
        "html_url": "https://github.com/emptywalker",
        "followers_url": "https://api.github.com/users/emptywalker/followers",
        "following_url": "https://api.github.com/users/emptywalker/following{/other_user}",
        "gists_url": "https://api.github.com/users/emptywalker/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/emptywalker/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/emptywalker/subscriptions",
        "organizations_url": "https://api.github.com/users/emptywalker/orgs",
        "repos_url": "https://api.github.com/users/emptywalker/repos",
        "events_url": "https://api.github.com/users/emptywalker/events{/privacy}",
        "received_events_url": "https://api.github.com/users/emptywalker/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-09-10T08:24:07Z",
      "updated_at": "2016-09-10T08:24:07Z",
      "body": "表示尴尬了，一开始我将下面的这个created方法注释了，所以path3才会不显示的，我把这个函数打开后台，发现之前的路径是没问题的。这个方法对三端的路径做了兼容哈\n\n```\ncreated: function() {\n        var bundleUrl = this.$getConfig().bundleUrl;\n        console.log('hit', bundleUrl);\n        var nativeBase;\n        var isAndroidAssets = bundleUrl.indexOf('file://assets/') >= 0;\n        var isiOSAssets = bundleUrl.indexOf('file:///') >= 0 && bundleUrl.indexOf('WeexDemo.app') > 0;\n        if (isAndroidAssets) {\n          nativeBase = 'file://assets/';\n        }\n        else if (isiOSAssets) {\n          // file:///var/mobile/Containers/Bundle/Application/{id}/WeexDemo.app/\n          // file:///Users/{user}/Library/Developer/CoreSimulator/Devices/{id}/data/Containers/Bundle/Application/{id}/WeexDemo.app/\n          nativeBase = bundleUrl.substring(0, bundleUrl.lastIndexOf('/') + 1);\n        }\n        else {\n          var host = 'localhost:12580';\n          var matches = /\\/\\/([^\\/]+?)\\//.exec(this.$getConfig().bundleUrl);\n          if (matches && matches.length >= 2) {\n            host = matches[1];\n          }\n          nativeBase = 'http://' + host + '/' + this.dir + '/build/';\n        }\n        var h5Base = './' + this.dir + '/build/';\n        // in Native\n        var base = nativeBase;\n        if (typeof window === 'object') {\n          // in Browser or WebView\n          base = h5Base;\n        }\n\n        for(var i = 0; i < this.tabItems.length; i++) {\n            var tabItem = this.tabItems[i];\n            tabItem.src = base + tabItem.src;\n        }\n        // see log in Android Logcat\n        //if (this.items.length) console.log('hit', this.items[0].url);\n    },\n```\n\n表示对自己没话说哈\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/246099760",
      "html_url": "https://github.com/alibaba/weex/issues/1197#issuecomment-246099760",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1197",
      "id": 246099760,
      "user": {
        "login": "luics",
        "id": 1018815,
        "avatar_url": "https://avatars0.githubusercontent.com/u/1018815?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luics",
        "html_url": "https://github.com/luics",
        "followers_url": "https://api.github.com/users/luics/followers",
        "following_url": "https://api.github.com/users/luics/following{/other_user}",
        "gists_url": "https://api.github.com/users/luics/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/luics/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/luics/subscriptions",
        "organizations_url": "https://api.github.com/users/luics/orgs",
        "repos_url": "https://api.github.com/users/luics/repos",
        "events_url": "https://api.github.com/users/luics/events{/privacy}",
        "received_events_url": "https://api.github.com/users/luics/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-09-10T08:33:33Z",
      "updated_at": "2016-09-10T08:33:33Z",
      "body": "这个方法最初就是为了兼容 ios 打包、ios 连 server \n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/246102086",
      "html_url": "https://github.com/alibaba/weex/issues/1197#issuecomment-246102086",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1197",
      "id": 246102086,
      "user": {
        "login": "emptywalker",
        "id": 12522809,
        "avatar_url": "https://avatars0.githubusercontent.com/u/12522809?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/emptywalker",
        "html_url": "https://github.com/emptywalker",
        "followers_url": "https://api.github.com/users/emptywalker/followers",
        "following_url": "https://api.github.com/users/emptywalker/following{/other_user}",
        "gists_url": "https://api.github.com/users/emptywalker/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/emptywalker/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/emptywalker/subscriptions",
        "organizations_url": "https://api.github.com/users/emptywalker/orgs",
        "repos_url": "https://api.github.com/users/emptywalker/repos",
        "events_url": "https://api.github.com/users/emptywalker/events{/privacy}",
        "received_events_url": "https://api.github.com/users/emptywalker/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-09-10T09:31:37Z",
      "updated_at": "2016-09-10T09:31:37Z",
      "body": "表示从iOS转到这个，看这些还有点吃力 @luics \n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/246233833",
      "html_url": "https://github.com/alibaba/weex/issues/1197#issuecomment-246233833",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1197",
      "id": 246233833,
      "user": {
        "login": "luics",
        "id": 1018815,
        "avatar_url": "https://avatars0.githubusercontent.com/u/1018815?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luics",
        "html_url": "https://github.com/luics",
        "followers_url": "https://api.github.com/users/luics/followers",
        "following_url": "https://api.github.com/users/luics/following{/other_user}",
        "gists_url": "https://api.github.com/users/luics/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/luics/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/luics/subscriptions",
        "organizations_url": "https://api.github.com/users/luics/orgs",
        "repos_url": "https://api.github.com/users/luics/repos",
        "events_url": "https://api.github.com/users/luics/events{/privacy}",
        "received_events_url": "https://api.github.com/users/luics/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-09-12T03:09:38Z",
      "updated_at": "2016-09-12T03:09:38Z",
      "body": "@emptywalker 有道理，应该更简化逻辑， 后续关注 #497 ，这个先关了\n"
    }
  ],
  "created_at": "2016-09-10T07:30:06Z",
  "updated_at": "2016-09-12T03:09:38Z",
  "closed_at": "2016-09-12T03:09:38Z",
  "body": "## 准备\n\n我是在weex正式版0.7版本中的examples直接修改的index.we文件，然后将[tabbar-demo.we](https://github.com/alibaba/weex/blob/dev/examples/component/tabbar/tabbar-demo.we)文件中的代码覆盖了index.we文件，并且注释了created函数，因为没明白（尴尬），然后发现不影响UI的效果。\n## 问题\n\n当我修改后，先用`npm run build`，然后启动 `./start`，发现所有的item中src页面都是`404 Not Found`. 并且我把第一个界面的路径换成我自己写的文件，结果也是404.\n## 解决方法\n\n经过了很多次的折腾，我达到了我要的效果，解决方法如图。\n![image](https://cloud.githubusercontent.com/assets/12522809/18408722/ae449824-7769-11e6-940d-c7f23feae5d8.png)\n## 疑问？？？\n\n对比一下上面三个path， 1和2是经过修改的，能够加载成功，3源码中的，是`404 Not Found` \n### 问题1：\n\npath1：是我自己添加的文件路径，看源码中，在启动整个项目的服务后，只要写一个相对路径就OK了，应该是`Modules/HomePage/HomePage.js`这样，但实际上这样是404，加上`examples/`后才能正常显示。\n好奇为什么加`examples/`，并且加上算是一个绝对路径吗？\n### 问题2：\n\npath2中，是我修改源码的路径去达到能够显示的效果， 对比可以发现一个很奇怪的问题，它不但加了`examples/`,还需要加上build路径才能显示，`examples/build/component/tabbar/tabbar-item.js?itemId=tab2`这条路径是准确定位到js文件的。\n奇怪的地方就是为什么path2需要build路径，但path1不需要？？？\n### 求解哈，-_-\n",
  "closed_by": {
    "login": "luics",
    "id": 1018815,
    "avatar_url": "https://avatars0.githubusercontent.com/u/1018815?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/luics",
    "html_url": "https://github.com/luics",
    "followers_url": "https://api.github.com/users/luics/followers",
    "following_url": "https://api.github.com/users/luics/following{/other_user}",
    "gists_url": "https://api.github.com/users/luics/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/luics/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/luics/subscriptions",
    "organizations_url": "https://api.github.com/users/luics/orgs",
    "repos_url": "https://api.github.com/users/luics/repos",
    "events_url": "https://api.github.com/users/luics/events{/privacy}",
    "received_events_url": "https://api.github.com/users/luics/received_events",
    "type": "User",
    "site_admin": false
  }
}
