{
  "url": "https://api.github.com/repos/alibaba/weex/issues/1500",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/1500/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/1500/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/1500/events",
  "html_url": "https://github.com/alibaba/weex/issues/1500",
  "id": 185008610,
  "number": 1500,
  "title": "Android  weex版本 0.7升级至0.8 图片请求桥接出现问题",
  "user": {
    "login": "YanyeZhang",
    "id": 8480050,
    "avatar_url": "https://avatars0.githubusercontent.com/u/8480050?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/YanyeZhang",
    "html_url": "https://github.com/YanyeZhang",
    "followers_url": "https://api.github.com/users/YanyeZhang/followers",
    "following_url": "https://api.github.com/users/YanyeZhang/following{/other_user}",
    "gists_url": "https://api.github.com/users/YanyeZhang/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/YanyeZhang/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/YanyeZhang/subscriptions",
    "organizations_url": "https://api.github.com/users/YanyeZhang/orgs",
    "repos_url": "https://api.github.com/users/YanyeZhang/repos",
    "events_url": "https://api.github.com/users/YanyeZhang/events{/privacy}",
    "received_events_url": "https://api.github.com/users/YanyeZhang/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": [
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/255951763",
      "html_url": "https://github.com/alibaba/weex/issues/1500#issuecomment-255951763",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1500",
      "id": 255951763,
      "user": {
        "login": "zshshr",
        "id": 5382962,
        "avatar_url": "https://avatars2.githubusercontent.com/u/5382962?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/zshshr",
        "html_url": "https://github.com/zshshr",
        "followers_url": "https://api.github.com/users/zshshr/followers",
        "following_url": "https://api.github.com/users/zshshr/following{/other_user}",
        "gists_url": "https://api.github.com/users/zshshr/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/zshshr/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/zshshr/subscriptions",
        "organizations_url": "https://api.github.com/users/zshshr/orgs",
        "repos_url": "https://api.github.com/users/zshshr/repos",
        "events_url": "https://api.github.com/users/zshshr/events{/privacy}",
        "received_events_url": "https://api.github.com/users/zshshr/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-10-25T06:50:46Z",
      "updated_at": "2016-10-25T06:50:46Z",
      "body": "sdk的图片库的接口没有变化，按理不会影响你们的适配代码，有没有错误日志或复现的页面，或者在我们的playground上调试一下试试 @YanyeZhang \n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/255959165",
      "html_url": "https://github.com/alibaba/weex/issues/1500#issuecomment-255959165",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1500",
      "id": 255959165,
      "user": {
        "login": "YanyeZhang",
        "id": 8480050,
        "avatar_url": "https://avatars0.githubusercontent.com/u/8480050?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/YanyeZhang",
        "html_url": "https://github.com/YanyeZhang",
        "followers_url": "https://api.github.com/users/YanyeZhang/followers",
        "following_url": "https://api.github.com/users/YanyeZhang/following{/other_user}",
        "gists_url": "https://api.github.com/users/YanyeZhang/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/YanyeZhang/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/YanyeZhang/subscriptions",
        "organizations_url": "https://api.github.com/users/YanyeZhang/orgs",
        "repos_url": "https://api.github.com/users/YanyeZhang/repos",
        "events_url": "https://api.github.com/users/YanyeZhang/events{/privacy}",
        "received_events_url": "https://api.github.com/users/YanyeZhang/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-10-25T07:33:27Z",
      "updated_at": "2016-10-25T07:34:06Z",
      "body": "将以上代码改为以下就可以，具体的原因还要看下源码。\n\n``` java\n    if (result != null && result instanceof Bitmap) {\n              // imageView.setImageBitmap((Bitmap) result);\n              Drawable drawable = new BitmapDrawable(null, (Bitmap) result);\n              view.setImageDrawable(drawable);\n    }\n\n```\n\n@zshshr \n"
    }
  ],
  "created_at": "2016-10-25T03:18:18Z",
  "updated_at": "2016-10-25T07:34:06Z",
  "closed_at": "2016-10-25T07:33:27Z",
  "body": "大致的问题就是图片库 桥接之后在0.7是可以的，在0.8之后就出现问题了。\n能否说明下具体修改了什么？\n\n以下是我桥接的内容\n\n``` java\n\npublic class ImageAdapter implements IWXImgLoaderAdapter {\n    @Override\n    public void setImage(final String url, final ImageView imageView, WXImageQuality quality, final WXImageStrategy strategy) {\n        WXSDKManager.getInstance().postOnUiThread(\n                new Runnable() {\n                    @Override\n                    public void run() {\n                        if (imageView == null || imageView.getLayoutParams() == null) {\n                            return;\n                        }\n                        if (TextUtils.isEmpty(url)) {\n                            imageView.setImageBitmap(null);\n                            return;\n                        }\n                        String temp = url;\n                        if (url.startsWith(\"//\")) {\n                            temp = \"http:\" + url;\n                        }\n                        if (imageView.getLayoutParams().width <= 0 || imageView.getLayoutParams().height <= 0) {\n                            return;\n                        }\n\n                        ImageLoader.with(BeiBeiApplication.getApp()).load(temp).listener(new ImageLoaderListener() {\n                            @Override\n                            public void onLoadStarted(View view) {\n                            }\n\n                            @Override\n                            public void onLoadFailed(View view, String url, String failReason) {\n                                if (strategy != null && strategy.getImageListener() != null) {\n                                    strategy.getImageListener().onImageFinish(url, imageView, false, null);\n                                }\n                            }\n\n                            @Override\n                            public void onLoadSuccessed(View view, String url, Object result) {\n                                if (strategy != null && strategy.getImageListener() != null) {\n                                    strategy.getImageListener().onImageFinish(url, imageView, true, null);\n                                }\n                                if (result != null && result instanceof Bitmap) {\n                                    imageView.setImageBitmap((Bitmap) result);\n                                }\n                            }\n                        }).cache();\n                    }\n                }, 0);\n    }\n}\n```\n"
}
