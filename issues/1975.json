{
  "url": "https://api.github.com/repos/alibaba/weex/issues/1975",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/1975/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/1975/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/1975/events",
  "html_url": "https://github.com/alibaba/weex/issues/1975",
  "id": 196875498,
  "number": 1975,
  "title": "list组件加载更多数据完成后，滚动位置错误回弹导致交互流程不顺畅",
  "user": {
    "login": "and80506",
    "id": 1769410,
    "avatar_url": "https://avatars2.githubusercontent.com/u/1769410?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/and80506",
    "html_url": "https://github.com/and80506",
    "followers_url": "https://api.github.com/users/and80506/followers",
    "following_url": "https://api.github.com/users/and80506/following{/other_user}",
    "gists_url": "https://api.github.com/users/and80506/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/and80506/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/and80506/subscriptions",
    "organizations_url": "https://api.github.com/users/and80506/orgs",
    "repos_url": "https://api.github.com/users/and80506/repos",
    "events_url": "https://api.github.com/users/and80506/events{/privacy}",
    "received_events_url": "https://api.github.com/users/and80506/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "cxfeng1",
    "id": 1625893,
    "avatar_url": "https://avatars2.githubusercontent.com/u/1625893?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/cxfeng1",
    "html_url": "https://github.com/cxfeng1",
    "followers_url": "https://api.github.com/users/cxfeng1/followers",
    "following_url": "https://api.github.com/users/cxfeng1/following{/other_user}",
    "gists_url": "https://api.github.com/users/cxfeng1/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/cxfeng1/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/cxfeng1/subscriptions",
    "organizations_url": "https://api.github.com/users/cxfeng1/orgs",
    "repos_url": "https://api.github.com/users/cxfeng1/repos",
    "events_url": "https://api.github.com/users/cxfeng1/events{/privacy}",
    "received_events_url": "https://api.github.com/users/cxfeng1/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "cxfeng1",
      "id": 1625893,
      "avatar_url": "https://avatars2.githubusercontent.com/u/1625893?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cxfeng1",
      "html_url": "https://github.com/cxfeng1",
      "followers_url": "https://api.github.com/users/cxfeng1/followers",
      "following_url": "https://api.github.com/users/cxfeng1/following{/other_user}",
      "gists_url": "https://api.github.com/users/cxfeng1/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cxfeng1/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cxfeng1/subscriptions",
      "organizations_url": "https://api.github.com/users/cxfeng1/orgs",
      "repos_url": "https://api.github.com/users/cxfeng1/repos",
      "events_url": "https://api.github.com/users/cxfeng1/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cxfeng1/received_events",
      "type": "User",
      "site_admin": false
    },
    {
      "login": "acton393",
      "id": 11631084,
      "avatar_url": "https://avatars1.githubusercontent.com/u/11631084?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/acton393",
      "html_url": "https://github.com/acton393",
      "followers_url": "https://api.github.com/users/acton393/followers",
      "following_url": "https://api.github.com/users/acton393/following{/other_user}",
      "gists_url": "https://api.github.com/users/acton393/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/acton393/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/acton393/subscriptions",
      "organizations_url": "https://api.github.com/users/acton393/orgs",
      "repos_url": "https://api.github.com/users/acton393/repos",
      "events_url": "https://api.github.com/users/acton393/events{/privacy}",
      "received_events_url": "https://api.github.com/users/acton393/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": [
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/269066005",
      "html_url": "https://github.com/alibaba/weex/issues/1975#issuecomment-269066005",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1975",
      "id": 269066005,
      "user": {
        "login": "acton393",
        "id": 11631084,
        "avatar_url": "https://avatars1.githubusercontent.com/u/11631084?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/acton393",
        "html_url": "https://github.com/acton393",
        "followers_url": "https://api.github.com/users/acton393/followers",
        "following_url": "https://api.github.com/users/acton393/following{/other_user}",
        "gists_url": "https://api.github.com/users/acton393/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/acton393/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/acton393/subscriptions",
        "organizations_url": "https://api.github.com/users/acton393/orgs",
        "repos_url": "https://api.github.com/users/acton393/repos",
        "events_url": "https://api.github.com/users/acton393/events{/privacy}",
        "received_events_url": "https://api.github.com/users/acton393/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-12-24T03:06:15Z",
      "updated_at": "2016-12-24T03:06:15Z",
      "body": "@and80506  这个是已知问题，想办法优化中"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/274314928",
      "html_url": "https://github.com/alibaba/weex/issues/1975#issuecomment-274314928",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1975",
      "id": 274314928,
      "user": {
        "login": "acton393",
        "id": 11631084,
        "avatar_url": "https://avatars1.githubusercontent.com/u/11631084?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/acton393",
        "html_url": "https://github.com/acton393",
        "followers_url": "https://api.github.com/users/acton393/followers",
        "following_url": "https://api.github.com/users/acton393/following{/other_user}",
        "gists_url": "https://api.github.com/users/acton393/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/acton393/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/acton393/subscriptions",
        "organizations_url": "https://api.github.com/users/acton393/orgs",
        "repos_url": "https://api.github.com/users/acton393/repos",
        "events_url": "https://api.github.com/users/acton393/events{/privacy}",
        "received_events_url": "https://api.github.com/users/acton393/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2017-01-22T07:40:09Z",
      "updated_at": "2017-01-22T07:40:09Z",
      "body": "#1896 "
    }
  ],
  "created_at": "2016-12-21T08:40:56Z",
  "updated_at": "2017-01-22T07:40:09Z",
  "closed_at": "2017-01-22T07:40:09Z",
  "body": "现象描述：\r\nplayground的demo中， list组件下拉加载完成后，设置loading_display为hide，导致滚动位置错误回弹到下拉前的位置。\r\n预期结果应该是滚动条停留在下拉结束时的位置，滚动位置回弹导致交互流程不顺畅。\r\n![img_2980](https://cloud.githubusercontent.com/assets/1769410/21382346/325a9e34-c79b-11e6-89c0-94bc44664715.PNG)\r\n\r\ndemo中的代码:\r\n```html\r\n<template>\r\n  <scroller class=\"list\" append＝\"tree\">\r\n\r\n    <refresh class=\"refresh-view\" display=\"{{refresh_display}}\" onrefresh=\"onrefresh\">\r\n      <loading-indicator class=\"indicator\" ></loading-indicator>\r\n      <text class=\"refresh-arrow\" style=\"text-align: center; color:rgb(238, 162, 54)\" if=\"{{(refresh_display==='hide')}}\">Pull To Refresh</text>\r\n    </refresh>\r\n\r\n    <div class=\"section\" repeat=\"{{sections}}\">\r\n      <div class=\"header\">\r\n        <text class=\"header-title\">{{title}}</text>\r\n      </div>\r\n      <div class=\"item\" repeat=\"{{items}}\">\r\n        <text class=\"item-title\">row {{id}}</text>\r\n      </div>\r\n    </div>\r\n\r\n    <loading class=\"loading-view\" display=\"{{loading_display}}\" onloading=\"onloading\">\r\n      <loading-indicator class=\"indicator\" ></loading-indicator>\r\n    </loading>\r\n\r\n  </scroller>\r\n</template>\r\n\r\n<style>\r\n  .refresh-view {\r\n    height: 120px;\r\n    width: 750px;\r\n    display: -ms-flex;\r\n    display: -webkit-flex;\r\n    display: flex;\r\n    -ms-flex-align: center;\r\n    -webkit-align-items: center;\r\n    -webkit-box-align: center;\r\n    align-items: center;\r\n  }\r\n\r\n  .refresh-arrow {\r\n    font-size: 30px;\r\n    color: #45b5f0;\r\n  }\r\n\r\n  .loading-view {\r\n    width: 750;\r\n    height: 100;\r\n    display: -ms-flex;\r\n    display: -webkit-flex;\r\n    display: flex;\r\n    -ms-flex-align: center;\r\n    -webkit-align-items: center;\r\n    -webkit-box-align: center;\r\n    align-items: center;\r\n  }\r\n\r\n  .indicator {\r\n    height: 60;\r\n    width: 60;\r\n    color: #889967;\r\n  }\r\n\r\n  .header {\r\n    background-color: #45b5f0;\r\n    padding: 20px;\r\n    height: 88px;\r\n    justify-content: center;\r\n  }\r\n\r\n  .header-title {\r\n    color: white;\r\n    font-weight: bold;\r\n  }\r\n\r\n  .item {\r\n    justify-content: center;\r\n    border-bottom-width: 2px;\r\n    border-bottom-color: #c0c0c0;\r\n    height: 100px;\r\n    padding: 20px;\r\n  }\r\n\r\n  .item-title {\r\n  }\r\n\r\n</style>\r\n\r\n<script>\r\n  require('weex-components');\r\n  module.exports = {\r\n    methods: {\r\n      onrefresh: function(e) {\r\n        var self = this;\r\n        self.refresh_display = 'show';\r\n        self.$call('modal', 'toast', {\r\n          'message': 'onrefresh'\r\n        });\r\n        this.$call('timer', 'setTimeout', function() {\r\n          self.refresh_display = 'hide';\r\n        }, 3000);\r\n      },\r\n      onloading: function(e) {\r\n        var self = this;\r\n        self.loading_display = 'show';\r\n        self.$call('modal', 'toast', {\r\n          'message': 'onloading'\r\n        });\r\n        this.$call('timer', 'setTimeout', function() {\r\n          if (self.sections.length <= 6) {\r\n            self.sections.push(self.moreSections[self.sections.length - 2]);\r\n          }\r\n          self.loading_display = 'hide';\r\n        }, 3000);\r\n      }\r\n    },\r\n    data: {\r\n      refresh_display: 'hide',\r\n      loading_display: 'hide',\r\n      sections: [\r\n        {\r\n          title: 'Header 1',\r\n          items: [\r\n            {id: 1},\r\n            {id: 2},\r\n            {id: 3},\r\n            {id: 4},\r\n            {id: 5}\r\n          ]\r\n        },\r\n        {\r\n          title: 'Header 2',\r\n          items: [\r\n            {id: 6},\r\n            {id: 7},\r\n            {id: 8},\r\n            {id: 9},\r\n            {id: 10},\r\n            {id: 11}\r\n          ]\r\n        }\r\n      ],\r\n      moreSections: [\r\n        {\r\n          title: 'Header 3',\r\n          items: [\r\n            {id: 12},\r\n            {id: 13},\r\n            {id: 14},\r\n            {id: 15},\r\n            {id: 16},\r\n            {id: 17},\r\n            {id: 18}\r\n          ]\r\n        },\r\n        {\r\n          title: 'Header 4',\r\n          items: [\r\n            {id: 19},\r\n            {id: 20},\r\n            {id: 21},\r\n            {id: 22}\r\n          ]\r\n        },\r\n        {\r\n          title: 'Header 5',\r\n          items: [\r\n            {id: 23},\r\n            {id: 24},\r\n            {id: 25},\r\n            {id: 26},\r\n            {id: 27}\r\n          ]\r\n        },\r\n        {\r\n          title: 'Header 6',\r\n          items: [\r\n            {id: 28},\r\n            {id: 29},\r\n            {id: 30},\r\n            {id: 31},\r\n            {id: 32}\r\n          ]\r\n        },\r\n      ]\r\n    },\r\n  }\r\n</script>\r\n```\r\n\r\n预期结果：\r\n![img_2982](https://cloud.githubusercontent.com/assets/1769410/21382357/39d66364-c79b-11e6-88d5-869f6159c7d7.PNG)\r\n\r\n\r\n实际结果：\r\n![img_2981](https://cloud.githubusercontent.com/assets/1769410/21382365/42ed91de-c79b-11e6-8757-09713b391aea.PNG)\r\n\r\n\r\n建议：\r\nonloading事件触发时记住滚动位置p1，onloading事件结束时设置滚动位置为p1位置。"
}
