{
  "url": "https://api.github.com/repos/alibaba/weex/issues/1387",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/1387/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/1387/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/1387/events",
  "html_url": "https://github.com/alibaba/weex/issues/1387",
  "id": 182457563,
  "number": 1387,
  "title": "Q: how to pass a function prop to custom component",
  "user": {
    "login": "magicdawn",
    "id": 4067115,
    "avatar_url": "https://avatars0.githubusercontent.com/u/4067115?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/magicdawn",
    "html_url": "https://github.com/magicdawn",
    "followers_url": "https://api.github.com/users/magicdawn/followers",
    "following_url": "https://api.github.com/users/magicdawn/following{/other_user}",
    "gists_url": "https://api.github.com/users/magicdawn/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/magicdawn/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/magicdawn/subscriptions",
    "organizations_url": "https://api.github.com/users/magicdawn/orgs",
    "repos_url": "https://api.github.com/users/magicdawn/repos",
    "events_url": "https://api.github.com/users/magicdawn/events{/privacy}",
    "received_events_url": "https://api.github.com/users/magicdawn/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "Hanks10100",
    "id": 8401776,
    "avatar_url": "https://avatars3.githubusercontent.com/u/8401776?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Hanks10100",
    "html_url": "https://github.com/Hanks10100",
    "followers_url": "https://api.github.com/users/Hanks10100/followers",
    "following_url": "https://api.github.com/users/Hanks10100/following{/other_user}",
    "gists_url": "https://api.github.com/users/Hanks10100/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Hanks10100/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Hanks10100/subscriptions",
    "organizations_url": "https://api.github.com/users/Hanks10100/orgs",
    "repos_url": "https://api.github.com/users/Hanks10100/repos",
    "events_url": "https://api.github.com/users/Hanks10100/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Hanks10100/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "Hanks10100",
      "id": 8401776,
      "avatar_url": "https://avatars3.githubusercontent.com/u/8401776?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Hanks10100",
      "html_url": "https://github.com/Hanks10100",
      "followers_url": "https://api.github.com/users/Hanks10100/followers",
      "following_url": "https://api.github.com/users/Hanks10100/following{/other_user}",
      "gists_url": "https://api.github.com/users/Hanks10100/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Hanks10100/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Hanks10100/subscriptions",
      "organizations_url": "https://api.github.com/users/Hanks10100/orgs",
      "repos_url": "https://api.github.com/users/Hanks10100/repos",
      "events_url": "https://api.github.com/users/Hanks10100/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Hanks10100/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": [
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/253154614",
      "html_url": "https://github.com/alibaba/weex/issues/1387#issuecomment-253154614",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1387",
      "id": 253154614,
      "user": {
        "login": "jinyue-rdj",
        "id": 19581634,
        "avatar_url": "https://avatars3.githubusercontent.com/u/19581634?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jinyue-rdj",
        "html_url": "https://github.com/jinyue-rdj",
        "followers_url": "https://api.github.com/users/jinyue-rdj/followers",
        "following_url": "https://api.github.com/users/jinyue-rdj/following{/other_user}",
        "gists_url": "https://api.github.com/users/jinyue-rdj/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jinyue-rdj/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jinyue-rdj/subscriptions",
        "organizations_url": "https://api.github.com/users/jinyue-rdj/orgs",
        "repos_url": "https://api.github.com/users/jinyue-rdj/repos",
        "events_url": "https://api.github.com/users/jinyue-rdj/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jinyue-rdj/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-10-12T08:44:52Z",
      "updated_at": "2016-10-12T08:44:52Z",
      "body": "@Hanks10100 请门柳看一下\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/253174998",
      "html_url": "https://github.com/alibaba/weex/issues/1387#issuecomment-253174998",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1387",
      "id": 253174998,
      "user": {
        "login": "Hanks10100",
        "id": 8401776,
        "avatar_url": "https://avatars3.githubusercontent.com/u/8401776?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hanks10100",
        "html_url": "https://github.com/Hanks10100",
        "followers_url": "https://api.github.com/users/Hanks10100/followers",
        "following_url": "https://api.github.com/users/Hanks10100/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hanks10100/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hanks10100/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hanks10100/subscriptions",
        "organizations_url": "https://api.github.com/users/Hanks10100/orgs",
        "repos_url": "https://api.github.com/users/Hanks10100/repos",
        "events_url": "https://api.github.com/users/Hanks10100/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hanks10100/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-10-12T10:19:22Z",
      "updated_at": "2016-10-12T10:19:22Z",
      "body": "首先，dispatch 和 broadcast 可行的，如果组件间需要通信可以用这种方式。\n\n把一个组件的事件处理函数传递到另外一个组件中，这种处理是有些危险的，因为 weex 会给事件处理函数绑定 `this`，如果传递给其他组件可能会导致作用域干扰或者内存泄露。\n\n推荐的做法是定义一个公用模块，然后在多个组件中引用它。\n\n下边代码实测可以正常运行：\n\ncommon.js\n\n``` js\n// 在普通 js 文件中引入 weex module 需要用这种写法\nvar modal\n__weex_define__('@weex-temp/x', function (__weex_require__) {\n  modal = __weex_require__('@weex-module/modal')\n})\n\nfunction handleOnClick() {\n  modal.toast({\n    message: '啊哈',\n    duration: 3\n  });\n};\n\nmodule.exports = {\n  handleOnClick: handleOnClick,\n}\n```\n\nbtn.we\n\n``` html\n<template>\n  <div class=\"btn\" onclick=\"handleOnClick\">\n    <text>{{ text }}</text>\n  </div>\n</template>\n\n<style>\n  .btn{\n    color: #fff;\n    background-color: #000;\n    margin: 30px;\n    border-radius: 10px;\n    height: 100px;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n  }\n</style>\n\n<script>\n  var common = require('./common.js')\n  module.exports = {\n    methods: {\n      handleOnClick: common.handleOnClick\n    }\n  };\n</script>\n```\n\nindex.we\n\n``` html\n<template>\n  <div class=\"container\">\n    <btn text=\"{{ text }}\"></btn>\n  </div>\n</template>\n\n<script>\nmodule.exports = {\n  data: {\n    text: '点我啊啊',\n  }\n};\n</script>\n```\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/253370363",
      "html_url": "https://github.com/alibaba/weex/issues/1387#issuecomment-253370363",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1387",
      "id": 253370363,
      "user": {
        "login": "jingxin2015",
        "id": 16143766,
        "avatar_url": "https://avatars1.githubusercontent.com/u/16143766?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jingxin2015",
        "html_url": "https://github.com/jingxin2015",
        "followers_url": "https://api.github.com/users/jingxin2015/followers",
        "following_url": "https://api.github.com/users/jingxin2015/following{/other_user}",
        "gists_url": "https://api.github.com/users/jingxin2015/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jingxin2015/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jingxin2015/subscriptions",
        "organizations_url": "https://api.github.com/users/jingxin2015/orgs",
        "repos_url": "https://api.github.com/users/jingxin2015/repos",
        "events_url": "https://api.github.com/users/jingxin2015/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jingxin2015/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-10-12T23:39:04Z",
      "updated_at": "2016-10-12T23:39:04Z",
      "body": "如果仅仅是btn组件的话，我觉得内部就不需要封装click事件了，直接<btn onclick='handleOnClick'></btn>就可以啊\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/253491105",
      "html_url": "https://github.com/alibaba/weex/issues/1387#issuecomment-253491105",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1387",
      "id": 253491105,
      "user": {
        "login": "Hanks10100",
        "id": 8401776,
        "avatar_url": "https://avatars3.githubusercontent.com/u/8401776?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hanks10100",
        "html_url": "https://github.com/Hanks10100",
        "followers_url": "https://api.github.com/users/Hanks10100/followers",
        "following_url": "https://api.github.com/users/Hanks10100/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hanks10100/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hanks10100/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hanks10100/subscriptions",
        "organizations_url": "https://api.github.com/users/Hanks10100/orgs",
        "repos_url": "https://api.github.com/users/Hanks10100/repos",
        "events_url": "https://api.github.com/users/Hanks10100/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hanks10100/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-10-13T11:48:49Z",
      "updated_at": "2016-10-13T11:48:49Z",
      "body": "@jingxin2015 在多个组件中也可以通过 `require('./common.js')` 复用代码。\n"
    }
  ],
  "created_at": "2016-10-12T07:48:38Z",
  "updated_at": "2016-10-15T12:30:14Z",
  "closed_at": "2016-10-15T12:30:14Z",
  "body": "怎样给自定义组建传递一个 function 类型的 prop\n\n例如我封装了一个 btn.we\n\n``` html\n<template>\n  <div class=\"btn\" onclick=\"{{ handleOnClick }}\">\n    <text>\n      {{ text }}\n    </text>\n  </div>\n</template>\n\n<style>\n  .btn{\n    color: #fff;\n    background-color: #000;\n    margin: 30px;\n    border-radius: 10px;\n    height: 100px;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n  }\n</style>\n\n<script>\nmodule.exports = {\n  data: {\n    text: null,\n    handleOnClick: null\n  }\n};\n</script>\n```\n\n下面使用的时候\n\n``` html\n<template>\n  <div class=\"container\">\n    <btn text='{{ text }}' handleOnClick=\"{{ handleOnClick }}\"></btn>\n  </div>\n</template>\n\n<script>\nconst modal = require('@weex-module/modal');\nconst handleOnClick = () => {\n  modal.toast({\n    message: '啊哈',\n    duration: 3\n  });\n};\n\nmodule.exports = {\n  data: {\n    text: '点我啊啊',\n    handleOnClick: handleOnClick,\n  },\n  methods: {\n    handleOnClick: handleOnClick,\n  }\n};\n</script>\n```\n\n无论是写在 data 还是 methods 里, 都是不起作用的...\n难道只能通过 dispatch / broadcast 事件 ?\n"
}
