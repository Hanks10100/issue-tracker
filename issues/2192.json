{
  "url": "https://api.github.com/repos/alibaba/weex/issues/2192",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/2192/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/2192/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/2192/events",
  "html_url": "https://github.com/alibaba/weex/issues/2192",
  "id": 199737184,
  "number": 2192,
  "title": "WXSlider一直持有ViewPager中的View",
  "user": {
    "login": "bigconvience",
    "id": 1308834,
    "avatar_url": "https://avatars3.githubusercontent.com/u/1308834?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/bigconvience",
    "html_url": "https://github.com/bigconvience",
    "followers_url": "https://api.github.com/users/bigconvience/followers",
    "following_url": "https://api.github.com/users/bigconvience/following{/other_user}",
    "gists_url": "https://api.github.com/users/bigconvience/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/bigconvience/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/bigconvience/subscriptions",
    "organizations_url": "https://api.github.com/users/bigconvience/orgs",
    "repos_url": "https://api.github.com/users/bigconvience/repos",
    "events_url": "https://api.github.com/users/bigconvience/events{/privacy}",
    "received_events_url": "https://api.github.com/users/bigconvience/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": [
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/271502367",
      "html_url": "https://github.com/alibaba/weex/issues/2192#issuecomment-271502367",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/2192",
      "id": 271502367,
      "user": {
        "login": "misakuo",
        "id": 6958743,
        "avatar_url": "https://avatars3.githubusercontent.com/u/6958743?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/misakuo",
        "html_url": "https://github.com/misakuo",
        "followers_url": "https://api.github.com/users/misakuo/followers",
        "following_url": "https://api.github.com/users/misakuo/following{/other_user}",
        "gists_url": "https://api.github.com/users/misakuo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/misakuo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/misakuo/subscriptions",
        "organizations_url": "https://api.github.com/users/misakuo/orgs",
        "repos_url": "https://api.github.com/users/misakuo/repos",
        "events_url": "https://api.github.com/users/misakuo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/misakuo/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2017-01-10T07:08:29Z",
      "updated_at": "2017-01-10T07:08:29Z",
      "body": "您好，为了支持循环滚动，slider中可能出现一个View被多个position对应的情况，烦请确认这个变更会不会在item数量小于或等于3个时导致空白页面出现"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/271533886",
      "html_url": "https://github.com/alibaba/weex/issues/2192#issuecomment-271533886",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/2192",
      "id": 271533886,
      "user": {
        "login": "bigconvience",
        "id": 1308834,
        "avatar_url": "https://avatars3.githubusercontent.com/u/1308834?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bigconvience",
        "html_url": "https://github.com/bigconvience",
        "followers_url": "https://api.github.com/users/bigconvience/followers",
        "following_url": "https://api.github.com/users/bigconvience/following{/other_user}",
        "gists_url": "https://api.github.com/users/bigconvience/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/bigconvience/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/bigconvience/subscriptions",
        "organizations_url": "https://api.github.com/users/bigconvience/orgs",
        "repos_url": "https://api.github.com/users/bigconvience/repos",
        "events_url": "https://api.github.com/users/bigconvience/events{/privacy}",
        "received_events_url": "https://api.github.com/users/bigconvience/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2017-01-10T09:59:24Z",
      "updated_at": "2017-01-10T09:59:24Z",
      "body": "@misakuo  我验证了一下，确实会有这个问题。我重新修改了一下，不对第一个和最后一个View进行删除。这种修改方式会缓存5个，而不是三个：\r\n![snip20170110_16](https://cloud.githubusercontent.com/assets/1308834/21801856/63dd17f2-d75e-11e6-934b-cedad8c43d46.png)\r\n"
    }
  ],
  "created_at": "2017-01-10T05:41:21Z",
  "updated_at": "2017-01-10T09:59:24Z",
  "closed_at": null,
  "body": "<!--\r\n0. It's ***RECOMMENDED*** to [submit PR](https://github.com/alibaba/weex/pulls) for typo, new demo or tiny bugfix.\r\n0. If this's a ***BUG***, pls provide: course repetition, error/crash log, device model, OS version, App version (playground or other apps).\r\n0. If this's a ***FEATURE***, pls provide: details, pseudo codes if necessary.\r\n\r\n---\r\n\r\n（请在***提交***前删除这段描述）\r\n\r\n0. 我们***推荐***小问题直接[提 PR](https://github.com/alibaba/weex/pulls)，如错别字、新 demo 或 bugfix。\r\n0. 如果是 ***Bug***，请提供：复现步骤（推荐有截图）、error/crash log、设备型号、OS 版本、App 版本（playground 版本或自己的 app）。\r\n0. 如果是***新需求***，请提供：详细描述、应用场景、适当的伪代码（如有）。\r\n-->\r\n### 原因\r\nWXSlider会持有ViewPager中所有的View，在数据项多的情况下容易OOM。扫描[demo](http://weex.alibaba-inc.com/playground/b1f86aecebd1fea5aeeef38f2ffcfb67), 期页面层次如下所示：\r\n![snip20170110_13](https://cloud.githubusercontent.com/assets/1308834/21794994/0f144ade-d73a-11e6-8b1d-6f71fec07a04.png)\r\n\r\n### 解决方案\r\n在WXCirclePageAdapter中修改如下代码：\r\n\r\n![snip20170110_12](https://cloud.githubusercontent.com/assets/1308834/21795042/599488f8-d73a-11e6-8c31-0088e846d294.png)\r\n\r\n修改之后的页面层次如下所示：\r\n\r\n![snip20170110_14](https://cloud.githubusercontent.com/assets/1308834/21795032/4ed4fc04-d73a-11e6-9f98-8c41d0e342db.png)\r\n",
  "closed_by": null
}
