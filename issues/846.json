{
  "url": "https://api.github.com/repos/alibaba/weex/issues/846",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/846/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/846/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/846/events",
  "html_url": "https://github.com/alibaba/weex/issues/846",
  "id": 167168687,
  "number": 846,
  "title": "当repeat的数组项不为object时，$index得到undefined",
  "user": {
    "login": "whwei",
    "id": 2890565,
    "avatar_url": "https://avatars0.githubusercontent.com/u/2890565?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/whwei",
    "html_url": "https://github.com/whwei",
    "followers_url": "https://api.github.com/users/whwei/followers",
    "following_url": "https://api.github.com/users/whwei/following{/other_user}",
    "gists_url": "https://api.github.com/users/whwei/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/whwei/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/whwei/subscriptions",
    "organizations_url": "https://api.github.com/users/whwei/orgs",
    "repos_url": "https://api.github.com/users/whwei/repos",
    "events_url": "https://api.github.com/users/whwei/events{/privacy}",
    "received_events_url": "https://api.github.com/users/whwei/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 339914706,
      "url": "https://api.github.com/repos/alibaba/weex/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": [
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/236500181",
      "html_url": "https://github.com/alibaba/weex/issues/846#issuecomment-236500181",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/846",
      "id": 236500181,
      "user": {
        "login": "Hanks10100",
        "id": 8401776,
        "avatar_url": "https://avatars3.githubusercontent.com/u/8401776?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hanks10100",
        "html_url": "https://github.com/Hanks10100",
        "followers_url": "https://api.github.com/users/Hanks10100/followers",
        "following_url": "https://api.github.com/users/Hanks10100/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hanks10100/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hanks10100/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hanks10100/subscriptions",
        "organizations_url": "https://api.github.com/users/Hanks10100/orgs",
        "repos_url": "https://api.github.com/users/Hanks10100/repos",
        "events_url": "https://api.github.com/users/Hanks10100/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hanks10100/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-08-01T06:34:26Z",
      "updated_at": "2016-08-01T06:34:26Z",
      "body": "- null 报错是因为使用了 `typeof` 做类型判断，不严谨，应改为 util 中的 `isObject`。\n- `$index` 失效是因为处理非对象类型的 else 从句对应错了位置。\n\n已经提了 [PR](https://github.com/alibaba/weex/pull/919)。\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/237093392",
      "html_url": "https://github.com/alibaba/weex/issues/846#issuecomment-237093392",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/846",
      "id": 237093392,
      "user": {
        "login": "Jinjiang",
        "id": 206848,
        "avatar_url": "https://avatars2.githubusercontent.com/u/206848?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Jinjiang",
        "html_url": "https://github.com/Jinjiang",
        "followers_url": "https://api.github.com/users/Jinjiang/followers",
        "following_url": "https://api.github.com/users/Jinjiang/following{/other_user}",
        "gists_url": "https://api.github.com/users/Jinjiang/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Jinjiang/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Jinjiang/subscriptions",
        "organizations_url": "https://api.github.com/users/Jinjiang/orgs",
        "repos_url": "https://api.github.com/users/Jinjiang/repos",
        "events_url": "https://api.github.com/users/Jinjiang/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Jinjiang/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-08-03T00:29:18Z",
      "updated_at": "2016-08-03T00:29:18Z",
      "body": "Merged\n"
    }
  ],
  "created_at": "2016-07-23T05:27:26Z",
  "updated_at": "2016-08-03T00:29:18Z",
  "closed_at": "2016-08-03T00:29:18Z",
  "body": "当使用 `repeat=\"{{list}}\"` 来遍历数组时，如果数组项不是对象，`$index` 会得到 `undefined` 或报错。\n\n``` html\n<template>\n  <container>\n    <container repeat=\"{{list}}\" class=\"{{gender}}\">\n      <image src=\"{{avatar}}\"></image>\n      <text>{{id($index)}}</text>\n    </container>\n  </container>\n</template>\n\n<script>\n  module.exports = {\n    data: {\n      list: [\n        1,          // undefined   \n        '2',        // undefined\n        undefined,  // undefined\n        null,       // Uncaught TypeError: Cannot set property '$index' of null\n        false,      // undefined\n        {}\n      ]\n    },\n    methods: {\n      id: function(x) {console.log(x); return x; }\n    }\n  }\n</script>\n\n```\n\n```\n{\n   \"env\":{\n      \"weexVersion\":\"0.5.0\",\n      \"appName\":null,\n      \"appVersion\":null,\n      \"platform\":\"Web\",\n      \"osName\":\"Safari\",\n      \"osVersion\":\"9.0\",\n      \"deviceWidth\":750,\n      \"deviceHeight\":1333.3333333333333\n   },\n   \"bundleUrl\":\"http://192.168.0.103:8081/weex_tmp/h5_render/?hot-reload_controller&page=tech_list.js&loader=xhr\",\n   \"debug\":false\n}\n```\n"
}
