{
  "url": "https://api.github.com/repos/alibaba/weex/issues/1815",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/1815/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/1815/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/1815/events",
  "html_url": "https://github.com/alibaba/weex/issues/1815",
  "id": 193427384,
  "number": 1815,
  "title": "关于子组件",
  "user": {
    "login": "lmnsg",
    "id": 10400425,
    "avatar_url": "https://avatars2.githubusercontent.com/u/10400425?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/lmnsg",
    "html_url": "https://github.com/lmnsg",
    "followers_url": "https://api.github.com/users/lmnsg/followers",
    "following_url": "https://api.github.com/users/lmnsg/following{/other_user}",
    "gists_url": "https://api.github.com/users/lmnsg/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/lmnsg/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/lmnsg/subscriptions",
    "organizations_url": "https://api.github.com/users/lmnsg/orgs",
    "repos_url": "https://api.github.com/users/lmnsg/repos",
    "events_url": "https://api.github.com/users/lmnsg/events{/privacy}",
    "received_events_url": "https://api.github.com/users/lmnsg/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "id": 339914706,
      "url": "https://api.github.com/repos/alibaba/weex/labels/bug",
      "name": "bug",
      "color": "fc2929",
      "default": true
    },
    {
      "id": 550396265,
      "url": "https://api.github.com/repos/alibaba/weex/labels/legacy%20framework",
      "name": "legacy framework",
      "color": "bfd4f2",
      "default": false
    }
  ],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "fkysly",
    "id": 3274605,
    "avatar_url": "https://avatars1.githubusercontent.com/u/3274605?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/fkysly",
    "html_url": "https://github.com/fkysly",
    "followers_url": "https://api.github.com/users/fkysly/followers",
    "following_url": "https://api.github.com/users/fkysly/following{/other_user}",
    "gists_url": "https://api.github.com/users/fkysly/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/fkysly/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/fkysly/subscriptions",
    "organizations_url": "https://api.github.com/users/fkysly/orgs",
    "repos_url": "https://api.github.com/users/fkysly/repos",
    "events_url": "https://api.github.com/users/fkysly/events{/privacy}",
    "received_events_url": "https://api.github.com/users/fkysly/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "fkysly",
      "id": 3274605,
      "avatar_url": "https://avatars1.githubusercontent.com/u/3274605?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fkysly",
      "html_url": "https://github.com/fkysly",
      "followers_url": "https://api.github.com/users/fkysly/followers",
      "following_url": "https://api.github.com/users/fkysly/following{/other_user}",
      "gists_url": "https://api.github.com/users/fkysly/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fkysly/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fkysly/subscriptions",
      "organizations_url": "https://api.github.com/users/fkysly/orgs",
      "repos_url": "https://api.github.com/users/fkysly/repos",
      "events_url": "https://api.github.com/users/fkysly/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fkysly/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": [
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/266044342",
      "html_url": "https://github.com/alibaba/weex/issues/1815#issuecomment-266044342",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1815",
      "id": 266044342,
      "user": {
        "login": "Jinjiang",
        "id": 206848,
        "avatar_url": "https://avatars2.githubusercontent.com/u/206848?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Jinjiang",
        "html_url": "https://github.com/Jinjiang",
        "followers_url": "https://api.github.com/users/Jinjiang/followers",
        "following_url": "https://api.github.com/users/Jinjiang/following{/other_user}",
        "gists_url": "https://api.github.com/users/Jinjiang/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Jinjiang/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Jinjiang/subscriptions",
        "organizations_url": "https://api.github.com/users/Jinjiang/orgs",
        "repos_url": "https://api.github.com/users/Jinjiang/repos",
        "events_url": "https://api.github.com/users/Jinjiang/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Jinjiang/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-12-09T15:41:26Z",
      "updated_at": "2016-12-09T15:41:26Z",
      "body": "谢谢反馈，我周末试试看先"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/266286708",
      "html_url": "https://github.com/alibaba/weex/issues/1815#issuecomment-266286708",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1815",
      "id": 266286708,
      "user": {
        "login": "Jinjiang",
        "id": 206848,
        "avatar_url": "https://avatars2.githubusercontent.com/u/206848?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Jinjiang",
        "html_url": "https://github.com/Jinjiang",
        "followers_url": "https://api.github.com/users/Jinjiang/followers",
        "following_url": "https://api.github.com/users/Jinjiang/following{/other_user}",
        "gists_url": "https://api.github.com/users/Jinjiang/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Jinjiang/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Jinjiang/subscriptions",
        "organizations_url": "https://api.github.com/users/Jinjiang/orgs",
        "repos_url": "https://api.github.com/users/Jinjiang/repos",
        "events_url": "https://api.github.com/users/Jinjiang/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Jinjiang/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-12-11T14:55:36Z",
      "updated_at": "2016-12-11T14:55:36Z",
      "body": "`if` 里嵌套 `<content>` 确实有 bug ……\r\n我整理了一个更小的例子 http://dotwe.org/150ff2243b8c2235f7c0684e5f6c38d2\r\n@fkysly 有劳看一下"
    }
  ],
  "created_at": "2016-12-05T07:19:02Z",
  "updated_at": "2017-03-01T06:40:07Z",
  "closed_at": null,
  "body": "我在编写 modal 类组件时，尝试给子组件的 root 节点设置 if，类似在 vue 中。\r\n然后通过在父组件中通过事件 show 子组件，发现有个问题很莫名其妙，子组件的 slot 无效，即，触发 show 事件后未将 content 中的内容编译到子组件去。\r\n这是什么问题？\r\n\r\n我贴一些代码：\r\n```\r\n<style>\r\n    .dimmer {\r\n        position: fixed;\r\n        top: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        background-color: rgba(0,0,0,.4);\r\n    }\r\n    .dimmer-middle {\r\n        align-items: center;\r\n        justify-content: center;\r\n    }\r\n    .dimmer-bottom {\r\n        align-items: center;\r\n        justify-content: flex-end;\r\n    }\r\n    .modal {\r\n        overflow: hidden;\r\n    }\r\n    .modal-title {\r\n        margin-top: 50px;\r\n        height: 55px;\r\n        align-items: center;\r\n        justify-content: center;\r\n    }\r\n    .modal-title-text {\r\n        font-size: 36px;\r\n    }\r\n    .modal-content {\r\n        background-color: #fff;\r\n    }\r\n    .modal-footer {\r\n        margin-top: 10px;\r\n        height: 100px;\r\n        border-top-width: 1px;\r\n        border-top-color: #e5e5e5;\r\n        flex-direction: row;\r\n        justify-content: center;\r\n        align-items: center;\r\n    }\r\n    .btn-wrap {\r\n        margin-left: 10px;\r\n        margin-right: 10px;\r\n        flex: 1;\r\n        height: 100px;\r\n        align-items: center;\r\n        justify-content: center;\r\n        border-radius: 4px;\r\n    }\r\n    .button {\r\n        font-size: 36px;\r\n        color: #4688f5;\r\n    }\r\n    .button-cancel {\r\n        color: #b2b2b2;\r\n    }\r\n    .content-text {\r\n        margin-left: 34px;\r\n        margin-right: 34px;\r\n        text-align: center;\r\n    }\r\n</style>\r\n\r\n<template>\r\n    <div if=\"show\" id=\"dimmer\" class=\"dimmer dimmer-{{location}}\" style=\"opacity: {{opacity}}\">\r\n        <div id=\"modal\" class=\"modal\" style=\"background: {{options.background}};border-radius: {{options.radius}}; width: {{options.width}};\">\r\n            <div if=\"title\"  class=\"modal-title\" style=\"width: {{options.width}};\">\r\n                <text class=\"modal-title-text\" style=\"color: {{options.titleColor}};\">{{title}}</text>\r\n            </div>\r\n            <div class=\"modal-content\" style=\"width: {{options.width}};\">\r\n                <content></content>\r\n                <text if=\"content\" class=\"content-text\" style=\"color: {{options.color}};\">{{content}}</text>\r\n            </div>\r\n            <div if=\"{{buttonCancel || buttonOk}}\" class=\"modal-footer\">\r\n                <div if=\"buttonCancel\" class=\"btn-wrap\">\r\n                    <text onclick=\"cancel\" class=\"button button-cancel\">{{buttonCancel}}</text>\r\n                </div>\r\n                <div if=\"buttonOk\" class=\"btn-wrap\">\r\n                    <text onclick=\"ok\" class=\"button button-ok\">{{buttonOk}}</text>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {setTransition, dom} from 'libs/util'\r\n\r\n    export default {\r\n        data() {\r\n            return {\r\n            \tname: '',\r\n            \toptions: {},\r\n                content: '',\r\n                location: 'middle',\r\n                show: false,\r\n                title: '',\r\n                buttonCancel: '',\r\n                buttonOk: '',\r\n                cancelCb: '',\r\n                okCb: ''\r\n            }\r\n        },\r\n        created() {\r\n            const defaultOptions = {\r\n                background: '#ffffff',\r\n                radius: '8',\r\n                titleColor: '#3c3f45',\r\n                color: '#b2b2b2',\r\n                width: '560'\r\n            }\r\n            this.options = Object.assign(defaultOptions, this.options)\r\n        },\r\n        methods: {\r\n            cancel() {\r\n                let canCancel = true\r\n                if (this.cancelCb) {\r\n                    canCancel = this.cancelCb.call(this._parent, this) !== false\r\n                }\r\n                this.hideModal()\r\n                this.$dispatch('modal-cancel', this)\r\n            },\r\n            ok() {\r\n                if (this.okCb) this.okCb.call(this._parent, this)\r\n                this.$dispatch('modal-ok', this)\r\n            },\r\n            showModal() {\r\n            \tthis.show = true\r\n                setTimeout(() => {\r\n                    const $dimmer = this.$el('dimmer')\r\n                    setTransition.call(this, 'dimmer')\r\n                    setTransition.call(this, 'modal')\r\n                    this.opacity = 1\r\n                }, 10)\r\n            },\r\n            hideModal() {\r\n                this.opacity = 0\r\n                this.show = false\r\n            }\r\n        },\r\n        events: {\r\n        \t'modal-show'({detail = ''}) {\r\n        \t\tconsole.log(this.options);\r\n        \t\tif (detail === this.name) this.showModal()\r\n            },\r\n            'modal-hide'() {\r\n                this.hideModal()\r\n            },\r\n        },\r\n    }\r\n</script>\r\n\r\n```\r\n\r\n父组件调用\r\n```\r\n<style>\r\n    .reserve {\r\n        width: 750px;\r\n    }\r\n    .title {\r\n        height:94px;\r\n        border-bottom-width: 1px;\r\n        border-bottom-color: #e5e4e3;\r\n        justify-content: center;\r\n        align-items: center;\r\n    }\r\n    .title-text {\r\n        color: #2b2b2b;\r\n        font-size: 34px;\r\n    }\r\n    .content {\r\n        padding-left: 30px;\r\n    }\r\n    .field {\r\n        height: 114px;\r\n        flex-direction:row;\r\n        align-items: center;\r\n        justify-content: center;\r\n        border-bottom-width: 1px;\r\n        border-bottom-color: #e5e4e3;\r\n    }\r\n    .label {\r\n        font-size: 34px;\r\n        line-height: 34px;\r\n        color: #2b2b2b;\r\n    }\r\n    .input {\r\n        flex:1;\r\n        padding-left: 102px;\r\n        padding-top: 40px;\r\n        padding-bottom: 40px;\r\n        height: 113px;\r\n        line-height: 33px;\r\n        font-size: 34px;\r\n    }\r\n</style>\r\n\r\n<template>\r\n        <modal location=\"bottom\" options=\"{{options}}\" name=\"reserve\">\r\n            <div class=\"reserve\">\r\n                <div class=\"title\">\r\n                    <text class=\"title-text\">填写预约信息</text>\r\n                </div>\r\n                <div class=\"content\">\r\n                    <div class=\"field\">\r\n                        <text class=\"label\">客户姓名</text>\r\n                        <input class=\"input\" type=\"text\" placeholder=\"请输入客户姓名\">\r\n                    </div>\r\n                    <div class=\"field\">\r\n                        <text class=\"label\">预约金额</text>\r\n                        <input class=\"input\" type=\"tel\" placeholder=\"请输入预约金额\">\r\n                    </div>\r\n                </div>\r\n                <button value=\"预约\" style=\"border-radius: 0; margin-top: 100px; width: 750px; margin-left:0;\"></button>\r\n            </div>\r\n        </modal>\r\n\r\n</template>\r\n\r\n<script>\r\n    import 'components/modal.we'\r\n    import 'components/button.we'\r\n\r\n    export default {\r\n    \tdata() {\r\n    \t\treturn {\r\n    \t\t\toptions: {\r\n    \t\t\t\twidth: 750,\r\n                    radius: 0\r\n                }\r\n            }\r\n        },\r\n        ready() {\r\n    \t\t this.$broadcast('modal-show', 'reserve')\r\n        }\r\n    }\r\n</script>\r\n\r\n```",
  "closed_by": null
}
