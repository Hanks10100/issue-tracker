{
  "url": "https://api.github.com/repos/alibaba/weex/issues/1581",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/1581/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/1581/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/1581/events",
  "html_url": "https://github.com/alibaba/weex/issues/1581",
  "id": 187266695,
  "number": 1581,
  "title": "如何计算展示一段长文本所需要的大小",
  "user": {
    "login": "Neeeo",
    "id": 3702412,
    "avatar_url": "https://avatars3.githubusercontent.com/u/3702412?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Neeeo",
    "html_url": "https://github.com/Neeeo",
    "followers_url": "https://api.github.com/users/Neeeo/followers",
    "following_url": "https://api.github.com/users/Neeeo/following{/other_user}",
    "gists_url": "https://api.github.com/users/Neeeo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Neeeo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Neeeo/subscriptions",
    "organizations_url": "https://api.github.com/users/Neeeo/orgs",
    "repos_url": "https://api.github.com/users/Neeeo/repos",
    "events_url": "https://api.github.com/users/Neeeo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Neeeo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": [
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/258776813",
      "html_url": "https://github.com/alibaba/weex/issues/1581#issuecomment-258776813",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1581",
      "id": 258776813,
      "user": {
        "login": "Eric-ss",
        "id": 22341907,
        "avatar_url": "https://avatars3.githubusercontent.com/u/22341907?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eric-ss",
        "html_url": "https://github.com/Eric-ss",
        "followers_url": "https://api.github.com/users/Eric-ss/followers",
        "following_url": "https://api.github.com/users/Eric-ss/following{/other_user}",
        "gists_url": "https://api.github.com/users/Eric-ss/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Eric-ss/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Eric-ss/subscriptions",
        "organizations_url": "https://api.github.com/users/Eric-ss/orgs",
        "repos_url": "https://api.github.com/users/Eric-ss/repos",
        "events_url": "https://api.github.com/users/Eric-ss/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Eric-ss/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-07T08:44:42Z",
      "updated_at": "2016-11-07T08:44:42Z",
      "body": "同问\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/258786200",
      "html_url": "https://github.com/alibaba/weex/issues/1581#issuecomment-258786200",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1581",
      "id": 258786200,
      "user": {
        "login": "Hanks10100",
        "id": 8401776,
        "avatar_url": "https://avatars3.githubusercontent.com/u/8401776?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hanks10100",
        "html_url": "https://github.com/Hanks10100",
        "followers_url": "https://api.github.com/users/Hanks10100/followers",
        "following_url": "https://api.github.com/users/Hanks10100/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hanks10100/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hanks10100/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hanks10100/subscriptions",
        "organizations_url": "https://api.github.com/users/Hanks10100/orgs",
        "repos_url": "https://api.github.com/users/Hanks10100/repos",
        "events_url": "https://api.github.com/users/Hanks10100/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hanks10100/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-07T09:29:27Z",
      "updated_at": "2016-11-07T09:29:27Z",
      "body": "我们在 dom module 中已经实现了 `getComponentRect` 接口，可以获取页面元素的大小和位置。目前还没 release ，在下一个版本中可用。\n\n``` js\n{\n  result: true,\n  size: {\n    bottom: 60, // 组件下边界相对屏幕视口上边界的距离\n    height: 15,\n    left: 0, // 组件左边界相对屏幕视口左边界的距离\n    right: 353, // 组件右边界相对屏幕视口左边界的距离\n    top: 45, // 组件上边界相对屏幕视口上边界的距离\n    width: 353\n  }\n}\n```\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/258851541",
      "html_url": "https://github.com/alibaba/weex/issues/1581#issuecomment-258851541",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1581",
      "id": 258851541,
      "user": {
        "login": "bsed",
        "id": 10845087,
        "avatar_url": "https://avatars1.githubusercontent.com/u/10845087?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bsed",
        "html_url": "https://github.com/bsed",
        "followers_url": "https://api.github.com/users/bsed/followers",
        "following_url": "https://api.github.com/users/bsed/following{/other_user}",
        "gists_url": "https://api.github.com/users/bsed/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/bsed/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/bsed/subscriptions",
        "organizations_url": "https://api.github.com/users/bsed/orgs",
        "repos_url": "https://api.github.com/users/bsed/repos",
        "events_url": "https://api.github.com/users/bsed/events{/privacy}",
        "received_events_url": "https://api.github.com/users/bsed/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-07T14:36:30Z",
      "updated_at": "2016-11-07T14:36:30Z",
      "body": "good ~\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/259414755",
      "html_url": "https://github.com/alibaba/weex/issues/1581#issuecomment-259414755",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1581",
      "id": 259414755,
      "user": {
        "login": "Hanks10100",
        "id": 8401776,
        "avatar_url": "https://avatars3.githubusercontent.com/u/8401776?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hanks10100",
        "html_url": "https://github.com/Hanks10100",
        "followers_url": "https://api.github.com/users/Hanks10100/followers",
        "following_url": "https://api.github.com/users/Hanks10100/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hanks10100/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hanks10100/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hanks10100/subscriptions",
        "organizations_url": "https://api.github.com/users/Hanks10100/orgs",
        "repos_url": "https://api.github.com/users/Hanks10100/repos",
        "events_url": "https://api.github.com/users/Hanks10100/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hanks10100/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-09T13:30:51Z",
      "updated_at": "2016-11-09T13:30:51Z",
      "body": "See the details in #1455 .\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/259426493",
      "html_url": "https://github.com/alibaba/weex/issues/1581#issuecomment-259426493",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1581",
      "id": 259426493,
      "user": {
        "login": "Neeeo",
        "id": 3702412,
        "avatar_url": "https://avatars3.githubusercontent.com/u/3702412?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Neeeo",
        "html_url": "https://github.com/Neeeo",
        "followers_url": "https://api.github.com/users/Neeeo/followers",
        "following_url": "https://api.github.com/users/Neeeo/following{/other_user}",
        "gists_url": "https://api.github.com/users/Neeeo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Neeeo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Neeeo/subscriptions",
        "organizations_url": "https://api.github.com/users/Neeeo/orgs",
        "repos_url": "https://api.github.com/users/Neeeo/repos",
        "events_url": "https://api.github.com/users/Neeeo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Neeeo/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-09T14:26:33Z",
      "updated_at": "2016-11-09T14:26:33Z",
      "body": "请教一下，在给定宽度、字体样式下，这段文本全部展示需要多少高度？\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/259588356",
      "html_url": "https://github.com/alibaba/weex/issues/1581#issuecomment-259588356",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1581",
      "id": 259588356,
      "user": {
        "login": "Hanks10100",
        "id": 8401776,
        "avatar_url": "https://avatars3.githubusercontent.com/u/8401776?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hanks10100",
        "html_url": "https://github.com/Hanks10100",
        "followers_url": "https://api.github.com/users/Hanks10100/followers",
        "following_url": "https://api.github.com/users/Hanks10100/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hanks10100/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hanks10100/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hanks10100/subscriptions",
        "organizations_url": "https://api.github.com/users/Hanks10100/orgs",
        "repos_url": "https://api.github.com/users/Hanks10100/repos",
        "events_url": "https://api.github.com/users/Hanks10100/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hanks10100/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-10T02:48:07Z",
      "updated_at": "2016-11-10T02:48:07Z",
      "body": "@Neeeo 如果只有一行的话，和 line-height 相同；如果多行那就不确定了，可以通过 getComponentRect 获取文字高度。\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/259591103",
      "html_url": "https://github.com/alibaba/weex/issues/1581#issuecomment-259591103",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1581",
      "id": 259591103,
      "user": {
        "login": "Neeeo",
        "id": 3702412,
        "avatar_url": "https://avatars3.githubusercontent.com/u/3702412?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Neeeo",
        "html_url": "https://github.com/Neeeo",
        "followers_url": "https://api.github.com/users/Neeeo/followers",
        "following_url": "https://api.github.com/users/Neeeo/following{/other_user}",
        "gists_url": "https://api.github.com/users/Neeeo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Neeeo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Neeeo/subscriptions",
        "organizations_url": "https://api.github.com/users/Neeeo/orgs",
        "repos_url": "https://api.github.com/users/Neeeo/repos",
        "events_url": "https://api.github.com/users/Neeeo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Neeeo/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-10T03:10:30Z",
      "updated_at": "2016-11-10T03:10:30Z",
      "body": "@Hanks10100 是多行。我的需求主要是想在js里能计算出文字高度，这样我就能决定是否限制文本区域高度，并显示展开按钮\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/259594888",
      "html_url": "https://github.com/alibaba/weex/issues/1581#issuecomment-259594888",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1581",
      "id": 259594888,
      "user": {
        "login": "Hanks10100",
        "id": 8401776,
        "avatar_url": "https://avatars3.githubusercontent.com/u/8401776?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hanks10100",
        "html_url": "https://github.com/Hanks10100",
        "followers_url": "https://api.github.com/users/Hanks10100/followers",
        "following_url": "https://api.github.com/users/Hanks10100/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hanks10100/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hanks10100/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hanks10100/subscriptions",
        "organizations_url": "https://api.github.com/users/Hanks10100/orgs",
        "repos_url": "https://api.github.com/users/Hanks10100/repos",
        "events_url": "https://api.github.com/users/Hanks10100/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hanks10100/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-10T03:45:04Z",
      "updated_at": "2016-11-10T03:45:04Z",
      "body": "@Neeeo 可以用 getComponentRect 获取文字高度啊，这个版本里还没有。另外，`<text>` 标签支持 `lines` 这个样式（[文档](http://alibaba.github.io/weex/doc/components/text.html#styles)），可以指定文字和行数。\n\n针对这个需求的话，你暂时可以根据文字个数做判断。\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/259884642",
      "html_url": "https://github.com/alibaba/weex/issues/1581#issuecomment-259884642",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1581",
      "id": 259884642,
      "user": {
        "login": "Neeeo",
        "id": 3702412,
        "avatar_url": "https://avatars3.githubusercontent.com/u/3702412?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Neeeo",
        "html_url": "https://github.com/Neeeo",
        "followers_url": "https://api.github.com/users/Neeeo/followers",
        "following_url": "https://api.github.com/users/Neeeo/following{/other_user}",
        "gists_url": "https://api.github.com/users/Neeeo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Neeeo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Neeeo/subscriptions",
        "organizations_url": "https://api.github.com/users/Neeeo/orgs",
        "repos_url": "https://api.github.com/users/Neeeo/repos",
        "events_url": "https://api.github.com/users/Neeeo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Neeeo/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-11T05:32:18Z",
      "updated_at": "2016-11-14T12:37:03Z",
      "body": "@Hanks10100 我知道这个方法之后有，只是只有这个方法还不够吧。我写个伪代码说明一下：\n\n``` html\n<text id=\"hello\">{{content}}</text>\n\n<script>\ndata = {\n  content:''\n}\n\nready:function(){\n  asyncGetData(function(ret){\n    this.content = ret;\n })\n},\nsetupFold:function(){\n\n//根据 getComponentRect 设置是否显示展开文本按钮\n}\n</script>\n```\n\n在异步获取数据，设置给text后，什么时候知道`text`组件绘制完成？才能调用`setupFold`方法，通过 `getComponentRect` 来知道文本多大。\n如果是根据 `text` 组件的 appear事件，那界面上会有抖动，用户体验很差。\n不知道我表达清楚没。\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/260307565",
      "html_url": "https://github.com/alibaba/weex/issues/1581#issuecomment-260307565",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1581",
      "id": 260307565,
      "user": {
        "login": "Hanks10100",
        "id": 8401776,
        "avatar_url": "https://avatars3.githubusercontent.com/u/8401776?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hanks10100",
        "html_url": "https://github.com/Hanks10100",
        "followers_url": "https://api.github.com/users/Hanks10100/followers",
        "following_url": "https://api.github.com/users/Hanks10100/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hanks10100/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hanks10100/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hanks10100/subscriptions",
        "organizations_url": "https://api.github.com/users/Hanks10100/orgs",
        "repos_url": "https://api.github.com/users/Hanks10100/repos",
        "events_url": "https://api.github.com/users/Hanks10100/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hanks10100/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-14T11:03:30Z",
      "updated_at": "2016-11-14T11:03:30Z",
      "body": "在更新值之后就会触发 UI 更新，直接在后边调用 `setupFold` 就可以。（另外 content 不是个属性么，怎么当函数调了…）\n\n``` js\nready: function() {\n  var self = this\n  asyncGetData(function(ret){\n    self.content = ret;\n    self.setupFold();\n })\n```\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/260324616",
      "html_url": "https://github.com/alibaba/weex/issues/1581#issuecomment-260324616",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1581",
      "id": 260324616,
      "user": {
        "login": "Neeeo",
        "id": 3702412,
        "avatar_url": "https://avatars3.githubusercontent.com/u/3702412?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Neeeo",
        "html_url": "https://github.com/Neeeo",
        "followers_url": "https://api.github.com/users/Neeeo/followers",
        "following_url": "https://api.github.com/users/Neeeo/following{/other_user}",
        "gists_url": "https://api.github.com/users/Neeeo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Neeeo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Neeeo/subscriptions",
        "organizations_url": "https://api.github.com/users/Neeeo/orgs",
        "repos_url": "https://api.github.com/users/Neeeo/repos",
        "events_url": "https://api.github.com/users/Neeeo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Neeeo/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-14T12:38:03Z",
      "updated_at": "2016-11-14T12:38:03Z",
      "body": "写错了。已改\n"
    }
  ],
  "created_at": "2016-11-04T07:05:54Z",
  "updated_at": "2016-11-14T12:38:03Z",
  "closed_at": "2016-11-09T13:31:22Z",
  "body": "我有一段长文本，默认展示的时候是显示一部分内容，需要用户点击后才能全部显示。实现的时候有几个问题：\r\n\r\n1. 在给定宽度、字体样式下，这段文本全部展示需要多少高度？\r\n2. 如何获取指定元素当前的位置、大小？"
}
