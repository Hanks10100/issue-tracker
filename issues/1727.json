{
  "url": "https://api.github.com/repos/alibaba/weex/issues/1727",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/1727/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/1727/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/1727/events",
  "html_url": "https://github.com/alibaba/weex/issues/1727",
  "id": 191634657,
  "number": 1727,
  "title": "页面之间如何进行数据交互",
  "user": {
    "login": "Hello2015",
    "id": 8587677,
    "avatar_url": "https://avatars2.githubusercontent.com/u/8587677?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Hello2015",
    "html_url": "https://github.com/Hello2015",
    "followers_url": "https://api.github.com/users/Hello2015/followers",
    "following_url": "https://api.github.com/users/Hello2015/following{/other_user}",
    "gists_url": "https://api.github.com/users/Hello2015/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Hello2015/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Hello2015/subscriptions",
    "organizations_url": "https://api.github.com/users/Hello2015/orgs",
    "repos_url": "https://api.github.com/users/Hello2015/repos",
    "events_url": "https://api.github.com/users/Hello2015/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Hello2015/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": [
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/262895968",
      "html_url": "https://github.com/alibaba/weex/issues/1727#issuecomment-262895968",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1727",
      "id": 262895968,
      "user": {
        "login": "haicuan139",
        "id": 5266044,
        "avatar_url": "https://avatars0.githubusercontent.com/u/5266044?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/haicuan139",
        "html_url": "https://github.com/haicuan139",
        "followers_url": "https://api.github.com/users/haicuan139/followers",
        "following_url": "https://api.github.com/users/haicuan139/following{/other_user}",
        "gists_url": "https://api.github.com/users/haicuan139/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/haicuan139/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/haicuan139/subscriptions",
        "organizations_url": "https://api.github.com/users/haicuan139/orgs",
        "repos_url": "https://api.github.com/users/haicuan139/repos",
        "events_url": "https://api.github.com/users/haicuan139/events{/privacy}",
        "received_events_url": "https://api.github.com/users/haicuan139/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-25T07:29:55Z",
      "updated_at": "2016-11-25T07:29:55Z",
      "body": "哪个naticve?"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/262896481",
      "html_url": "https://github.com/alibaba/weex/issues/1727#issuecomment-262896481",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1727",
      "id": 262896481,
      "user": {
        "login": "Hello2015",
        "id": 8587677,
        "avatar_url": "https://avatars2.githubusercontent.com/u/8587677?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hello2015",
        "html_url": "https://github.com/Hello2015",
        "followers_url": "https://api.github.com/users/Hello2015/followers",
        "following_url": "https://api.github.com/users/Hello2015/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hello2015/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hello2015/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hello2015/subscriptions",
        "organizations_url": "https://api.github.com/users/Hello2015/orgs",
        "repos_url": "https://api.github.com/users/Hello2015/repos",
        "events_url": "https://api.github.com/users/Hello2015/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hello2015/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-25T07:34:06Z",
      "updated_at": "2016-11-25T07:34:06Z",
      "body": "例如我在A.we中使用openURL方法打开了B.we，B中处理了一些数据，我想在B页面关闭的时候通知A数据处理的结果，这个功能该如何实现？"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/263111771",
      "html_url": "https://github.com/alibaba/weex/issues/1727#issuecomment-263111771",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1727",
      "id": 263111771,
      "user": {
        "login": "Hanks10100",
        "id": 8401776,
        "avatar_url": "https://avatars3.githubusercontent.com/u/8401776?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hanks10100",
        "html_url": "https://github.com/Hanks10100",
        "followers_url": "https://api.github.com/users/Hanks10100/followers",
        "following_url": "https://api.github.com/users/Hanks10100/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hanks10100/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hanks10100/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hanks10100/subscriptions",
        "organizations_url": "https://api.github.com/users/Hanks10100/orgs",
        "repos_url": "https://api.github.com/users/Hanks10100/repos",
        "events_url": "https://api.github.com/users/Hanks10100/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hanks10100/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-27T09:29:03Z",
      "updated_at": "2016-11-27T09:29:03Z",
      "body": "组件之间的通信可以用 `$on` 和 `$dispatch`，文档里有。http://alibaba.github.io/weex/doc/syntax/comm.html\r\n\r\n想让 B 页面关闭时发送通知，可以使用 `destroyed` 生命周期。\r\n\r\n```js\r\nmodule.exports = {\r\n  destroyed: function () {\r\n    this.$dispatch('B:destroyed', {})\r\n  }\r\n}\r\n```\r\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/263172021",
      "html_url": "https://github.com/alibaba/weex/issues/1727#issuecomment-263172021",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1727",
      "id": 263172021,
      "user": {
        "login": "Hello2015",
        "id": 8587677,
        "avatar_url": "https://avatars2.githubusercontent.com/u/8587677?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hello2015",
        "html_url": "https://github.com/Hello2015",
        "followers_url": "https://api.github.com/users/Hello2015/followers",
        "following_url": "https://api.github.com/users/Hello2015/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hello2015/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hello2015/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hello2015/subscriptions",
        "organizations_url": "https://api.github.com/users/Hello2015/orgs",
        "repos_url": "https://api.github.com/users/Hello2015/repos",
        "events_url": "https://api.github.com/users/Hello2015/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hello2015/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-28T02:51:00Z",
      "updated_at": "2016-11-28T02:51:00Z",
      "body": "我这里说的并不是组件之间的通信，而是两个页面(Activity)之间的通信。\r\n`module.exports = {\r\n  destroyed: function () {\r\n    this.$dispatch('B:destroyed', {})\r\n  }\r\n}`\r\n这个地方派发的事件A页面应该是收不到的吧？"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/263174536",
      "html_url": "https://github.com/alibaba/weex/issues/1727#issuecomment-263174536",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1727",
      "id": 263174536,
      "user": {
        "login": "haicuan139",
        "id": 5266044,
        "avatar_url": "https://avatars0.githubusercontent.com/u/5266044?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/haicuan139",
        "html_url": "https://github.com/haicuan139",
        "followers_url": "https://api.github.com/users/haicuan139/followers",
        "following_url": "https://api.github.com/users/haicuan139/following{/other_user}",
        "gists_url": "https://api.github.com/users/haicuan139/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/haicuan139/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/haicuan139/subscriptions",
        "organizations_url": "https://api.github.com/users/haicuan139/orgs",
        "repos_url": "https://api.github.com/users/haicuan139/repos",
        "events_url": "https://api.github.com/users/haicuan139/events{/privacy}",
        "received_events_url": "https://api.github.com/users/haicuan139/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-28T03:15:36Z",
      "updated_at": "2016-11-28T03:15:36Z",
      "body": "@Hello2015 两种方法1.处理Activity的 onResum 2.处理WEEX 的onResum 3.用全局通知"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/263175643",
      "html_url": "https://github.com/alibaba/weex/issues/1727#issuecomment-263175643",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1727",
      "id": 263175643,
      "user": {
        "login": "Hello2015",
        "id": 8587677,
        "avatar_url": "https://avatars2.githubusercontent.com/u/8587677?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hello2015",
        "html_url": "https://github.com/Hello2015",
        "followers_url": "https://api.github.com/users/Hello2015/followers",
        "following_url": "https://api.github.com/users/Hello2015/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hello2015/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hello2015/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hello2015/subscriptions",
        "organizations_url": "https://api.github.com/users/Hello2015/orgs",
        "repos_url": "https://api.github.com/users/Hello2015/repos",
        "events_url": "https://api.github.com/users/Hello2015/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hello2015/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-28T03:27:02Z",
      "updated_at": "2016-11-28T03:27:02Z",
      "body": "@haicuan139 看来没有捷径了，我这边想到的是拓展了globalEvent,目前是在Weex中可以fireGlobalEvent,这样可以跨页面进行数据通知。在`WXGlobalEventModule`中添加了\r\n```\r\n@WXModuleAnno\r\n  public void fireGlobalEvent(String eventName, String jsonData) {\r\n    try {\r\n      JSONObject json = new JSONObject(jsonData);\r\n      Iterator<String> nameItr = json.keys();\r\n      Map<String, Object> outMap = new HashMap<String, Object>();\r\n      while(nameItr.hasNext()) {\r\n        String name = nameItr.next();\r\n        outMap.put(name, json.get(name));\r\n      }\r\n      mWXSDKInstance.fireSuperGlobalEventCallback(eventName , outMap);\r\n    } catch (JSONException e) {\r\n      e.printStackTrace();\r\n    }\r\n  } \r\n```\r\n在`WXSDKInstance`中增加了\r\n```\r\npublic void fireSuperGlobalEventCallback(String eventName, Map<String,Object> params){\r\n    List<WXSDKInstance> instances = WXSDKManager.getInstance().getWXRenderManager().getAllInstances();\r\n    for(WXSDKInstance instance : instances)\r\n    {\r\n      instance.fireGlobalEventCallback(eventName , params);\r\n    }\r\n  }\r\n```\r\n目前消息可以跨页面进行通知，但是还不知道会不会产生别的bug，目前还在测试中。"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/263178664",
      "html_url": "https://github.com/alibaba/weex/issues/1727#issuecomment-263178664",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1727",
      "id": 263178664,
      "user": {
        "login": "Hanks10100",
        "id": 8401776,
        "avatar_url": "https://avatars3.githubusercontent.com/u/8401776?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Hanks10100",
        "html_url": "https://github.com/Hanks10100",
        "followers_url": "https://api.github.com/users/Hanks10100/followers",
        "following_url": "https://api.github.com/users/Hanks10100/following{/other_user}",
        "gists_url": "https://api.github.com/users/Hanks10100/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Hanks10100/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Hanks10100/subscriptions",
        "organizations_url": "https://api.github.com/users/Hanks10100/orgs",
        "repos_url": "https://api.github.com/users/Hanks10100/repos",
        "events_url": "https://api.github.com/users/Hanks10100/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Hanks10100/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-28T03:59:20Z",
      "updated_at": "2016-11-28T03:59:20Z",
      "body": "@Hello2015 页面间通信的话可以参考 #1536，简而言之是打算实现 [`BroadcastChannel`](https://html.spec.whatwg.org/multipage/comms.html#broadcasting-to-other-browsing-contexts) API 。全局事件可能会被废弃，不建议hack。#1619 #1605 "
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/284638215",
      "html_url": "https://github.com/alibaba/weex/issues/1727#issuecomment-284638215",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1727",
      "id": 284638215,
      "user": {
        "login": "zk0301",
        "id": 4497345,
        "avatar_url": "https://avatars1.githubusercontent.com/u/4497345?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/zk0301",
        "html_url": "https://github.com/zk0301",
        "followers_url": "https://api.github.com/users/zk0301/followers",
        "following_url": "https://api.github.com/users/zk0301/following{/other_user}",
        "gists_url": "https://api.github.com/users/zk0301/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/zk0301/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/zk0301/subscriptions",
        "organizations_url": "https://api.github.com/users/zk0301/orgs",
        "repos_url": "https://api.github.com/users/zk0301/repos",
        "events_url": "https://api.github.com/users/zk0301/events{/privacy}",
        "received_events_url": "https://api.github.com/users/zk0301/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2017-03-07T06:55:48Z",
      "updated_at": "2017-03-07T06:55:48Z",
      "body": "我按你的方法也实现了。楼上Hanks10100发的BroadcastChannel不知道是什么我看不懂，链接过去一堆鬼佬文。看官网文档关于BroadcastChannel没有介绍。我的版本是0.10.x。"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/285587539",
      "html_url": "https://github.com/alibaba/weex/issues/1727#issuecomment-285587539",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1727",
      "id": 285587539,
      "user": {
        "login": "zhushangwei",
        "id": 18021066,
        "avatar_url": "https://avatars0.githubusercontent.com/u/18021066?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/zhushangwei",
        "html_url": "https://github.com/zhushangwei",
        "followers_url": "https://api.github.com/users/zhushangwei/followers",
        "following_url": "https://api.github.com/users/zhushangwei/following{/other_user}",
        "gists_url": "https://api.github.com/users/zhushangwei/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/zhushangwei/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/zhushangwei/subscriptions",
        "organizations_url": "https://api.github.com/users/zhushangwei/orgs",
        "repos_url": "https://api.github.com/users/zhushangwei/repos",
        "events_url": "https://api.github.com/users/zhushangwei/events{/privacy}",
        "received_events_url": "https://api.github.com/users/zhushangwei/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2017-03-10T06:15:52Z",
      "updated_at": "2017-03-10T06:15:52Z",
      "body": "@Hanks10100 这个问题到底该怎么解决？"
    }
  ],
  "created_at": "2016-11-25T06:41:25Z",
  "updated_at": "2017-03-10T06:15:52Z",
  "closed_at": "2016-11-28T05:52:37Z",
  "body": "A打开B，B处理完数据之后需要通知A，此时该如何去做？\r\n"
}
