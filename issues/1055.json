{
  "url": "https://api.github.com/repos/alibaba/weex/issues/1055",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/1055/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/1055/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/1055/events",
  "html_url": "https://github.com/alibaba/weex/issues/1055",
  "id": 172648688,
  "number": 1055,
  "title": "H5:stream跨域提示Unexpected token",
  "user": {
    "login": "catliuqh",
    "id": 17329044,
    "avatar_url": "https://avatars3.githubusercontent.com/u/17329044?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/catliuqh",
    "html_url": "https://github.com/catliuqh",
    "followers_url": "https://api.github.com/users/catliuqh/followers",
    "following_url": "https://api.github.com/users/catliuqh/following{/other_user}",
    "gists_url": "https://api.github.com/users/catliuqh/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/catliuqh/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/catliuqh/subscriptions",
    "organizations_url": "https://api.github.com/users/catliuqh/orgs",
    "repos_url": "https://api.github.com/users/catliuqh/repos",
    "events_url": "https://api.github.com/users/catliuqh/events{/privacy}",
    "received_events_url": "https://api.github.com/users/catliuqh/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "MrRaindrop",
    "id": 1545874,
    "avatar_url": "https://avatars3.githubusercontent.com/u/1545874?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MrRaindrop",
    "html_url": "https://github.com/MrRaindrop",
    "followers_url": "https://api.github.com/users/MrRaindrop/followers",
    "following_url": "https://api.github.com/users/MrRaindrop/following{/other_user}",
    "gists_url": "https://api.github.com/users/MrRaindrop/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MrRaindrop/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MrRaindrop/subscriptions",
    "organizations_url": "https://api.github.com/users/MrRaindrop/orgs",
    "repos_url": "https://api.github.com/users/MrRaindrop/repos",
    "events_url": "https://api.github.com/users/MrRaindrop/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MrRaindrop/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "MrRaindrop",
      "id": 1545874,
      "avatar_url": "https://avatars3.githubusercontent.com/u/1545874?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MrRaindrop",
      "html_url": "https://github.com/MrRaindrop",
      "followers_url": "https://api.github.com/users/MrRaindrop/followers",
      "following_url": "https://api.github.com/users/MrRaindrop/following{/other_user}",
      "gists_url": "https://api.github.com/users/MrRaindrop/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MrRaindrop/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MrRaindrop/subscriptions",
      "organizations_url": "https://api.github.com/users/MrRaindrop/orgs",
      "repos_url": "https://api.github.com/users/MrRaindrop/repos",
      "events_url": "https://api.github.com/users/MrRaindrop/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MrRaindrop/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": [
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/241675867",
      "html_url": "https://github.com/alibaba/weex/issues/1055#issuecomment-241675867",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1055",
      "id": 241675867,
      "user": {
        "login": "MrRaindrop",
        "id": 1545874,
        "avatar_url": "https://avatars3.githubusercontent.com/u/1545874?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MrRaindrop",
        "html_url": "https://github.com/MrRaindrop",
        "followers_url": "https://api.github.com/users/MrRaindrop/followers",
        "following_url": "https://api.github.com/users/MrRaindrop/following{/other_user}",
        "gists_url": "https://api.github.com/users/MrRaindrop/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/MrRaindrop/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/MrRaindrop/subscriptions",
        "organizations_url": "https://api.github.com/users/MrRaindrop/orgs",
        "repos_url": "https://api.github.com/users/MrRaindrop/repos",
        "events_url": "https://api.github.com/users/MrRaindrop/events{/privacy}",
        "received_events_url": "https://api.github.com/users/MrRaindrop/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-08-23T09:24:55Z",
      "updated_at": "2016-08-23T09:25:31Z",
      "body": "Hi,\n1. h5的stream.fetch的jsonp callback返回数据有问题，没有包裹在data里面，而是直接把data做为回调参数了，当然这个问题与你说的这个问题无关（后续会修复）。\n2. 目前jsonp方式没有支持自定义callback name，所以手动在url里加上`jsoncallback=jsonp`也是没用的，与之对应服务器应该从url里解析stream.fetch默认传递的`callback`这个参数，典型的参数为`callback=jsonp_1` (1是一个防止重复请求的计数，每次+1)，这时服务器应该返回`jsonp_1(yourData)`\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/241679737",
      "html_url": "https://github.com/alibaba/weex/issues/1055#issuecomment-241679737",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1055",
      "id": 241679737,
      "user": {
        "login": "catliuqh",
        "id": 17329044,
        "avatar_url": "https://avatars3.githubusercontent.com/u/17329044?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/catliuqh",
        "html_url": "https://github.com/catliuqh",
        "followers_url": "https://api.github.com/users/catliuqh/followers",
        "following_url": "https://api.github.com/users/catliuqh/following{/other_user}",
        "gists_url": "https://api.github.com/users/catliuqh/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/catliuqh/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/catliuqh/subscriptions",
        "organizations_url": "https://api.github.com/users/catliuqh/orgs",
        "repos_url": "https://api.github.com/users/catliuqh/repos",
        "events_url": "https://api.github.com/users/catliuqh/events{/privacy}",
        "received_events_url": "https://api.github.com/users/catliuqh/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-08-23T09:40:16Z",
      "updated_at": "2016-08-23T09:40:16Z",
      "body": "那我现在的解决方法就是只有让后台改callback name为callback才能正常用吗\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/243342284",
      "html_url": "https://github.com/alibaba/weex/issues/1055#issuecomment-243342284",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1055",
      "id": 243342284,
      "user": {
        "login": "MrRaindrop",
        "id": 1545874,
        "avatar_url": "https://avatars3.githubusercontent.com/u/1545874?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MrRaindrop",
        "html_url": "https://github.com/MrRaindrop",
        "followers_url": "https://api.github.com/users/MrRaindrop/followers",
        "following_url": "https://api.github.com/users/MrRaindrop/following{/other_user}",
        "gists_url": "https://api.github.com/users/MrRaindrop/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/MrRaindrop/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/MrRaindrop/subscriptions",
        "organizations_url": "https://api.github.com/users/MrRaindrop/orgs",
        "repos_url": "https://api.github.com/users/MrRaindrop/repos",
        "events_url": "https://api.github.com/users/MrRaindrop/events{/privacy}",
        "received_events_url": "https://api.github.com/users/MrRaindrop/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-08-30T06:09:15Z",
      "updated_at": "2016-08-30T06:11:18Z",
      "body": "问题 2 , 服务器改为解析url里带的参数callback所指定的name，如请求url里带有参数callback=jsonp_1 则服务器返回`jsonp_1(data)` @catliuqh \n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/243342465",
      "html_url": "https://github.com/alibaba/weex/issues/1055#issuecomment-243342465",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1055",
      "id": 243342465,
      "user": {
        "login": "MrRaindrop",
        "id": 1545874,
        "avatar_url": "https://avatars3.githubusercontent.com/u/1545874?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MrRaindrop",
        "html_url": "https://github.com/MrRaindrop",
        "followers_url": "https://api.github.com/users/MrRaindrop/followers",
        "following_url": "https://api.github.com/users/MrRaindrop/following{/other_user}",
        "gists_url": "https://api.github.com/users/MrRaindrop/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/MrRaindrop/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/MrRaindrop/subscriptions",
        "organizations_url": "https://api.github.com/users/MrRaindrop/orgs",
        "repos_url": "https://api.github.com/users/MrRaindrop/repos",
        "events_url": "https://api.github.com/users/MrRaindrop/events{/privacy}",
        "received_events_url": "https://api.github.com/users/MrRaindrop/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-08-30T06:10:29Z",
      "updated_at": "2016-08-30T06:10:29Z",
      "body": "问题 1 已在 https://github.com/alibaba/weex/pull/1059 修复\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/243964847",
      "html_url": "https://github.com/alibaba/weex/issues/1055#issuecomment-243964847",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1055",
      "id": 243964847,
      "user": {
        "login": "catliuqh",
        "id": 17329044,
        "avatar_url": "https://avatars3.githubusercontent.com/u/17329044?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/catliuqh",
        "html_url": "https://github.com/catliuqh",
        "followers_url": "https://api.github.com/users/catliuqh/followers",
        "following_url": "https://api.github.com/users/catliuqh/following{/other_user}",
        "gists_url": "https://api.github.com/users/catliuqh/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/catliuqh/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/catliuqh/subscriptions",
        "organizations_url": "https://api.github.com/users/catliuqh/orgs",
        "repos_url": "https://api.github.com/users/catliuqh/repos",
        "events_url": "https://api.github.com/users/catliuqh/events{/privacy}",
        "received_events_url": "https://api.github.com/users/catliuqh/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-09-01T03:17:06Z",
      "updated_at": "2016-09-01T03:17:06Z",
      "body": "问题2的那个callback name你们会考虑可以自定义吗，我们大部分的都是jsoncallback=jsonp\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/255738511",
      "html_url": "https://github.com/alibaba/weex/issues/1055#issuecomment-255738511",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1055",
      "id": 255738511,
      "user": {
        "login": "MrRaindrop",
        "id": 1545874,
        "avatar_url": "https://avatars3.githubusercontent.com/u/1545874?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MrRaindrop",
        "html_url": "https://github.com/MrRaindrop",
        "followers_url": "https://api.github.com/users/MrRaindrop/followers",
        "following_url": "https://api.github.com/users/MrRaindrop/following{/other_user}",
        "gists_url": "https://api.github.com/users/MrRaindrop/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/MrRaindrop/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/MrRaindrop/subscriptions",
        "organizations_url": "https://api.github.com/users/MrRaindrop/orgs",
        "repos_url": "https://api.github.com/users/MrRaindrop/repos",
        "events_url": "https://api.github.com/users/MrRaindrop/events{/privacy}",
        "received_events_url": "https://api.github.com/users/MrRaindrop/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-10-24T13:21:46Z",
      "updated_at": "2016-10-24T13:22:04Z",
      "body": "这个目前native没有开这个口子，原因是native也没有跨域这个需求。不够倒是可以考虑单独为h5增加一个跨域的jsonpcallback参数。后续会考虑加上这个需求，你也可以给我们提pr\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/262888809",
      "html_url": "https://github.com/alibaba/weex/issues/1055#issuecomment-262888809",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1055",
      "id": 262888809,
      "user": {
        "login": "SecretCastle",
        "id": 12498143,
        "avatar_url": "https://avatars3.githubusercontent.com/u/12498143?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/SecretCastle",
        "html_url": "https://github.com/SecretCastle",
        "followers_url": "https://api.github.com/users/SecretCastle/followers",
        "following_url": "https://api.github.com/users/SecretCastle/following{/other_user}",
        "gists_url": "https://api.github.com/users/SecretCastle/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/SecretCastle/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/SecretCastle/subscriptions",
        "organizations_url": "https://api.github.com/users/SecretCastle/orgs",
        "repos_url": "https://api.github.com/users/SecretCastle/repos",
        "events_url": "https://api.github.com/users/SecretCastle/events{/privacy}",
        "received_events_url": "https://api.github.com/users/SecretCastle/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-25T06:25:39Z",
      "updated_at": "2016-11-25T06:25:39Z",
      "body": "请问下，stream.fetch后，报\r\n![image](https://cloud.githubusercontent.com/assets/12498143/20616145/018f570c-b31b-11e6-9391-cc80e07d43fa.png)\r\n这个是什么毛病\r\n"
    }
  ],
  "created_at": "2016-08-23T09:11:43Z",
  "updated_at": "2016-11-25T06:25:39Z",
  "closed_at": "2016-10-24T13:21:46Z",
  "body": "H5页面跨域请求时报错，请问怎么解决\n直接weex index.we在浏览器进行调试\n\n**我的跨域代码是这样写的:**\n\n![qq 20160823164836](https://cloud.githubusercontent.com/assets/17329044/17885873/b3eb2db8-6951-11e6-8047-60224a169734.png)\n![qq 20160823164949](https://cloud.githubusercontent.com/assets/17329044/17885874/b4256492-6951-11e6-884c-be0710e6c1d5.png)\n\n**运行时报如下错误，用stream跨域请求后面会默认添加callback=jsonp，但报错又提示jsonp未定义**\n\n![qq 20160823165445](https://cloud.githubusercontent.com/assets/17329044/17886010/790e8982-6952-11e6-9e3e-109849ac6c5e.png)\n\n**正常情况下后台返回的数据**\n![qq 20160823170226](https://cloud.githubusercontent.com/assets/17329044/17886251/7b71dcbe-6953-11e6-8f5a-2b3c5c626696.png)\n"
}
