{
  "url": "https://api.github.com/repos/alibaba/weex/issues/2302",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/2302/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/2302/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/2302/events",
  "html_url": "https://github.com/alibaba/weex/issues/2302",
  "id": 201222854,
  "number": 2302,
  "title": "swift WXImgLoaderDefault use SDWebImage error",
  "user": {
    "login": "snice",
    "id": 8744870,
    "avatar_url": "https://avatars1.githubusercontent.com/u/8744870?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/snice",
    "html_url": "https://github.com/snice",
    "followers_url": "https://api.github.com/users/snice/followers",
    "following_url": "https://api.github.com/users/snice/following{/other_user}",
    "gists_url": "https://api.github.com/users/snice/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/snice/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/snice/subscriptions",
    "organizations_url": "https://api.github.com/users/snice/orgs",
    "repos_url": "https://api.github.com/users/snice/repos",
    "events_url": "https://api.github.com/users/snice/events{/privacy}",
    "received_events_url": "https://api.github.com/users/snice/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": [
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/273549054",
      "html_url": "https://github.com/alibaba/weex/issues/2302#issuecomment-273549054",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/2302",
      "id": 273549054,
      "user": {
        "login": "acton393",
        "id": 11631084,
        "avatar_url": "https://avatars1.githubusercontent.com/u/11631084?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/acton393",
        "html_url": "https://github.com/acton393",
        "followers_url": "https://api.github.com/users/acton393/followers",
        "following_url": "https://api.github.com/users/acton393/following{/other_user}",
        "gists_url": "https://api.github.com/users/acton393/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/acton393/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/acton393/subscriptions",
        "organizations_url": "https://api.github.com/users/acton393/orgs",
        "repos_url": "https://api.github.com/users/acton393/repos",
        "events_url": "https://api.github.com/users/acton393/events{/privacy}",
        "received_events_url": "https://api.github.com/users/acton393/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2017-01-18T17:52:16Z",
      "updated_at": "2017-01-18T17:53:59Z",
      "body": "尝试一下  `return operation as? WXImageOperationProtocol;`\r\n[实现](https://github.com/acton393/WeexSwiftSample/blob/master/SwiftWeexSample/WXImageLoaderDefaultImplement.swift#L29)\r\n\r\n暂时先关闭了~，如果有问题可以再打开"
    }
  ],
  "created_at": "2017-01-17T09:51:12Z",
  "updated_at": "2017-01-18T17:53:59Z",
  "closed_at": "2017-01-18T17:52:16Z",
  "body": "`\r\n\r\n    class WXImgLoaderDefault:NSObject, WXImgLoaderProtocol{\r\n    func downloadImage(withURL url: String!, imageFrame: CGRect, userInfo options: [AnyHashable : Any]! = [:], completed completedBlock: ((UIImage?, Error?, Bool) -> Void)!) -> WXImageOperationProtocol! {\r\n        var temp:String;\r\n        if(url.hasPrefix(\"//\")){\r\n            temp = \"http:\" + url;\r\n        }else{\r\n            temp = url;\r\n        }\r\n        let operation = SDWebImageManager.shared().downloadImage(with: URL(string: temp), options: SDWebImageOptions.retryFailed, progress: { (receivedSize:Int, expectedSize:Int) in\r\n            \r\n        }) { (image:UIImage?, error:Error?, cacheType:SDImageCacheType, finished:Bool, imageURL:URL?) in\r\n            if ((completedBlock) != nil) {\r\n                completedBlock(image, error, finished);\r\n            }\r\n        };\r\n        return operation as! WXImageOperationProtocol;\r\n    }\r\n    }\r\n`\r\n\r\n运行报错：\r\nCould not cast value of type 'SDWebImageCombinedOperation' (0x1006aa858) to 'WXImageOperationProtocol' (0x100130db8).",
  "closed_by": {
    "login": "acton393",
    "id": 11631084,
    "avatar_url": "https://avatars1.githubusercontent.com/u/11631084?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/acton393",
    "html_url": "https://github.com/acton393",
    "followers_url": "https://api.github.com/users/acton393/followers",
    "following_url": "https://api.github.com/users/acton393/following{/other_user}",
    "gists_url": "https://api.github.com/users/acton393/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/acton393/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/acton393/subscriptions",
    "organizations_url": "https://api.github.com/users/acton393/orgs",
    "repos_url": "https://api.github.com/users/acton393/repos",
    "events_url": "https://api.github.com/users/acton393/events{/privacy}",
    "received_events_url": "https://api.github.com/users/acton393/received_events",
    "type": "User",
    "site_admin": false
  }
}
