{
  "url": "https://api.github.com/repos/alibaba/weex/issues/2667",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/2667/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/2667/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/2667/events",
  "html_url": "https://github.com/alibaba/weex/pull/2667",
  "id": 208810579,
  "number": 2667,
  "title": "修复iOS SDK添加系统返回手势的bug",
  "user": {
    "login": "emptywalker",
    "id": 12522809,
    "avatar_url": "https://avatars0.githubusercontent.com/u/12522809?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/emptywalker",
    "html_url": "https://github.com/emptywalker",
    "followers_url": "https://api.github.com/users/emptywalker/followers",
    "following_url": "https://api.github.com/users/emptywalker/following{/other_user}",
    "gists_url": "https://api.github.com/users/emptywalker/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/emptywalker/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/emptywalker/subscriptions",
    "organizations_url": "https://api.github.com/users/emptywalker/orgs",
    "repos_url": "https://api.github.com/users/emptywalker/repos",
    "events_url": "https://api.github.com/users/emptywalker/events{/privacy}",
    "received_events_url": "https://api.github.com/users/emptywalker/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "open",
  "locked": false,
  "assignee": null,
  "assignees": [],
  "milestone": null,
  "comments": [],
  "created_at": "2017-02-20T08:16:23Z",
  "updated_at": "2017-02-20T08:16:23Z",
  "closed_at": null,
  "pull_request": {
    "url": "https://api.github.com/repos/alibaba/weex/pulls/2667",
    "html_url": "https://github.com/alibaba/weex/pull/2667",
    "diff_url": "https://github.com/alibaba/weex/pull/2667.diff",
    "patch_url": "https://github.com/alibaba/weex/pull/2667.patch"
  },
  "body": "\r\n### 描述\r\n在[#2433](https://github.com/alibaba/weex/pull/2433)中，我将sdk中添加用来右滑返回的手势，更换成系统提供的方式，但是在最近的开发中，发现这种添加方式存在以下问题：\r\n  在WXBaseViewController中设置navigationController.interactivePopGestureRecognizer.delegate，每次创建baseVC对象时，那么delegate都会指向这个新的baseVC，导致了navigator的手势效果始终都只有栈顶的baseVC有； 这样当栈顶的baseVC弹出后，navigationController.interactivePopGestureRecognizer.delegate=nil,导致了后面的baseVC都不能够使用手势返回； \r\n\r\n### 解决方案\r\n为了保证interactivePopGestureRecognizer的代理始终存在，将其设置在WXRootViewController的viewDidLoad()中，保证这个手势的delegate始终都不会为nil，这样也降低了WXBaseVC每次都去增加手势的任务\r\n### 提醒\r\n如果是在项目中集成weex页面的，也只需在本地项目中的navigationController的viewDidLoad()中，设置interactivePopGestureRecognizer代理即可\r\n    \r\n### 总结\r\n下次提交pr之前，一定会充分测试，虽是一个简单的pr，但是如果不仔细考虑，也会存在许多问题",
  "closed_by": null
}
