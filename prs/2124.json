{
  "url": "https://api.github.com/repos/alibaba/weex/issues/2124",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/2124/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/2124/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/2124/events",
  "html_url": "https://github.com/alibaba/weex/pull/2124",
  "id": 198616725,
  "number": 2124,
  "title": "+ [html5] feature: weex provide websocket module",
  "user": {
    "login": "zhangquan",
    "id": 804574,
    "avatar_url": "https://avatars1.githubusercontent.com/u/804574?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zhangquan",
    "html_url": "https://github.com/zhangquan",
    "followers_url": "https://api.github.com/users/zhangquan/followers",
    "following_url": "https://api.github.com/users/zhangquan/following{/other_user}",
    "gists_url": "https://api.github.com/users/zhangquan/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zhangquan/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zhangquan/subscriptions",
    "organizations_url": "https://api.github.com/users/zhangquan/orgs",
    "repos_url": "https://api.github.com/users/zhangquan/repos",
    "events_url": "https://api.github.com/users/zhangquan/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zhangquan/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "closed",
  "locked": false,
  "assignee": {
    "login": "Jinjiang",
    "id": 206848,
    "avatar_url": "https://avatars2.githubusercontent.com/u/206848?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/Jinjiang",
    "html_url": "https://github.com/Jinjiang",
    "followers_url": "https://api.github.com/users/Jinjiang/followers",
    "following_url": "https://api.github.com/users/Jinjiang/following{/other_user}",
    "gists_url": "https://api.github.com/users/Jinjiang/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/Jinjiang/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/Jinjiang/subscriptions",
    "organizations_url": "https://api.github.com/users/Jinjiang/orgs",
    "repos_url": "https://api.github.com/users/Jinjiang/repos",
    "events_url": "https://api.github.com/users/Jinjiang/events{/privacy}",
    "received_events_url": "https://api.github.com/users/Jinjiang/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "Jinjiang",
      "id": 206848,
      "avatar_url": "https://avatars2.githubusercontent.com/u/206848?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Jinjiang",
      "html_url": "https://github.com/Jinjiang",
      "followers_url": "https://api.github.com/users/Jinjiang/followers",
      "following_url": "https://api.github.com/users/Jinjiang/following{/other_user}",
      "gists_url": "https://api.github.com/users/Jinjiang/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Jinjiang/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Jinjiang/subscriptions",
      "organizations_url": "https://api.github.com/users/Jinjiang/orgs",
      "repos_url": "https://api.github.com/users/Jinjiang/repos",
      "events_url": "https://api.github.com/users/Jinjiang/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Jinjiang/received_events",
      "type": "User",
      "site_admin": false
    },
    {
      "login": "MrRaindrop",
      "id": 1545874,
      "avatar_url": "https://avatars3.githubusercontent.com/u/1545874?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MrRaindrop",
      "html_url": "https://github.com/MrRaindrop",
      "followers_url": "https://api.github.com/users/MrRaindrop/followers",
      "following_url": "https://api.github.com/users/MrRaindrop/following{/other_user}",
      "gists_url": "https://api.github.com/users/MrRaindrop/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MrRaindrop/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MrRaindrop/subscriptions",
      "organizations_url": "https://api.github.com/users/MrRaindrop/orgs",
      "repos_url": "https://api.github.com/users/MrRaindrop/repos",
      "events_url": "https://api.github.com/users/MrRaindrop/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MrRaindrop/received_events",
      "type": "User",
      "site_admin": false
    },
    {
      "login": "Hanks10100",
      "id": 8401776,
      "avatar_url": "https://avatars3.githubusercontent.com/u/8401776?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Hanks10100",
      "html_url": "https://github.com/Hanks10100",
      "followers_url": "https://api.github.com/users/Hanks10100/followers",
      "following_url": "https://api.github.com/users/Hanks10100/following{/other_user}",
      "gists_url": "https://api.github.com/users/Hanks10100/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Hanks10100/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Hanks10100/subscriptions",
      "organizations_url": "https://api.github.com/users/Hanks10100/orgs",
      "repos_url": "https://api.github.com/users/Hanks10100/repos",
      "events_url": "https://api.github.com/users/Hanks10100/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Hanks10100/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": [],
  "created_at": "2017-01-04T02:23:56Z",
  "updated_at": "2017-01-05T07:18:07Z",
  "closed_at": "2017-01-05T07:18:07Z",
  "pull_request": {
    "url": "https://api.github.com/repos/alibaba/weex/pulls/2124",
    "html_url": "https://github.com/alibaba/weex/pull/2124",
    "diff_url": "https://github.com/alibaba/weex/pull/2124.diff",
    "patch_url": "https://github.com/alibaba/weex/pull/2124.patch"
  },
  "body": "#### websocket [参考](https://developer.mozilla.org/zh-CN/docs/Web/API/WebSocket)\r\n* 名字\r\n  - websocket\r\n* 描述\r\n  - websocket在聊天应用，小游戏中会用到，建议加上基础功能websokcet，实现后，可以用于应用的交互场景，websocket已经是大多数程序的必备功能\r\n* 平台\r\n  - ios,android,H5\r\n* 类型\r\n  - module\r\n* 解决方案\r\n  - weex 提供websocket，h5 直接用原生的websocket，安卓和ios根据w3c的websocket接口实现对应的接口，需要更改jsfm，jsfm重写方法设置功能， 支持方法的赋值功能，这样jsfm赋值的函数可以监听module的api，从而实现严格按照w3c标准的api\r\n  - weex提供默认的protocol实现，用户也可以实现自己的protocol，增强websocket功能\r\n  - 对于websocket的实例，可以参考stream的实现，根据协议的名字设置（隐风建议一个instance 一个实例）\r\n* api\r\n  - WebSocket(\r\n     string url,\r\n     string option protocol\r\n );\r\n     - url：需要连接的URL(string)\r\n     - protocol: 协议(string)\r\n  - send(string data)\r\n     - data：发送到服务器的数据(string)\r\n - close(int code,string reason)\r\n     - code：表示关闭连接的状态号，默认值1000(表示正常连接关闭)(int)\r\n     - reason:可选，表示关闭的原因(string)\r\n - onerror(e)\r\n     - 当错误发生时用于监听error事件的事件监听器。会接受一个名为error的event对象(dictionary)\r\n         - data(string)：错误数据\r\n - onmessage(e)\r\n     - 一个用于消息事件的事件监听器，这一事件当有消息到达的时候该事件会触发。这个Listener会被传入一个名为\"message\"的MessageEvent对象(dictionary)。\r\n         - data(string)：Returns a DOMString, Blob or an ArrayBuffer containing the data send by the emitter,目前支持字符串\r\n - onopen(e)\r\n     - 一个用于连接打开事件的事件监听器。当readyState的值变为OPEN的时候会触发该事件。该事件表明这个连接已经准备好接受和发送数据。这个监听器会接受一个名为\"open\"的事件对象。(dictionary)\r\n         - type(string):默认值\"open\"\r\n - onclose(e)\r\n     - (dictionary)用于监听连接关闭事件监听器。当WebSocket对象的readyState状态变为CLOSED时会触发该事件。这个监听器会接收一个叫close的对象。\r\n         - code(number):返回一个 unsigned short 类型的数字, 表示服务端发送的关闭码\r\n         - reason(string):用以表示服务器关闭连接的原因. 这是由服务器和子协议决定的\r\n         - wasClean:(bool):用以表示连接是否完全关闭\r\n -  备注\r\n     - 增加监听：可以墨循想到实现方案，早弦在jsfm 实现了相关功能，方法的代理\r\n\r\n     - 使用例子\r\n\r\n     ```javascript\r\n     connect:function(e) {\r\n                websocket.WebSocket('ws://115.29.193.48:8088','');\r\n                var self = this;\r\n                websocket.onopen = function(e)\r\n                {\r\n                    self.onopeninfo = e;\r\n                }\r\n                websocket.onmessage = function(e)\r\n                {\r\n                    self.onmessage = e.data;\r\n                }\r\n                websocket.onerror = function(e)\r\n                {\r\n                    self.onerrorinfo = e.data;\r\n                }\r\n                websocket.onclose = function(e)\r\n                {\r\n                    self.onerrorinfo = e.reason;\r\n                }\r\n            },\r\n            send:function(e) {\r\n                var input = this.$el('input');\r\n                input.blur();\r\n                websocket.send(this.txtInput);\r\n                this.sendinfo = this.txtInput;\r\n\r\n            },\r\n     ```\r\n",
  "closed_by": {
    "login": "MrRaindrop",
    "id": 1545874,
    "avatar_url": "https://avatars3.githubusercontent.com/u/1545874?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/MrRaindrop",
    "html_url": "https://github.com/MrRaindrop",
    "followers_url": "https://api.github.com/users/MrRaindrop/followers",
    "following_url": "https://api.github.com/users/MrRaindrop/following{/other_user}",
    "gists_url": "https://api.github.com/users/MrRaindrop/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/MrRaindrop/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/MrRaindrop/subscriptions",
    "organizations_url": "https://api.github.com/users/MrRaindrop/orgs",
    "repos_url": "https://api.github.com/users/MrRaindrop/repos",
    "events_url": "https://api.github.com/users/MrRaindrop/events{/privacy}",
    "received_events_url": "https://api.github.com/users/MrRaindrop/received_events",
    "type": "User",
    "site_admin": false
  }
}
