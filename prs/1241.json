{
  "url": "https://api.github.com/repos/alibaba/weex/issues/1241",
  "repository_url": "https://api.github.com/repos/alibaba/weex",
  "labels_url": "https://api.github.com/repos/alibaba/weex/issues/1241/labels{/name}",
  "comments_url": "https://api.github.com/repos/alibaba/weex/issues/1241/comments",
  "events_url": "https://api.github.com/repos/alibaba/weex/issues/1241/events",
  "html_url": "https://github.com/alibaba/weex/pull/1241",
  "id": 177646779,
  "number": 1241,
  "title": "[android] web component add webupload capability(#1117)",
  "user": {
    "login": "misakuo",
    "id": 6958743,
    "avatar_url": "https://avatars3.githubusercontent.com/u/6958743?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/misakuo",
    "html_url": "https://github.com/misakuo",
    "followers_url": "https://api.github.com/users/misakuo/followers",
    "following_url": "https://api.github.com/users/misakuo/following{/other_user}",
    "gists_url": "https://api.github.com/users/misakuo/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/misakuo/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/misakuo/subscriptions",
    "organizations_url": "https://api.github.com/users/misakuo/orgs",
    "repos_url": "https://api.github.com/users/misakuo/repos",
    "events_url": "https://api.github.com/users/misakuo/events{/privacy}",
    "received_events_url": "https://api.github.com/users/misakuo/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [],
  "state": "open",
  "locked": false,
  "assignee": {
    "login": "zshshr",
    "id": 5382962,
    "avatar_url": "https://avatars2.githubusercontent.com/u/5382962?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/zshshr",
    "html_url": "https://github.com/zshshr",
    "followers_url": "https://api.github.com/users/zshshr/followers",
    "following_url": "https://api.github.com/users/zshshr/following{/other_user}",
    "gists_url": "https://api.github.com/users/zshshr/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/zshshr/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/zshshr/subscriptions",
    "organizations_url": "https://api.github.com/users/zshshr/orgs",
    "repos_url": "https://api.github.com/users/zshshr/repos",
    "events_url": "https://api.github.com/users/zshshr/events{/privacy}",
    "received_events_url": "https://api.github.com/users/zshshr/received_events",
    "type": "User",
    "site_admin": false
  },
  "assignees": [
    {
      "login": "zshshr",
      "id": 5382962,
      "avatar_url": "https://avatars2.githubusercontent.com/u/5382962?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/zshshr",
      "html_url": "https://github.com/zshshr",
      "followers_url": "https://api.github.com/users/zshshr/followers",
      "following_url": "https://api.github.com/users/zshshr/following{/other_user}",
      "gists_url": "https://api.github.com/users/zshshr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/zshshr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/zshshr/subscriptions",
      "organizations_url": "https://api.github.com/users/zshshr/orgs",
      "repos_url": "https://api.github.com/users/zshshr/repos",
      "events_url": "https://api.github.com/users/zshshr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/zshshr/received_events",
      "type": "User",
      "site_admin": false
    }
  ],
  "milestone": null,
  "comments": [
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/247898248",
      "html_url": "https://github.com/alibaba/weex/pull/1241#issuecomment-247898248",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1241",
      "id": 247898248,
      "user": {
        "login": "misakuo",
        "id": 6958743,
        "avatar_url": "https://avatars3.githubusercontent.com/u/6958743?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/misakuo",
        "html_url": "https://github.com/misakuo",
        "followers_url": "https://api.github.com/users/misakuo/followers",
        "following_url": "https://api.github.com/users/misakuo/following{/other_user}",
        "gists_url": "https://api.github.com/users/misakuo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/misakuo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/misakuo/subscriptions",
        "organizations_url": "https://api.github.com/users/misakuo/orgs",
        "repos_url": "https://api.github.com/users/misakuo/repos",
        "events_url": "https://api.github.com/users/misakuo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/misakuo/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-09-19T01:43:08Z",
      "updated_at": "2016-09-19T01:43:08Z",
      "body": "_Test case_    \n- webupload.we\n\n``` vue\n<template>\n    <div>\n        <web style=\"flex: 1\" src=\"fileupload.html\"></web>\n    </div>\n</template>\n```\n- upload.html  \n\n``` html\n<!DOCTYPE HTML>\n<html>\n<body style=\"font-size:28px;margin:20px\">\n*/* <input type=\"file\" accept=\"*/*\"/><br/>\nimage/* <input type=\"file\" accept=\"image/*\"/><br/>\naudio/* <input type=\"file\" accept=\"audio/*\"/><br/>\nvideo/* <input type=\"file\" accept=\"video/*\"/><br/>\napplication/pdf <input type=\"file\" accept=\"application/pdf\"/><br/>\n</body>\n</html>\n```\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/249532439",
      "html_url": "https://github.com/alibaba/weex/pull/1241#issuecomment-249532439",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1241",
      "id": 249532439,
      "user": {
        "login": "sospartan",
        "id": 115201,
        "avatar_url": "https://avatars0.githubusercontent.com/u/115201?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sospartan",
        "html_url": "https://github.com/sospartan",
        "followers_url": "https://api.github.com/users/sospartan/followers",
        "following_url": "https://api.github.com/users/sospartan/following{/other_user}",
        "gists_url": "https://api.github.com/users/sospartan/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/sospartan/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/sospartan/subscriptions",
        "organizations_url": "https://api.github.com/users/sospartan/orgs",
        "repos_url": "https://api.github.com/users/sospartan/repos",
        "events_url": "https://api.github.com/users/sospartan/events{/privacy}",
        "received_events_url": "https://api.github.com/users/sospartan/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-09-26T10:17:06Z",
      "updated_at": "2016-09-26T10:17:06Z",
      "body": "@misakuo iOS也有相关实现么 \n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/249745662",
      "html_url": "https://github.com/alibaba/weex/pull/1241#issuecomment-249745662",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1241",
      "id": 249745662,
      "user": {
        "login": "misakuo",
        "id": 6958743,
        "avatar_url": "https://avatars3.githubusercontent.com/u/6958743?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/misakuo",
        "html_url": "https://github.com/misakuo",
        "followers_url": "https://api.github.com/users/misakuo/followers",
        "following_url": "https://api.github.com/users/misakuo/following{/other_user}",
        "gists_url": "https://api.github.com/users/misakuo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/misakuo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/misakuo/subscriptions",
        "organizations_url": "https://api.github.com/users/misakuo/orgs",
        "repos_url": "https://api.github.com/users/misakuo/repos",
        "events_url": "https://api.github.com/users/misakuo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/misakuo/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-09-27T01:49:57Z",
      "updated_at": "2016-09-27T01:52:44Z",
      "body": "@sospartan iOS的WebView是原本就可以支持文件选择和上传的。我们也抽离出了一个独立于WebView的文件选择和上传的module，等iOS端完善后再在新的PR里提交\n"
    },
    {
      "url": "https://api.github.com/repos/alibaba/weex/issues/comments/257763020",
      "html_url": "https://github.com/alibaba/weex/pull/1241#issuecomment-257763020",
      "issue_url": "https://api.github.com/repos/alibaba/weex/issues/1241",
      "id": 257763020,
      "user": {
        "login": "misakuo",
        "id": 6958743,
        "avatar_url": "https://avatars3.githubusercontent.com/u/6958743?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/misakuo",
        "html_url": "https://github.com/misakuo",
        "followers_url": "https://api.github.com/users/misakuo/followers",
        "following_url": "https://api.github.com/users/misakuo/following{/other_user}",
        "gists_url": "https://api.github.com/users/misakuo/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/misakuo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/misakuo/subscriptions",
        "organizations_url": "https://api.github.com/users/misakuo/orgs",
        "repos_url": "https://api.github.com/users/misakuo/repos",
        "events_url": "https://api.github.com/users/misakuo/events{/privacy}",
        "received_events_url": "https://api.github.com/users/misakuo/received_events",
        "type": "User",
        "site_admin": false
      },
      "created_at": "2016-11-02T03:31:39Z",
      "updated_at": "2016-11-02T03:31:51Z",
      "body": "@zshshr 有关于merge这个bugfix的计划么？\n"
    }
  ],
  "created_at": "2016-09-18T11:34:10Z",
  "updated_at": "2016-11-02T03:31:51Z",
  "closed_at": null,
  "pull_request": {
    "url": "https://api.github.com/repos/alibaba/weex/pulls/1241",
    "html_url": "https://github.com/alibaba/weex/pull/1241",
    "diff_url": "https://github.com/alibaba/weex/pull/1241.diff",
    "patch_url": "https://github.com/alibaba/weex/pull/1241.patch"
  },
  "body": "Fix #1117 \n### 原因\n\n`WXWebView`中没有实现打开文件浏览器的相应回调。\n### 解决方案\n1. 在`WXWebView`中覆盖打开文件浏览器的回调方法\n2. 在`WXPageActivity`中覆盖`onActivityResult`方法\n3. 添加`onActivityResult`声明到`IWXActivityStateListener`\n4. 添加`IWXActivityStateListener`对象到`WXSDKInstance`，监听Activity返回\n5. 根据用户指定的文件类型创建文件选择的Intent对象并`startActivityForResult`\n6. 返回选中文件的Uri到WebView\n7. 移除步骤4中注册的IWXActivityStateListener对象\n",
  "closed_by": null
}
